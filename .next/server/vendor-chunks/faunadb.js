/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/faunadb";
exports.ids = ["vendor-chunks/faunadb"];
exports.modules = {

/***/ "(ssr)/./node_modules/faunadb/index.js":
/*!***************************************!*\
  !*** ./node_modules/faunadb/index.js ***!
  \***************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var query = __webpack_require__(/*! ./src/query */ \"(ssr)/./node_modules/faunadb/src/query.js\")\nvar util = __webpack_require__(/*! ./src/_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\nvar parseJSON = (__webpack_require__(/*! ./src/_json */ \"(ssr)/./node_modules/faunadb/src/_json.js\").parseJSON)\n\nmodule.exports = util.mergeObjects(\n  {\n    Client: __webpack_require__(/*! ./src/Client */ \"(ssr)/./node_modules/faunadb/src/Client.js\"),\n    Expr: __webpack_require__(/*! ./src/Expr */ \"(ssr)/./node_modules/faunadb/src/Expr.js\"),\n    PageHelper: __webpack_require__(/*! ./src/PageHelper */ \"(ssr)/./node_modules/faunadb/src/PageHelper.js\"),\n    RequestResult: __webpack_require__(/*! ./src/RequestResult */ \"(ssr)/./node_modules/faunadb/src/RequestResult.js\"),\n\n    clientLogger: __webpack_require__(/*! ./src/clientLogger */ \"(ssr)/./node_modules/faunadb/src/clientLogger.js\"),\n    errors: __webpack_require__(/*! ./src/errors */ \"(ssr)/./node_modules/faunadb/src/errors.js\"),\n    values: __webpack_require__(/*! ./src/values */ \"(ssr)/./node_modules/faunadb/src/values.js\"),\n    query: query,\n    parseJSON: parseJSON,\n  },\n  query\n)\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxZQUFZLG1CQUFPLENBQUMsOERBQWE7QUFDakMsV0FBVyxtQkFBTyxDQUFDLDhEQUFhO0FBQ2hDLGdCQUFnQiwrRkFBZ0M7O0FBRWhEO0FBQ0E7QUFDQSxZQUFZLG1CQUFPLENBQUMsZ0VBQWM7QUFDbEMsVUFBVSxtQkFBTyxDQUFDLDREQUFZO0FBQzlCLGdCQUFnQixtQkFBTyxDQUFDLHdFQUFrQjtBQUMxQyxtQkFBbUIsbUJBQU8sQ0FBQyw4RUFBcUI7O0FBRWhELGtCQUFrQixtQkFBTyxDQUFDLDRFQUFvQjtBQUM5QyxZQUFZLG1CQUFPLENBQUMsZ0VBQWM7QUFDbEMsWUFBWSxtQkFBTyxDQUFDLGdFQUFjO0FBQ2xDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29rYm9va3Nob3BuZy8uL25vZGVfbW9kdWxlcy9mYXVuYWRiL2luZGV4LmpzPzZkY2MiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHF1ZXJ5ID0gcmVxdWlyZSgnLi9zcmMvcXVlcnknKVxudmFyIHV0aWwgPSByZXF1aXJlKCcuL3NyYy9fdXRpbCcpXG52YXIgcGFyc2VKU09OID0gcmVxdWlyZSgnLi9zcmMvX2pzb24nKS5wYXJzZUpTT05cblxubW9kdWxlLmV4cG9ydHMgPSB1dGlsLm1lcmdlT2JqZWN0cyhcbiAge1xuICAgIENsaWVudDogcmVxdWlyZSgnLi9zcmMvQ2xpZW50JyksXG4gICAgRXhwcjogcmVxdWlyZSgnLi9zcmMvRXhwcicpLFxuICAgIFBhZ2VIZWxwZXI6IHJlcXVpcmUoJy4vc3JjL1BhZ2VIZWxwZXInKSxcbiAgICBSZXF1ZXN0UmVzdWx0OiByZXF1aXJlKCcuL3NyYy9SZXF1ZXN0UmVzdWx0JyksXG5cbiAgICBjbGllbnRMb2dnZXI6IHJlcXVpcmUoJy4vc3JjL2NsaWVudExvZ2dlcicpLFxuICAgIGVycm9yczogcmVxdWlyZSgnLi9zcmMvZXJyb3JzJyksXG4gICAgdmFsdWVzOiByZXF1aXJlKCcuL3NyYy92YWx1ZXMnKSxcbiAgICBxdWVyeTogcXVlcnksXG4gICAgcGFyc2VKU09OOiBwYXJzZUpTT04sXG4gIH0sXG4gIHF1ZXJ5XG4pXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/Client.js":
/*!********************************************!*\
  !*** ./node_modules/faunadb/src/Client.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar packageJson = __webpack_require__(/*! ../package.json */ \"(ssr)/./node_modules/faunadb/package.json\")\nvar PageHelper = __webpack_require__(/*! ./PageHelper */ \"(ssr)/./node_modules/faunadb/src/PageHelper.js\")\nvar RequestResult = __webpack_require__(/*! ./RequestResult */ \"(ssr)/./node_modules/faunadb/src/RequestResult.js\")\nvar errors = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/faunadb/src/errors.js\")\nvar http = __webpack_require__(/*! ./_http */ \"(ssr)/./node_modules/faunadb/src/_http/index.js\")\nvar json = __webpack_require__(/*! ./_json */ \"(ssr)/./node_modules/faunadb/src/_json.js\")\nvar query = __webpack_require__(/*! ./query */ \"(ssr)/./node_modules/faunadb/src/query.js\")\nvar stream = __webpack_require__(/*! ./stream */ \"(ssr)/./node_modules/faunadb/src/stream.js\")\nvar util = __webpack_require__(/*! ./_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\nvar values = __webpack_require__(/*! ./values */ \"(ssr)/./node_modules/faunadb/src/values.js\")\n\n/**\n * The callback that will be executed after every completed request.\n *\n * @callback Client~observerCallback\n * @param {RequestResult} res\n */\n\n/**\n * **WARNING: This is an experimental feature. There are no guarantees to\n * its API stability and/or service availability. DO NOT USE IT IN\n * PRODUCTION**.\n *\n * Creates a subscription to the result of the given read-only expression. When\n * executed, the expression must only perform reads and produce a single\n * streamable type, such as a reference or a version. Expressions that attempt\n * to perform writes or produce non-streamable types will result in an error.\n * Otherwise, any expression can be used to initiate a stream, including\n * user-defined function calls.\n *\n * The subscription returned by this method does not issue any requests until\n * the {@link module:stream~Subscription#start} method is called. Make sure to\n * subscribe to the events of interest, otherwise the received events are simply\n * ignored. For example:\n *\n * ```\n * client.stream(document.ref)\n *   .on('version', version => console.log(version))\n *   .on('error', error => console.log(error))\n *   .start()\n * ```\n *\n * Please note that streams are not temporal, meaning that there is no option to\n * configure its starting timestamp. The stream will, however, state its initial\n * subscription time via the {@link module:stream~Subscription#event:start}\n * event. A common programming mistake is to read a document, then initiate a\n * subscription. This approach can miss events that occurred between the initial\n * read and the subscription request. To prevent event loss, make sure the\n * subscription has started before performing a data load. The following example\n * buffer events until the document's data is loaded:\n *\n * ```\n * var buffer = []\n * var loaded = false\n *\n * client.stream(document.ref)\n *   .on('start', ts => {\n *     loadData(ts).then(data => {\n *       processData(data)\n *       processBuffer(buffer)\n *       loaded = true\n *     })\n *   })\n *   .on('version', version => {\n *     if (loaded) {\n *       processVersion(version)\n *     } else {\n *       buffer.push(version)\n *     }\n *   })\n *   .start()\n * ```\n *\n * The reduce boilerplate, the `document` helper implements a similar\n * functionality, except it discards events prior to the document's snapshot\n * time. The expression given to this helper must be a reference as it\n * internally runs a {@link module:query~Get} call with it. The example above\n * can be rewritten as:\n *\n * ```\n * client.stream.document(document.ref)\n *   .on('snapshot', data => processData(data))\n *   .on('version', version => processVersion(version))\n *   .start()\n * ```\n *\n * Be aware that streams are not available in all browsers. If the client can't\n * initiate a stream, an error event with the {@link\n * module:errors~StreamsNotSupported} error will be emmited.\n *\n * To stop a subscription, call the {@link module:stream~Subscription#close}\n * method:\n *\n * ```\n * var subscription = client.stream(document.ref)\n *   .on('version', version => processVersion(version))\n *   .start()\n *\n * // ...\n * subscription.close()\n * ```\n *\n * @param {module:query~ExprArg} expression\n *   The expression to subscribe to. Created from {@link module:query}\n *   functions.\n *\n * @param {?module:stream~Options} options\n *   Object that configures the stream.\n *\n * @property {function} document\n *  A document stream helper. See {@link Client#stream} for more information.\n *\n * @see module:stream~Subscription\n *\n * @function\n * @name Client#stream\n * @returns {module:stream~Subscription} A new subscription instance.\n */\n\n/**\n * A client for interacting with FaunaDB.\n *\n * Users will mainly call the {@link Client#query} method to execute queries, or\n * the {@link Client#stream} method to subscribe to streams.\n *\n * See the [FaunaDB Documentation](https://fauna.com/documentation) for detailed examples.\n *\n * All methods return promises containing a JSON object that represents the FaunaDB response.\n * Literal types in the response object will remain as strings, Arrays, and objects.\n * FaunaDB types, such as {@link Ref}, {@link SetRef}, {@link FaunaTime}, and {@link FaunaDate} will\n * be converted into the appropriate object.\n *\n * (So if a response contains `{ \"@ref\": \"collections/frogs/123\" }`,\n * it will be returned as `new Ref(\"collections/frogs/123\")`.)\n *\n * @constructor\n * @param {?Object} options\n *   Object that configures this FaunaDB client.\n * @param {?string} options.endpoint\n *   Full URL for the FaunaDB server.\n * @param {?string} options.domain\n *   Base URL for the FaunaDB server.\n * @param {?('http'|'https')} options.scheme\n *   HTTP scheme to use.\n * @param {?number} options.port\n *   Port of the FaunaDB server.\n * @param {?string} options.secret FaunaDB secret (see [Reference Documentation](https://app.fauna.com/documentation/intro/security))\n * @param {?number} options.timeout Read timeout in seconds.\n * @param {?Client~observerCallback} options.observer\n *   Callback that will be called after every completed request.\n * @param {?boolean} options.keepAlive\n *   Configures http/https keepAlive option (ignored in browser environments)\n * @param {?{ string: string }} options.headers\n *   Optional headers to send with requests\n * @param {?fetch} options.fetch\n *   a fetch compatible [API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) for making a request\n * @param {?number} options.queryTimeout\n *   Sets the maximum amount of time (in milliseconds) for query execution on the server\n * @param {?number} options.http2SessionIdleTime\n *   Sets the maximum amount of time (in milliseconds) an HTTP2 session may live\n *   when there's no activity. Must be a non-negative integer, with a maximum value of 5000.\n *   If an invalid value is passed a default of 500 ms is applied. If a value\n *   exceeding 5000 ms is passed (e.g. Infinity) the maximum of 5000 ms is applied.\n *   Only applicable for NodeJS environment (when http2 module is used).\n *   can also be configured via the FAUNADB_HTTP2_SESSION_IDLE_TIME environment variable\n *   which has the highest priority and overrides the option passed into the Client constructor.\n * @param {?boolean} options.checkNewVersion\n *   Enabled by default. Prints a message to the terminal when a newer driver is available.\n * @param {?boolean} options.metrics\n *   Disabled by default. Controls whether or not query metrics are returned.\n */\nfunction Client(options) {\n  const http2SessionIdleTime = getHttp2SessionIdleTime(\n    options ? options.http2SessionIdleTime : undefined\n  )\n\n  if (options) options.http2SessionIdleTime = http2SessionIdleTime\n\n  options = util.applyDefaults(options, {\n    endpoint: null,\n    domain: 'db.fauna.com',\n    scheme: 'https',\n    port: null,\n    secret: null,\n    timeout: 60,\n    observer: null,\n    keepAlive: true,\n    headers: {},\n    fetch: undefined,\n    queryTimeout: null,\n    http2SessionIdleTime,\n    checkNewVersion: false,\n  })\n\n  this._observer = options.observer\n  this._http = new http.HttpClient(options)\n  this.stream = stream.StreamAPI(this)\n}\n\n/**\n * Current API version.\n *\n * @type {string}\n */\nClient.apiVersion = packageJson.apiVersion\n\n/**\n * Executes a query via the FaunaDB Query API.\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi),\n * and the query functions in this documentation.\n * @param expression {module:query~ExprArg}\n *   The query to execute. Created from {@link module:query} functions.\n * @param {?Object} options\n *   Object that configures the current query, overriding FaunaDB client options.\n * @param {?string} options.secret FaunaDB secret (see [Reference Documentation](https://app.fauna.com/documentation/intro/security))\n * @return {external:Promise<Object>} FaunaDB response object.\n */\nClient.prototype.query = function(expression, options) {\n  query.arity.between(1, 2, arguments, 'Client.prototype.query')\n  options = Object.assign({}, this._globalQueryOptions, options)\n  return this._execute('POST', '', query.wrap(expression), null, options)\n}\n\n/**\n * Returns a {@link PageHelper} for the given Query expression.\n * This provides a helpful API for paginating over FaunaDB responses.\n * @param expression {Expr}\n *   The Query expression to paginate over.\n * @param params {Object}\n *   Options to be passed to the paginate function. See [paginate](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n * @param options {?Object}\n *   Object that configures the current pagination queries, overriding FaunaDB client options.\n * @param {?string} options.secret FaunaDB secret (see [Reference Documentation](https://app.fauna.com/documentation/intro/security))\n * @returns {PageHelper} A PageHelper that wraps the provided expression.\n */\nClient.prototype.paginate = function(expression, params, options) {\n  params = util.defaults(params, {})\n  options = util.defaults(options, {})\n\n  return new PageHelper(this, expression, params, options)\n}\n\n/**\n * Sends a `ping` request to FaunaDB.\n * @return {external:Promise<string>} Ping response.\n */\nClient.prototype.ping = function(scope, timeout) {\n  return this._execute('GET', 'ping', null, { scope: scope, timeout: timeout })\n}\n\n/**\n * Get the freshest timestamp reported to this client.\n * @returns {number} the last seen transaction time\n */\nClient.prototype.getLastTxnTime = function() {\n  return this._http.getLastTxnTime()\n}\n\n/**\n * Sync the freshest timestamp seen by this client.\n *\n * This has no effect if staler than currently stored timestamp.\n * WARNING: This should be used only when coordinating timestamps across\n *          multiple clients. Moving the timestamp arbitrarily forward into\n *          the future will cause transactions to stall.\n * @param time {number} the last seen transaction time\n */\nClient.prototype.syncLastTxnTime = function(time) {\n  this._http.syncLastTxnTime(time)\n}\n\n/**\n * Closes the client session and cleans up any held resources.\n * By default, it will wait for any ongoing requests to complete on their own;\n * streaming requests are terminated forcibly. Any subsequent requests will\n * error after the .close method is called.\n * Should be used at application termination in order to release any open resources\n * and allow the process to terminate e.g. when the custom http2SessionIdleTime parameter is used.\n *\n * @param {?object} opts Close options.\n * @param {?boolean} opts.force Specifying this property will force any ongoing\n * requests to terminate instead of gracefully waiting until they complete.\n * This may result in an ERR_HTTP2_STREAM_CANCEL error for NodeJS.\n * @returns {Promise<void>}\n */\nClient.prototype.close = function(opts) {\n  return this._http.close(opts)\n}\n\n/**\n * Executes a query via the FaunaDB Query API.\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi),\n * and the query functions in this documentation.\n * @param expression {module:query~ExprArg}\n *   The query to execute. Created from {@link module:query} functions.\n * @param {?Object} options\n *   Object that configures the current query, overriding FaunaDB client options.\n * @param {?string} options.secret FaunaDB secret (see [Reference Documentation](https://app.fauna.com/documentation/intro/security))\n * @return {external:Promise<Object>} {value, metrics} An object containing the FaunaDB response object and the list of query metrics incurred by the request.\n */\nClient.prototype.queryWithMetrics = function(expression, options) {\n  query.arity.between(1, 2, arguments, 'Client.prototype.query')\n  return this._execute('POST', '', query.wrap(expression), null, options, true)\n}\n\nClient.prototype._execute = function(\n  method,\n  path,\n  data,\n  query,\n  options,\n  returnMetrics = false\n) {\n  query = util.defaults(query, null)\n\n  if (\n    path instanceof values.Ref ||\n    util.checkInstanceHasProperty(path, '_isFaunaRef')\n  ) {\n    path = path.value\n  }\n\n  if (query !== null) {\n    query = util.removeUndefinedValues(query)\n  }\n\n  var startTime = Date.now()\n  var self = this\n  var body =\n    ['GET', 'HEAD'].indexOf(method) >= 0 ? undefined : JSON.stringify(data)\n\n  return this._http\n    .execute(\n      Object.assign({}, options, {\n        path: path,\n        query: query,\n        method: method,\n        body: body,\n      })\n    )\n    .then(function(response) {\n      var endTime = Date.now()\n      var responseObject = json.parseJSON(response.body)\n      var result = new RequestResult(\n        method,\n        path,\n        query,\n        body,\n        data,\n        response.body,\n        responseObject,\n        response.status,\n        response.headers,\n        startTime,\n        endTime\n      )\n      self._handleRequestResult(response, result, options)\n\n      const metricsHeaders = [\n        'x-compute-ops',\n        'x-byte-read-ops',\n        'x-byte-write-ops',\n        'x-query-time',\n        'x-txn-retries',\n      ]\n\n      if (returnMetrics) {\n        return {\n          value: responseObject['resource'],\n          metrics: Object.fromEntries(\n            Array.from(Object.entries(response.headers))\n              .filter(([k, v]) => metricsHeaders.includes(k))\n              .map(([k, v]) => [k, parseInt(v)])\n          ),\n        }\n      } else {\n        return responseObject['resource']\n      }\n    })\n}\n\nClient.prototype._handleRequestResult = function(response, result, options) {\n  var txnTimeHeaderKey = 'x-txn-time'\n\n  if (response.headers[txnTimeHeaderKey] != null) {\n    this.syncLastTxnTime(parseInt(response.headers[txnTimeHeaderKey], 10))\n  }\n\n  var observers = [this._observer, options && options.observer]\n\n  observers.forEach(observer => {\n    if (typeof observer == 'function') {\n      observer(result, this)\n    }\n  })\n\n  errors.FaunaHTTPError.raiseForStatusCode(result)\n}\n\nfunction getHttp2SessionIdleTime(configuredIdleTime) {\n  const maxIdleTime = 5000\n  const defaultIdleTime = 500\n  const envIdleTime = util.getEnvVariable('FAUNADB_HTTP2_SESSION_IDLE_TIME')\n\n  var value = defaultIdleTime\n  // attemp to set the idle time to the env value and then the configured value\n  const values = [envIdleTime, configuredIdleTime]\n  for (const rawValue of values) {\n    const parsedValue =\n      rawValue === 'Infinity' ? Number.MAX_SAFE_INTEGER : parseInt(rawValue, 10)\n    const isNegative = parsedValue < 0\n    const isGreaterThanMax = parsedValue > maxIdleTime\n    // if we didn't get infinity or a positive integer move to the next value\n    if (isNegative || !parsedValue) continue\n    // if we did get something valid constrain it to the ceiling\n    value = parsedValue\n    if (isGreaterThanMax) value = maxIdleTime\n    break\n  }\n\n  return value\n}\n\nmodule.exports = Client\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvQ2xpZW50LmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLGtCQUFrQixtQkFBTyxDQUFDLGtFQUFpQjtBQUMzQyxpQkFBaUIsbUJBQU8sQ0FBQyxvRUFBYztBQUN2QyxvQkFBb0IsbUJBQU8sQ0FBQywwRUFBaUI7QUFDN0MsYUFBYSxtQkFBTyxDQUFDLDREQUFVO0FBQy9CLFdBQVcsbUJBQU8sQ0FBQyxnRUFBUztBQUM1QixXQUFXLG1CQUFPLENBQUMsMERBQVM7QUFDNUIsWUFBWSxtQkFBTyxDQUFDLDBEQUFTO0FBQzdCLGFBQWEsbUJBQU8sQ0FBQyw0REFBVTtBQUMvQixXQUFXLG1CQUFPLENBQUMsMERBQVM7QUFDNUIsYUFBYSxtQkFBTyxDQUFDLDREQUFVOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0NBQXdDO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdCQUF3QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQyxzQ0FBc0M7QUFDdEM7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9va2Jvb2tzaG9wbmcvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvQ2xpZW50LmpzP2I1NjUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbnZhciBwYWNrYWdlSnNvbiA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpXG52YXIgUGFnZUhlbHBlciA9IHJlcXVpcmUoJy4vUGFnZUhlbHBlcicpXG52YXIgUmVxdWVzdFJlc3VsdCA9IHJlcXVpcmUoJy4vUmVxdWVzdFJlc3VsdCcpXG52YXIgZXJyb3JzID0gcmVxdWlyZSgnLi9lcnJvcnMnKVxudmFyIGh0dHAgPSByZXF1aXJlKCcuL19odHRwJylcbnZhciBqc29uID0gcmVxdWlyZSgnLi9fanNvbicpXG52YXIgcXVlcnkgPSByZXF1aXJlKCcuL3F1ZXJ5JylcbnZhciBzdHJlYW0gPSByZXF1aXJlKCcuL3N0cmVhbScpXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vX3V0aWwnKVxudmFyIHZhbHVlcyA9IHJlcXVpcmUoJy4vdmFsdWVzJylcblxuLyoqXG4gKiBUaGUgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGFmdGVyIGV2ZXJ5IGNvbXBsZXRlZCByZXF1ZXN0LlxuICpcbiAqIEBjYWxsYmFjayBDbGllbnR+b2JzZXJ2ZXJDYWxsYmFja1xuICogQHBhcmFtIHtSZXF1ZXN0UmVzdWx0fSByZXNcbiAqL1xuXG4vKipcbiAqICoqV0FSTklORzogVGhpcyBpcyBhbiBleHBlcmltZW50YWwgZmVhdHVyZS4gVGhlcmUgYXJlIG5vIGd1YXJhbnRlZXMgdG9cbiAqIGl0cyBBUEkgc3RhYmlsaXR5IGFuZC9vciBzZXJ2aWNlIGF2YWlsYWJpbGl0eS4gRE8gTk9UIFVTRSBJVCBJTlxuICogUFJPRFVDVElPTioqLlxuICpcbiAqIENyZWF0ZXMgYSBzdWJzY3JpcHRpb24gdG8gdGhlIHJlc3VsdCBvZiB0aGUgZ2l2ZW4gcmVhZC1vbmx5IGV4cHJlc3Npb24uIFdoZW5cbiAqIGV4ZWN1dGVkLCB0aGUgZXhwcmVzc2lvbiBtdXN0IG9ubHkgcGVyZm9ybSByZWFkcyBhbmQgcHJvZHVjZSBhIHNpbmdsZVxuICogc3RyZWFtYWJsZSB0eXBlLCBzdWNoIGFzIGEgcmVmZXJlbmNlIG9yIGEgdmVyc2lvbi4gRXhwcmVzc2lvbnMgdGhhdCBhdHRlbXB0XG4gKiB0byBwZXJmb3JtIHdyaXRlcyBvciBwcm9kdWNlIG5vbi1zdHJlYW1hYmxlIHR5cGVzIHdpbGwgcmVzdWx0IGluIGFuIGVycm9yLlxuICogT3RoZXJ3aXNlLCBhbnkgZXhwcmVzc2lvbiBjYW4gYmUgdXNlZCB0byBpbml0aWF0ZSBhIHN0cmVhbSwgaW5jbHVkaW5nXG4gKiB1c2VyLWRlZmluZWQgZnVuY3Rpb24gY2FsbHMuXG4gKlxuICogVGhlIHN1YnNjcmlwdGlvbiByZXR1cm5lZCBieSB0aGlzIG1ldGhvZCBkb2VzIG5vdCBpc3N1ZSBhbnkgcmVxdWVzdHMgdW50aWxcbiAqIHRoZSB7QGxpbmsgbW9kdWxlOnN0cmVhbX5TdWJzY3JpcHRpb24jc3RhcnR9IG1ldGhvZCBpcyBjYWxsZWQuIE1ha2Ugc3VyZSB0b1xuICogc3Vic2NyaWJlIHRvIHRoZSBldmVudHMgb2YgaW50ZXJlc3QsIG90aGVyd2lzZSB0aGUgcmVjZWl2ZWQgZXZlbnRzIGFyZSBzaW1wbHlcbiAqIGlnbm9yZWQuIEZvciBleGFtcGxlOlxuICpcbiAqIGBgYFxuICogY2xpZW50LnN0cmVhbShkb2N1bWVudC5yZWYpXG4gKiAgIC5vbigndmVyc2lvbicsIHZlcnNpb24gPT4gY29uc29sZS5sb2codmVyc2lvbikpXG4gKiAgIC5vbignZXJyb3InLCBlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcikpXG4gKiAgIC5zdGFydCgpXG4gKiBgYGBcbiAqXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IHN0cmVhbXMgYXJlIG5vdCB0ZW1wb3JhbCwgbWVhbmluZyB0aGF0IHRoZXJlIGlzIG5vIG9wdGlvbiB0b1xuICogY29uZmlndXJlIGl0cyBzdGFydGluZyB0aW1lc3RhbXAuIFRoZSBzdHJlYW0gd2lsbCwgaG93ZXZlciwgc3RhdGUgaXRzIGluaXRpYWxcbiAqIHN1YnNjcmlwdGlvbiB0aW1lIHZpYSB0aGUge0BsaW5rIG1vZHVsZTpzdHJlYW1+U3Vic2NyaXB0aW9uI2V2ZW50OnN0YXJ0fVxuICogZXZlbnQuIEEgY29tbW9uIHByb2dyYW1taW5nIG1pc3Rha2UgaXMgdG8gcmVhZCBhIGRvY3VtZW50LCB0aGVuIGluaXRpYXRlIGFcbiAqIHN1YnNjcmlwdGlvbi4gVGhpcyBhcHByb2FjaCBjYW4gbWlzcyBldmVudHMgdGhhdCBvY2N1cnJlZCBiZXR3ZWVuIHRoZSBpbml0aWFsXG4gKiByZWFkIGFuZCB0aGUgc3Vic2NyaXB0aW9uIHJlcXVlc3QuIFRvIHByZXZlbnQgZXZlbnQgbG9zcywgbWFrZSBzdXJlIHRoZVxuICogc3Vic2NyaXB0aW9uIGhhcyBzdGFydGVkIGJlZm9yZSBwZXJmb3JtaW5nIGEgZGF0YSBsb2FkLiBUaGUgZm9sbG93aW5nIGV4YW1wbGVcbiAqIGJ1ZmZlciBldmVudHMgdW50aWwgdGhlIGRvY3VtZW50J3MgZGF0YSBpcyBsb2FkZWQ6XG4gKlxuICogYGBgXG4gKiB2YXIgYnVmZmVyID0gW11cbiAqIHZhciBsb2FkZWQgPSBmYWxzZVxuICpcbiAqIGNsaWVudC5zdHJlYW0oZG9jdW1lbnQucmVmKVxuICogICAub24oJ3N0YXJ0JywgdHMgPT4ge1xuICogICAgIGxvYWREYXRhKHRzKS50aGVuKGRhdGEgPT4ge1xuICogICAgICAgcHJvY2Vzc0RhdGEoZGF0YSlcbiAqICAgICAgIHByb2Nlc3NCdWZmZXIoYnVmZmVyKVxuICogICAgICAgbG9hZGVkID0gdHJ1ZVxuICogICAgIH0pXG4gKiAgIH0pXG4gKiAgIC5vbigndmVyc2lvbicsIHZlcnNpb24gPT4ge1xuICogICAgIGlmIChsb2FkZWQpIHtcbiAqICAgICAgIHByb2Nlc3NWZXJzaW9uKHZlcnNpb24pXG4gKiAgICAgfSBlbHNlIHtcbiAqICAgICAgIGJ1ZmZlci5wdXNoKHZlcnNpb24pXG4gKiAgICAgfVxuICogICB9KVxuICogICAuc3RhcnQoKVxuICogYGBgXG4gKlxuICogVGhlIHJlZHVjZSBib2lsZXJwbGF0ZSwgdGhlIGBkb2N1bWVudGAgaGVscGVyIGltcGxlbWVudHMgYSBzaW1pbGFyXG4gKiBmdW5jdGlvbmFsaXR5LCBleGNlcHQgaXQgZGlzY2FyZHMgZXZlbnRzIHByaW9yIHRvIHRoZSBkb2N1bWVudCdzIHNuYXBzaG90XG4gKiB0aW1lLiBUaGUgZXhwcmVzc2lvbiBnaXZlbiB0byB0aGlzIGhlbHBlciBtdXN0IGJlIGEgcmVmZXJlbmNlIGFzIGl0XG4gKiBpbnRlcm5hbGx5IHJ1bnMgYSB7QGxpbmsgbW9kdWxlOnF1ZXJ5fkdldH0gY2FsbCB3aXRoIGl0LiBUaGUgZXhhbXBsZSBhYm92ZVxuICogY2FuIGJlIHJld3JpdHRlbiBhczpcbiAqXG4gKiBgYGBcbiAqIGNsaWVudC5zdHJlYW0uZG9jdW1lbnQoZG9jdW1lbnQucmVmKVxuICogICAub24oJ3NuYXBzaG90JywgZGF0YSA9PiBwcm9jZXNzRGF0YShkYXRhKSlcbiAqICAgLm9uKCd2ZXJzaW9uJywgdmVyc2lvbiA9PiBwcm9jZXNzVmVyc2lvbih2ZXJzaW9uKSlcbiAqICAgLnN0YXJ0KClcbiAqIGBgYFxuICpcbiAqIEJlIGF3YXJlIHRoYXQgc3RyZWFtcyBhcmUgbm90IGF2YWlsYWJsZSBpbiBhbGwgYnJvd3NlcnMuIElmIHRoZSBjbGllbnQgY2FuJ3RcbiAqIGluaXRpYXRlIGEgc3RyZWFtLCBhbiBlcnJvciBldmVudCB3aXRoIHRoZSB7QGxpbmtcbiAqIG1vZHVsZTplcnJvcnN+U3RyZWFtc05vdFN1cHBvcnRlZH0gZXJyb3Igd2lsbCBiZSBlbW1pdGVkLlxuICpcbiAqIFRvIHN0b3AgYSBzdWJzY3JpcHRpb24sIGNhbGwgdGhlIHtAbGluayBtb2R1bGU6c3RyZWFtflN1YnNjcmlwdGlvbiNjbG9zZX1cbiAqIG1ldGhvZDpcbiAqXG4gKiBgYGBcbiAqIHZhciBzdWJzY3JpcHRpb24gPSBjbGllbnQuc3RyZWFtKGRvY3VtZW50LnJlZilcbiAqICAgLm9uKCd2ZXJzaW9uJywgdmVyc2lvbiA9PiBwcm9jZXNzVmVyc2lvbih2ZXJzaW9uKSlcbiAqICAgLnN0YXJ0KClcbiAqXG4gKiAvLyAuLi5cbiAqIHN1YnNjcmlwdGlvbi5jbG9zZSgpXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByZXNzaW9uXG4gKiAgIFRoZSBleHByZXNzaW9uIHRvIHN1YnNjcmliZSB0by4gQ3JlYXRlZCBmcm9tIHtAbGluayBtb2R1bGU6cXVlcnl9XG4gKiAgIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0gez9tb2R1bGU6c3RyZWFtfk9wdGlvbnN9IG9wdGlvbnNcbiAqICAgT2JqZWN0IHRoYXQgY29uZmlndXJlcyB0aGUgc3RyZWFtLlxuICpcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IGRvY3VtZW50XG4gKiAgQSBkb2N1bWVudCBzdHJlYW0gaGVscGVyLiBTZWUge0BsaW5rIENsaWVudCNzdHJlYW19IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIEBzZWUgbW9kdWxlOnN0cmVhbX5TdWJzY3JpcHRpb25cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBuYW1lIENsaWVudCNzdHJlYW1cbiAqIEByZXR1cm5zIHttb2R1bGU6c3RyZWFtflN1YnNjcmlwdGlvbn0gQSBuZXcgc3Vic2NyaXB0aW9uIGluc3RhbmNlLlxuICovXG5cbi8qKlxuICogQSBjbGllbnQgZm9yIGludGVyYWN0aW5nIHdpdGggRmF1bmFEQi5cbiAqXG4gKiBVc2VycyB3aWxsIG1haW5seSBjYWxsIHRoZSB7QGxpbmsgQ2xpZW50I3F1ZXJ5fSBtZXRob2QgdG8gZXhlY3V0ZSBxdWVyaWVzLCBvclxuICogdGhlIHtAbGluayBDbGllbnQjc3RyZWFtfSBtZXRob2QgdG8gc3Vic2NyaWJlIHRvIHN0cmVhbXMuXG4gKlxuICogU2VlIHRoZSBbRmF1bmFEQiBEb2N1bWVudGF0aW9uXShodHRwczovL2ZhdW5hLmNvbS9kb2N1bWVudGF0aW9uKSBmb3IgZGV0YWlsZWQgZXhhbXBsZXMuXG4gKlxuICogQWxsIG1ldGhvZHMgcmV0dXJuIHByb21pc2VzIGNvbnRhaW5pbmcgYSBKU09OIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIEZhdW5hREIgcmVzcG9uc2UuXG4gKiBMaXRlcmFsIHR5cGVzIGluIHRoZSByZXNwb25zZSBvYmplY3Qgd2lsbCByZW1haW4gYXMgc3RyaW5ncywgQXJyYXlzLCBhbmQgb2JqZWN0cy5cbiAqIEZhdW5hREIgdHlwZXMsIHN1Y2ggYXMge0BsaW5rIFJlZn0sIHtAbGluayBTZXRSZWZ9LCB7QGxpbmsgRmF1bmFUaW1lfSwgYW5kIHtAbGluayBGYXVuYURhdGV9IHdpbGxcbiAqIGJlIGNvbnZlcnRlZCBpbnRvIHRoZSBhcHByb3ByaWF0ZSBvYmplY3QuXG4gKlxuICogKFNvIGlmIGEgcmVzcG9uc2UgY29udGFpbnMgYHsgXCJAcmVmXCI6IFwiY29sbGVjdGlvbnMvZnJvZ3MvMTIzXCIgfWAsXG4gKiBpdCB3aWxsIGJlIHJldHVybmVkIGFzIGBuZXcgUmVmKFwiY29sbGVjdGlvbnMvZnJvZ3MvMTIzXCIpYC4pXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gez9PYmplY3R9IG9wdGlvbnNcbiAqICAgT2JqZWN0IHRoYXQgY29uZmlndXJlcyB0aGlzIEZhdW5hREIgY2xpZW50LlxuICogQHBhcmFtIHs/c3RyaW5nfSBvcHRpb25zLmVuZHBvaW50XG4gKiAgIEZ1bGwgVVJMIGZvciB0aGUgRmF1bmFEQiBzZXJ2ZXIuXG4gKiBAcGFyYW0gez9zdHJpbmd9IG9wdGlvbnMuZG9tYWluXG4gKiAgIEJhc2UgVVJMIGZvciB0aGUgRmF1bmFEQiBzZXJ2ZXIuXG4gKiBAcGFyYW0gez8oJ2h0dHAnfCdodHRwcycpfSBvcHRpb25zLnNjaGVtZVxuICogICBIVFRQIHNjaGVtZSB0byB1c2UuXG4gKiBAcGFyYW0gez9udW1iZXJ9IG9wdGlvbnMucG9ydFxuICogICBQb3J0IG9mIHRoZSBGYXVuYURCIHNlcnZlci5cbiAqIEBwYXJhbSB7P3N0cmluZ30gb3B0aW9ucy5zZWNyZXQgRmF1bmFEQiBzZWNyZXQgKHNlZSBbUmVmZXJlbmNlIERvY3VtZW50YXRpb25dKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL2ludHJvL3NlY3VyaXR5KSlcbiAqIEBwYXJhbSB7P251bWJlcn0gb3B0aW9ucy50aW1lb3V0IFJlYWQgdGltZW91dCBpbiBzZWNvbmRzLlxuICogQHBhcmFtIHs/Q2xpZW50fm9ic2VydmVyQ2FsbGJhY2t9IG9wdGlvbnMub2JzZXJ2ZXJcbiAqICAgQ2FsbGJhY2sgdGhhdCB3aWxsIGJlIGNhbGxlZCBhZnRlciBldmVyeSBjb21wbGV0ZWQgcmVxdWVzdC5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IG9wdGlvbnMua2VlcEFsaXZlXG4gKiAgIENvbmZpZ3VyZXMgaHR0cC9odHRwcyBrZWVwQWxpdmUgb3B0aW9uIChpZ25vcmVkIGluIGJyb3dzZXIgZW52aXJvbm1lbnRzKVxuICogQHBhcmFtIHs/eyBzdHJpbmc6IHN0cmluZyB9fSBvcHRpb25zLmhlYWRlcnNcbiAqICAgT3B0aW9uYWwgaGVhZGVycyB0byBzZW5kIHdpdGggcmVxdWVzdHNcbiAqIEBwYXJhbSB7P2ZldGNofSBvcHRpb25zLmZldGNoXG4gKiAgIGEgZmV0Y2ggY29tcGF0aWJsZSBbQVBJXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRmV0Y2hfQVBJKSBmb3IgbWFraW5nIGEgcmVxdWVzdFxuICogQHBhcmFtIHs/bnVtYmVyfSBvcHRpb25zLnF1ZXJ5VGltZW91dFxuICogICBTZXRzIHRoZSBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIChpbiBtaWxsaXNlY29uZHMpIGZvciBxdWVyeSBleGVjdXRpb24gb24gdGhlIHNlcnZlclxuICogQHBhcmFtIHs/bnVtYmVyfSBvcHRpb25zLmh0dHAyU2Vzc2lvbklkbGVUaW1lXG4gKiAgIFNldHMgdGhlIG1heGltdW0gYW1vdW50IG9mIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgYW4gSFRUUDIgc2Vzc2lvbiBtYXkgbGl2ZVxuICogICB3aGVuIHRoZXJlJ3Mgbm8gYWN0aXZpdHkuIE11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciwgd2l0aCBhIG1heGltdW0gdmFsdWUgb2YgNTAwMC5cbiAqICAgSWYgYW4gaW52YWxpZCB2YWx1ZSBpcyBwYXNzZWQgYSBkZWZhdWx0IG9mIDUwMCBtcyBpcyBhcHBsaWVkLiBJZiBhIHZhbHVlXG4gKiAgIGV4Y2VlZGluZyA1MDAwIG1zIGlzIHBhc3NlZCAoZS5nLiBJbmZpbml0eSkgdGhlIG1heGltdW0gb2YgNTAwMCBtcyBpcyBhcHBsaWVkLlxuICogICBPbmx5IGFwcGxpY2FibGUgZm9yIE5vZGVKUyBlbnZpcm9ubWVudCAod2hlbiBodHRwMiBtb2R1bGUgaXMgdXNlZCkuXG4gKiAgIGNhbiBhbHNvIGJlIGNvbmZpZ3VyZWQgdmlhIHRoZSBGQVVOQURCX0hUVFAyX1NFU1NJT05fSURMRV9USU1FIGVudmlyb25tZW50IHZhcmlhYmxlXG4gKiAgIHdoaWNoIGhhcyB0aGUgaGlnaGVzdCBwcmlvcml0eSBhbmQgb3ZlcnJpZGVzIHRoZSBvcHRpb24gcGFzc2VkIGludG8gdGhlIENsaWVudCBjb25zdHJ1Y3Rvci5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IG9wdGlvbnMuY2hlY2tOZXdWZXJzaW9uXG4gKiAgIEVuYWJsZWQgYnkgZGVmYXVsdC4gUHJpbnRzIGEgbWVzc2FnZSB0byB0aGUgdGVybWluYWwgd2hlbiBhIG5ld2VyIGRyaXZlciBpcyBhdmFpbGFibGUuXG4gKiBAcGFyYW0gez9ib29sZWFufSBvcHRpb25zLm1ldHJpY3NcbiAqICAgRGlzYWJsZWQgYnkgZGVmYXVsdC4gQ29udHJvbHMgd2hldGhlciBvciBub3QgcXVlcnkgbWV0cmljcyBhcmUgcmV0dXJuZWQuXG4gKi9cbmZ1bmN0aW9uIENsaWVudChvcHRpb25zKSB7XG4gIGNvbnN0IGh0dHAyU2Vzc2lvbklkbGVUaW1lID0gZ2V0SHR0cDJTZXNzaW9uSWRsZVRpbWUoXG4gICAgb3B0aW9ucyA/IG9wdGlvbnMuaHR0cDJTZXNzaW9uSWRsZVRpbWUgOiB1bmRlZmluZWRcbiAgKVxuXG4gIGlmIChvcHRpb25zKSBvcHRpb25zLmh0dHAyU2Vzc2lvbklkbGVUaW1lID0gaHR0cDJTZXNzaW9uSWRsZVRpbWVcblxuICBvcHRpb25zID0gdXRpbC5hcHBseURlZmF1bHRzKG9wdGlvbnMsIHtcbiAgICBlbmRwb2ludDogbnVsbCxcbiAgICBkb21haW46ICdkYi5mYXVuYS5jb20nLFxuICAgIHNjaGVtZTogJ2h0dHBzJyxcbiAgICBwb3J0OiBudWxsLFxuICAgIHNlY3JldDogbnVsbCxcbiAgICB0aW1lb3V0OiA2MCxcbiAgICBvYnNlcnZlcjogbnVsbCxcbiAgICBrZWVwQWxpdmU6IHRydWUsXG4gICAgaGVhZGVyczoge30sXG4gICAgZmV0Y2g6IHVuZGVmaW5lZCxcbiAgICBxdWVyeVRpbWVvdXQ6IG51bGwsXG4gICAgaHR0cDJTZXNzaW9uSWRsZVRpbWUsXG4gICAgY2hlY2tOZXdWZXJzaW9uOiBmYWxzZSxcbiAgfSlcblxuICB0aGlzLl9vYnNlcnZlciA9IG9wdGlvbnMub2JzZXJ2ZXJcbiAgdGhpcy5faHR0cCA9IG5ldyBodHRwLkh0dHBDbGllbnQob3B0aW9ucylcbiAgdGhpcy5zdHJlYW0gPSBzdHJlYW0uU3RyZWFtQVBJKHRoaXMpXG59XG5cbi8qKlxuICogQ3VycmVudCBBUEkgdmVyc2lvbi5cbiAqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5DbGllbnQuYXBpVmVyc2lvbiA9IHBhY2thZ2VKc29uLmFwaVZlcnNpb25cblxuLyoqXG4gKiBFeGVjdXRlcyBhIHF1ZXJ5IHZpYSB0aGUgRmF1bmFEQiBRdWVyeSBBUEkuXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkpLFxuICogYW5kIHRoZSBxdWVyeSBmdW5jdGlvbnMgaW4gdGhpcyBkb2N1bWVudGF0aW9uLlxuICogQHBhcmFtIGV4cHJlc3Npb24ge21vZHVsZTpxdWVyeX5FeHByQXJnfVxuICogICBUaGUgcXVlcnkgdG8gZXhlY3V0ZS4gQ3JlYXRlZCBmcm9tIHtAbGluayBtb2R1bGU6cXVlcnl9IGZ1bmN0aW9ucy5cbiAqIEBwYXJhbSB7P09iamVjdH0gb3B0aW9uc1xuICogICBPYmplY3QgdGhhdCBjb25maWd1cmVzIHRoZSBjdXJyZW50IHF1ZXJ5LCBvdmVycmlkaW5nIEZhdW5hREIgY2xpZW50IG9wdGlvbnMuXG4gKiBAcGFyYW0gez9zdHJpbmd9IG9wdGlvbnMuc2VjcmV0IEZhdW5hREIgc2VjcmV0IChzZWUgW1JlZmVyZW5jZSBEb2N1bWVudGF0aW9uXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9pbnRyby9zZWN1cml0eSkpXG4gKiBAcmV0dXJuIHtleHRlcm5hbDpQcm9taXNlPE9iamVjdD59IEZhdW5hREIgcmVzcG9uc2Ugb2JqZWN0LlxuICovXG5DbGllbnQucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24oZXhwcmVzc2lvbiwgb3B0aW9ucykge1xuICBxdWVyeS5hcml0eS5iZXR3ZWVuKDEsIDIsIGFyZ3VtZW50cywgJ0NsaWVudC5wcm90b3R5cGUucXVlcnknKVxuICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fZ2xvYmFsUXVlcnlPcHRpb25zLCBvcHRpb25zKVxuICByZXR1cm4gdGhpcy5fZXhlY3V0ZSgnUE9TVCcsICcnLCBxdWVyeS53cmFwKGV4cHJlc3Npb24pLCBudWxsLCBvcHRpb25zKVxufVxuXG4vKipcbiAqIFJldHVybnMgYSB7QGxpbmsgUGFnZUhlbHBlcn0gZm9yIHRoZSBnaXZlbiBRdWVyeSBleHByZXNzaW9uLlxuICogVGhpcyBwcm92aWRlcyBhIGhlbHBmdWwgQVBJIGZvciBwYWdpbmF0aW5nIG92ZXIgRmF1bmFEQiByZXNwb25zZXMuXG4gKiBAcGFyYW0gZXhwcmVzc2lvbiB7RXhwcn1cbiAqICAgVGhlIFF1ZXJ5IGV4cHJlc3Npb24gdG8gcGFnaW5hdGUgb3Zlci5cbiAqIEBwYXJhbSBwYXJhbXMge09iamVjdH1cbiAqICAgT3B0aW9ucyB0byBiZSBwYXNzZWQgdG8gdGhlIHBhZ2luYXRlIGZ1bmN0aW9uLiBTZWUgW3BhZ2luYXRlXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjcmVhZC1mdW5jdGlvbnMpLlxuICogQHBhcmFtIG9wdGlvbnMgez9PYmplY3R9XG4gKiAgIE9iamVjdCB0aGF0IGNvbmZpZ3VyZXMgdGhlIGN1cnJlbnQgcGFnaW5hdGlvbiBxdWVyaWVzLCBvdmVycmlkaW5nIEZhdW5hREIgY2xpZW50IG9wdGlvbnMuXG4gKiBAcGFyYW0gez9zdHJpbmd9IG9wdGlvbnMuc2VjcmV0IEZhdW5hREIgc2VjcmV0IChzZWUgW1JlZmVyZW5jZSBEb2N1bWVudGF0aW9uXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9pbnRyby9zZWN1cml0eSkpXG4gKiBAcmV0dXJucyB7UGFnZUhlbHBlcn0gQSBQYWdlSGVscGVyIHRoYXQgd3JhcHMgdGhlIHByb3ZpZGVkIGV4cHJlc3Npb24uXG4gKi9cbkNsaWVudC5wcm90b3R5cGUucGFnaW5hdGUgPSBmdW5jdGlvbihleHByZXNzaW9uLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgcGFyYW1zID0gdXRpbC5kZWZhdWx0cyhwYXJhbXMsIHt9KVxuICBvcHRpb25zID0gdXRpbC5kZWZhdWx0cyhvcHRpb25zLCB7fSlcblxuICByZXR1cm4gbmV3IFBhZ2VIZWxwZXIodGhpcywgZXhwcmVzc2lvbiwgcGFyYW1zLCBvcHRpb25zKVxufVxuXG4vKipcbiAqIFNlbmRzIGEgYHBpbmdgIHJlcXVlc3QgdG8gRmF1bmFEQi5cbiAqIEByZXR1cm4ge2V4dGVybmFsOlByb21pc2U8c3RyaW5nPn0gUGluZyByZXNwb25zZS5cbiAqL1xuQ2xpZW50LnByb3RvdHlwZS5waW5nID0gZnVuY3Rpb24oc2NvcGUsIHRpbWVvdXQpIHtcbiAgcmV0dXJuIHRoaXMuX2V4ZWN1dGUoJ0dFVCcsICdwaW5nJywgbnVsbCwgeyBzY29wZTogc2NvcGUsIHRpbWVvdXQ6IHRpbWVvdXQgfSlcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZyZXNoZXN0IHRpbWVzdGFtcCByZXBvcnRlZCB0byB0aGlzIGNsaWVudC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBsYXN0IHNlZW4gdHJhbnNhY3Rpb24gdGltZVxuICovXG5DbGllbnQucHJvdG90eXBlLmdldExhc3RUeG5UaW1lID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLl9odHRwLmdldExhc3RUeG5UaW1lKClcbn1cblxuLyoqXG4gKiBTeW5jIHRoZSBmcmVzaGVzdCB0aW1lc3RhbXAgc2VlbiBieSB0aGlzIGNsaWVudC5cbiAqXG4gKiBUaGlzIGhhcyBubyBlZmZlY3QgaWYgc3RhbGVyIHRoYW4gY3VycmVudGx5IHN0b3JlZCB0aW1lc3RhbXAuXG4gKiBXQVJOSU5HOiBUaGlzIHNob3VsZCBiZSB1c2VkIG9ubHkgd2hlbiBjb29yZGluYXRpbmcgdGltZXN0YW1wcyBhY3Jvc3NcbiAqICAgICAgICAgIG11bHRpcGxlIGNsaWVudHMuIE1vdmluZyB0aGUgdGltZXN0YW1wIGFyYml0cmFyaWx5IGZvcndhcmQgaW50b1xuICogICAgICAgICAgdGhlIGZ1dHVyZSB3aWxsIGNhdXNlIHRyYW5zYWN0aW9ucyB0byBzdGFsbC5cbiAqIEBwYXJhbSB0aW1lIHtudW1iZXJ9IHRoZSBsYXN0IHNlZW4gdHJhbnNhY3Rpb24gdGltZVxuICovXG5DbGllbnQucHJvdG90eXBlLnN5bmNMYXN0VHhuVGltZSA9IGZ1bmN0aW9uKHRpbWUpIHtcbiAgdGhpcy5faHR0cC5zeW5jTGFzdFR4blRpbWUodGltZSlcbn1cblxuLyoqXG4gKiBDbG9zZXMgdGhlIGNsaWVudCBzZXNzaW9uIGFuZCBjbGVhbnMgdXAgYW55IGhlbGQgcmVzb3VyY2VzLlxuICogQnkgZGVmYXVsdCwgaXQgd2lsbCB3YWl0IGZvciBhbnkgb25nb2luZyByZXF1ZXN0cyB0byBjb21wbGV0ZSBvbiB0aGVpciBvd247XG4gKiBzdHJlYW1pbmcgcmVxdWVzdHMgYXJlIHRlcm1pbmF0ZWQgZm9yY2libHkuIEFueSBzdWJzZXF1ZW50IHJlcXVlc3RzIHdpbGxcbiAqIGVycm9yIGFmdGVyIHRoZSAuY2xvc2UgbWV0aG9kIGlzIGNhbGxlZC5cbiAqIFNob3VsZCBiZSB1c2VkIGF0IGFwcGxpY2F0aW9uIHRlcm1pbmF0aW9uIGluIG9yZGVyIHRvIHJlbGVhc2UgYW55IG9wZW4gcmVzb3VyY2VzXG4gKiBhbmQgYWxsb3cgdGhlIHByb2Nlc3MgdG8gdGVybWluYXRlIGUuZy4gd2hlbiB0aGUgY3VzdG9tIGh0dHAyU2Vzc2lvbklkbGVUaW1lIHBhcmFtZXRlciBpcyB1c2VkLlxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gb3B0cyBDbG9zZSBvcHRpb25zLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gb3B0cy5mb3JjZSBTcGVjaWZ5aW5nIHRoaXMgcHJvcGVydHkgd2lsbCBmb3JjZSBhbnkgb25nb2luZ1xuICogcmVxdWVzdHMgdG8gdGVybWluYXRlIGluc3RlYWQgb2YgZ3JhY2VmdWxseSB3YWl0aW5nIHVudGlsIHRoZXkgY29tcGxldGUuXG4gKiBUaGlzIG1heSByZXN1bHQgaW4gYW4gRVJSX0hUVFAyX1NUUkVBTV9DQU5DRUwgZXJyb3IgZm9yIE5vZGVKUy5cbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICovXG5DbGllbnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24ob3B0cykge1xuICByZXR1cm4gdGhpcy5faHR0cC5jbG9zZShvcHRzKVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGEgcXVlcnkgdmlhIHRoZSBGYXVuYURCIFF1ZXJ5IEFQSS5cbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSksXG4gKiBhbmQgdGhlIHF1ZXJ5IGZ1bmN0aW9ucyBpbiB0aGlzIGRvY3VtZW50YXRpb24uXG4gKiBAcGFyYW0gZXhwcmVzc2lvbiB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9XG4gKiAgIFRoZSBxdWVyeSB0byBleGVjdXRlLiBDcmVhdGVkIGZyb20ge0BsaW5rIG1vZHVsZTpxdWVyeX0gZnVuY3Rpb25zLlxuICogQHBhcmFtIHs/T2JqZWN0fSBvcHRpb25zXG4gKiAgIE9iamVjdCB0aGF0IGNvbmZpZ3VyZXMgdGhlIGN1cnJlbnQgcXVlcnksIG92ZXJyaWRpbmcgRmF1bmFEQiBjbGllbnQgb3B0aW9ucy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gb3B0aW9ucy5zZWNyZXQgRmF1bmFEQiBzZWNyZXQgKHNlZSBbUmVmZXJlbmNlIERvY3VtZW50YXRpb25dKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL2ludHJvL3NlY3VyaXR5KSlcbiAqIEByZXR1cm4ge2V4dGVybmFsOlByb21pc2U8T2JqZWN0Pn0ge3ZhbHVlLCBtZXRyaWNzfSBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgRmF1bmFEQiByZXNwb25zZSBvYmplY3QgYW5kIHRoZSBsaXN0IG9mIHF1ZXJ5IG1ldHJpY3MgaW5jdXJyZWQgYnkgdGhlIHJlcXVlc3QuXG4gKi9cbkNsaWVudC5wcm90b3R5cGUucXVlcnlXaXRoTWV0cmljcyA9IGZ1bmN0aW9uKGV4cHJlc3Npb24sIG9wdGlvbnMpIHtcbiAgcXVlcnkuYXJpdHkuYmV0d2VlbigxLCAyLCBhcmd1bWVudHMsICdDbGllbnQucHJvdG90eXBlLnF1ZXJ5JylcbiAgcmV0dXJuIHRoaXMuX2V4ZWN1dGUoJ1BPU1QnLCAnJywgcXVlcnkud3JhcChleHByZXNzaW9uKSwgbnVsbCwgb3B0aW9ucywgdHJ1ZSlcbn1cblxuQ2xpZW50LnByb3RvdHlwZS5fZXhlY3V0ZSA9IGZ1bmN0aW9uKFxuICBtZXRob2QsXG4gIHBhdGgsXG4gIGRhdGEsXG4gIHF1ZXJ5LFxuICBvcHRpb25zLFxuICByZXR1cm5NZXRyaWNzID0gZmFsc2Vcbikge1xuICBxdWVyeSA9IHV0aWwuZGVmYXVsdHMocXVlcnksIG51bGwpXG5cbiAgaWYgKFxuICAgIHBhdGggaW5zdGFuY2VvZiB2YWx1ZXMuUmVmIHx8XG4gICAgdXRpbC5jaGVja0luc3RhbmNlSGFzUHJvcGVydHkocGF0aCwgJ19pc0ZhdW5hUmVmJylcbiAgKSB7XG4gICAgcGF0aCA9IHBhdGgudmFsdWVcbiAgfVxuXG4gIGlmIChxdWVyeSAhPT0gbnVsbCkge1xuICAgIHF1ZXJ5ID0gdXRpbC5yZW1vdmVVbmRlZmluZWRWYWx1ZXMocXVlcnkpXG4gIH1cblxuICB2YXIgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICB2YXIgc2VsZiA9IHRoaXNcbiAgdmFyIGJvZHkgPVxuICAgIFsnR0VUJywgJ0hFQUQnXS5pbmRleE9mKG1ldGhvZCkgPj0gMCA/IHVuZGVmaW5lZCA6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG5cbiAgcmV0dXJuIHRoaXMuX2h0dHBcbiAgICAuZXhlY3V0ZShcbiAgICAgIE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMsIHtcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgYm9keTogYm9keSxcbiAgICAgIH0pXG4gICAgKVxuICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICB2YXIgZW5kVGltZSA9IERhdGUubm93KClcbiAgICAgIHZhciByZXNwb25zZU9iamVjdCA9IGpzb24ucGFyc2VKU09OKHJlc3BvbnNlLmJvZHkpXG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IFJlcXVlc3RSZXN1bHQoXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgcGF0aCxcbiAgICAgICAgcXVlcnksXG4gICAgICAgIGJvZHksXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHJlc3BvbnNlLmJvZHksXG4gICAgICAgIHJlc3BvbnNlT2JqZWN0LFxuICAgICAgICByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgIHN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZVxuICAgICAgKVxuICAgICAgc2VsZi5faGFuZGxlUmVxdWVzdFJlc3VsdChyZXNwb25zZSwgcmVzdWx0LCBvcHRpb25zKVxuXG4gICAgICBjb25zdCBtZXRyaWNzSGVhZGVycyA9IFtcbiAgICAgICAgJ3gtY29tcHV0ZS1vcHMnLFxuICAgICAgICAneC1ieXRlLXJlYWQtb3BzJyxcbiAgICAgICAgJ3gtYnl0ZS13cml0ZS1vcHMnLFxuICAgICAgICAneC1xdWVyeS10aW1lJyxcbiAgICAgICAgJ3gtdHhuLXJldHJpZXMnLFxuICAgICAgXVxuXG4gICAgICBpZiAocmV0dXJuTWV0cmljcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiByZXNwb25zZU9iamVjdFsncmVzb3VyY2UnXSxcbiAgICAgICAgICBtZXRyaWNzOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICBBcnJheS5mcm9tKE9iamVjdC5lbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMpKVxuICAgICAgICAgICAgICAuZmlsdGVyKChbaywgdl0pID0+IG1ldHJpY3NIZWFkZXJzLmluY2x1ZGVzKGspKVxuICAgICAgICAgICAgICAubWFwKChbaywgdl0pID0+IFtrLCBwYXJzZUludCh2KV0pXG4gICAgICAgICAgKSxcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlT2JqZWN0WydyZXNvdXJjZSddXG4gICAgICB9XG4gICAgfSlcbn1cblxuQ2xpZW50LnByb3RvdHlwZS5faGFuZGxlUmVxdWVzdFJlc3VsdCA9IGZ1bmN0aW9uKHJlc3BvbnNlLCByZXN1bHQsIG9wdGlvbnMpIHtcbiAgdmFyIHR4blRpbWVIZWFkZXJLZXkgPSAneC10eG4tdGltZSdcblxuICBpZiAocmVzcG9uc2UuaGVhZGVyc1t0eG5UaW1lSGVhZGVyS2V5XSAhPSBudWxsKSB7XG4gICAgdGhpcy5zeW5jTGFzdFR4blRpbWUocGFyc2VJbnQocmVzcG9uc2UuaGVhZGVyc1t0eG5UaW1lSGVhZGVyS2V5XSwgMTApKVxuICB9XG5cbiAgdmFyIG9ic2VydmVycyA9IFt0aGlzLl9vYnNlcnZlciwgb3B0aW9ucyAmJiBvcHRpb25zLm9ic2VydmVyXVxuXG4gIG9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IHtcbiAgICBpZiAodHlwZW9mIG9ic2VydmVyID09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9ic2VydmVyKHJlc3VsdCwgdGhpcylcbiAgICB9XG4gIH0pXG5cbiAgZXJyb3JzLkZhdW5hSFRUUEVycm9yLnJhaXNlRm9yU3RhdHVzQ29kZShyZXN1bHQpXG59XG5cbmZ1bmN0aW9uIGdldEh0dHAyU2Vzc2lvbklkbGVUaW1lKGNvbmZpZ3VyZWRJZGxlVGltZSkge1xuICBjb25zdCBtYXhJZGxlVGltZSA9IDUwMDBcbiAgY29uc3QgZGVmYXVsdElkbGVUaW1lID0gNTAwXG4gIGNvbnN0IGVudklkbGVUaW1lID0gdXRpbC5nZXRFbnZWYXJpYWJsZSgnRkFVTkFEQl9IVFRQMl9TRVNTSU9OX0lETEVfVElNRScpXG5cbiAgdmFyIHZhbHVlID0gZGVmYXVsdElkbGVUaW1lXG4gIC8vIGF0dGVtcCB0byBzZXQgdGhlIGlkbGUgdGltZSB0byB0aGUgZW52IHZhbHVlIGFuZCB0aGVuIHRoZSBjb25maWd1cmVkIHZhbHVlXG4gIGNvbnN0IHZhbHVlcyA9IFtlbnZJZGxlVGltZSwgY29uZmlndXJlZElkbGVUaW1lXVxuICBmb3IgKGNvbnN0IHJhd1ZhbHVlIG9mIHZhbHVlcykge1xuICAgIGNvbnN0IHBhcnNlZFZhbHVlID1cbiAgICAgIHJhd1ZhbHVlID09PSAnSW5maW5pdHknID8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgOiBwYXJzZUludChyYXdWYWx1ZSwgMTApXG4gICAgY29uc3QgaXNOZWdhdGl2ZSA9IHBhcnNlZFZhbHVlIDwgMFxuICAgIGNvbnN0IGlzR3JlYXRlclRoYW5NYXggPSBwYXJzZWRWYWx1ZSA+IG1heElkbGVUaW1lXG4gICAgLy8gaWYgd2UgZGlkbid0IGdldCBpbmZpbml0eSBvciBhIHBvc2l0aXZlIGludGVnZXIgbW92ZSB0byB0aGUgbmV4dCB2YWx1ZVxuICAgIGlmIChpc05lZ2F0aXZlIHx8ICFwYXJzZWRWYWx1ZSkgY29udGludWVcbiAgICAvLyBpZiB3ZSBkaWQgZ2V0IHNvbWV0aGluZyB2YWxpZCBjb25zdHJhaW4gaXQgdG8gdGhlIGNlaWxpbmdcbiAgICB2YWx1ZSA9IHBhcnNlZFZhbHVlXG4gICAgaWYgKGlzR3JlYXRlclRoYW5NYXgpIHZhbHVlID0gbWF4SWRsZVRpbWVcbiAgICBicmVha1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ2xpZW50XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/Client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/Expr.js":
/*!******************************************!*\
  !*** ./node_modules/faunadb/src/Expr.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar util = __webpack_require__(/*! ./_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\n\n/**\n * A representation of a FaunaDB Query Expression. Generally, you shouldn't need\n * to use this class directly; use the Query helpers defined in {@link module:query}.\n *\n * @param {Object} obj The object that represents a Query to be treated as an Expression.\n * @constructor\n */\nfunction Expr(obj) {\n  this.raw = obj\n}\n\nExpr.prototype._isFaunaExpr = true\n\nExpr.prototype.toJSON = function() {\n  return this.raw\n}\n\nExpr.prototype.toFQL = function() {\n  return exprToString(this.raw)\n}\n\nvar varArgsFunctions = [\n  'Do',\n  'Call',\n  'Union',\n  'Intersection',\n  'Difference',\n  'Equals',\n  'Add',\n  'BitAnd',\n  'BitOr',\n  'BitXor',\n  'Divide',\n  'Max',\n  'Min',\n  'Modulo',\n  'Multiply',\n  'Subtract',\n  'LT',\n  'LTE',\n  'GT',\n  'GTE',\n  'And',\n  'Or',\n]\n\n// FQL function names come across the wire as all lowercase letters\n// (like the key of this object). Not all are properly snake-cased\n// on the Core side, which causes improper capitalizations.\n//\n// JS Driver patch: https://faunadb.atlassian.net/browse/FE-540\n// Core update: https://faunadb.atlassian.net/browse/ENG-2110\n\nvar specialCases = {\n  containsstrregex: 'ContainsStrRegex',\n  containsstr: 'ContainsStr',\n  endswith: 'EndsWith',\n  findstr: 'FindStr',\n  findstrregex: 'FindStrRegex',\n  gt: 'GT',\n  gte: 'GTE',\n  is_nonempty: 'is_non_empty',\n  lowercase: 'LowerCase',\n  lt: 'LT',\n  lte: 'LTE',\n  ltrim: 'LTrim',\n  ngram: 'NGram',\n  rtrim: 'RTrim',\n  regexescape: 'RegexEscape',\n  replacestr: 'ReplaceStr',\n  replacestrregex: 'ReplaceStrRegex',\n  startswith: 'StartsWith',\n  substring: 'SubString',\n  titlecase: 'TitleCase',\n  uppercase: 'UpperCase',\n}\n\n/**\n *\n * @param {Expr} expression A FQL expression\n * @returns {Boolean} Returns true for valid expressions\n * @private\n */\nfunction isExpr(expression) {\n  return (\n    expression instanceof Expr ||\n    util.checkInstanceHasProperty(expression, '_isFaunaExpr')\n  )\n}\n\n/**\n *\n * @param {Object} obj An object to print\n * @returns {String} String representation of object\n * @private\n */\nfunction printObject(obj) {\n  return (\n    '{' +\n    Object.keys(obj)\n      .map(function(k) {\n        return '\"' + k + '\"' + ': ' + exprToString(obj[k])\n      })\n      .join(', ') +\n    '}'\n  )\n}\n\n/**\n *\n * @param {Array} arr An array to print\n * @param {Function} toStr Function used for stringification\n * @returns {String} String representation of array\n * @private\n */\nfunction printArray(arr, toStr) {\n  return arr\n    .map(function(item) {\n      return toStr(item)\n    })\n    .join(', ')\n}\n\n/**\n *\n * @param {String} fn A snake-case FQL function name\n * @returns {String} The correpsonding camel-cased FQL function name\n * @private\n */\nfunction convertToCamelCase(fn) {\n  // For FQL functions with special formatting concerns, we\n  // use the specialCases object above to define their casing.\n  if (fn in specialCases) fn = specialCases[fn]\n\n  return fn\n    .split('_')\n    .map(function(str) {\n      return str.charAt(0).toUpperCase() + str.slice(1)\n    })\n    .join('')\n}\n\nvar exprToString = function(expr, caller) {\n  // If expr is a Expr, we want to parse expr.raw instead\n  if (isExpr(expr)) {\n    if ('value' in expr) return expr.toString()\n    expr = expr.raw\n  }\n\n  // Return early to avoid extra work if null\n  if (expr === null) {\n    return 'null'\n  }\n\n  // Return stringified value if expression is not an Object or Array\n  switch (typeof expr) {\n    case 'string':\n      return JSON.stringify(expr)\n    case 'symbol':\n    case 'number':\n    case 'boolean':\n      return expr.toString()\n    case 'undefined':\n      return 'undefined'\n  }\n\n  // Handle expression Arrays\n  if (Array.isArray(expr)) {\n    var array = printArray(expr, exprToString)\n    return varArgsFunctions.indexOf(caller) != -1 ? array : '[' + array + ']'\n  }\n\n  // Parse expression Objects\n  if ('match' in expr) {\n    var matchStr = exprToString(expr['match'])\n    var terms = expr['terms'] || []\n\n    if (isExpr(terms)) terms = terms.raw\n\n    if (Array.isArray(terms) && terms.length == 0)\n      return 'Match(' + matchStr + ')'\n\n    if (Array.isArray(terms)) {\n      return (\n        'Match(' + matchStr + ', [' + printArray(terms, exprToString) + '])'\n      )\n    }\n\n    return 'Match(' + matchStr + ', ' + exprToString(terms) + ')'\n  }\n\n  if ('paginate' in expr) {\n    var exprKeys = Object.keys(expr)\n    if (exprKeys.length === 1) {\n      return 'Paginate(' + exprToString(expr['paginate']) + ')'\n    }\n\n    var expr2 = Object.assign({}, expr)\n    delete expr2['paginate']\n\n    return (\n      'Paginate(' +\n      exprToString(expr['paginate']) +\n      ', ' +\n      printObject(expr2) +\n      ')'\n    )\n  }\n\n  if ('let' in expr && 'in' in expr) {\n    var letExpr = ''\n\n    if (Array.isArray(expr['let']))\n      letExpr = '[' + printArray(expr['let'], printObject) + ']'\n    else letExpr = printObject(expr['let'])\n\n    return 'Let(' + letExpr + ', ' + exprToString(expr['in']) + ')'\n  }\n\n  if ('object' in expr) return printObject(expr['object'])\n\n  if ('merge' in expr) {\n    if (expr.lambda) {\n      return (\n        'Merge(' +\n        exprToString(expr.merge) +\n        ', ' +\n        exprToString(expr.with) +\n        ', ' +\n        exprToString(expr.lambda) +\n        ')'\n      )\n    }\n\n    return (\n      'Merge(' + exprToString(expr.merge) + ', ' + exprToString(expr.with) + ')'\n    )\n  }\n\n  if ('lambda' in expr) {\n    return (\n      'Lambda(' +\n      exprToString(expr['lambda']) +\n      ', ' +\n      exprToString(expr['expr']) +\n      ')'\n    )\n  }\n\n  if ('filter' in expr) {\n    return (\n      'Filter(' +\n      exprToString(expr['collection']) +\n      ', ' +\n      exprToString(expr['filter']) +\n      ')'\n    )\n  }\n\n  if ('call' in expr) {\n    return (\n      'Call(' +\n      exprToString(expr['call']) +\n      ', ' +\n      exprToString(expr['arguments']) +\n      ')'\n    )\n  }\n\n  if ('map' in expr) {\n    return (\n      'Map(' +\n      exprToString(expr['collection']) +\n      ', ' +\n      exprToString(expr['map']) +\n      ')'\n    )\n  }\n\n  if ('foreach' in expr) {\n    return (\n      'Foreach(' +\n      exprToString(expr['collection']) +\n      ', ' +\n      exprToString(expr['foreach']) +\n      ')'\n    )\n  }\n\n  var keys = Object.keys(expr)\n  var fn = keys[0]\n  fn = convertToCamelCase(fn)\n\n  // The filter prevents zero arity functions from having a null argument\n  // This only works under the assumptions\n  // that there are no functions where a single 'null' argument makes sense.\n  var args = keys\n    .filter(k => expr[k] !== null || keys.length > 1)\n    .map(k => exprToString(expr[k], fn))\n    .join(', ')\n\n  return fn + '(' + args + ')'\n}\n\nExpr.toString = exprToString\n\nmodule.exports = Expr\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvRXhwci5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixXQUFXLG1CQUFPLENBQUMsMERBQVM7O0FBRTVCO0FBQ0E7QUFDQSwrQkFBK0Isa0NBQWtDLG1CQUFtQjtBQUNwRjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE1BQU07QUFDakIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFVBQVU7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQ0FBZ0M7QUFDaEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2tib29rc2hvcG5nLy4vbm9kZV9tb2R1bGVzL2ZhdW5hZGIvc3JjL0V4cHIuanM/N2UxMCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxudmFyIHV0aWwgPSByZXF1aXJlKCcuL191dGlsJylcblxuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIGEgRmF1bmFEQiBRdWVyeSBFeHByZXNzaW9uLiBHZW5lcmFsbHksIHlvdSBzaG91bGRuJ3QgbmVlZFxuICogdG8gdXNlIHRoaXMgY2xhc3MgZGlyZWN0bHk7IHVzZSB0aGUgUXVlcnkgaGVscGVycyBkZWZpbmVkIGluIHtAbGluayBtb2R1bGU6cXVlcnl9LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYSBRdWVyeSB0byBiZSB0cmVhdGVkIGFzIGFuIEV4cHJlc3Npb24uXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRXhwcihvYmopIHtcbiAgdGhpcy5yYXcgPSBvYmpcbn1cblxuRXhwci5wcm90b3R5cGUuX2lzRmF1bmFFeHByID0gdHJ1ZVxuXG5FeHByLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMucmF3XG59XG5cbkV4cHIucHJvdG90eXBlLnRvRlFMID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBleHByVG9TdHJpbmcodGhpcy5yYXcpXG59XG5cbnZhciB2YXJBcmdzRnVuY3Rpb25zID0gW1xuICAnRG8nLFxuICAnQ2FsbCcsXG4gICdVbmlvbicsXG4gICdJbnRlcnNlY3Rpb24nLFxuICAnRGlmZmVyZW5jZScsXG4gICdFcXVhbHMnLFxuICAnQWRkJyxcbiAgJ0JpdEFuZCcsXG4gICdCaXRPcicsXG4gICdCaXRYb3InLFxuICAnRGl2aWRlJyxcbiAgJ01heCcsXG4gICdNaW4nLFxuICAnTW9kdWxvJyxcbiAgJ011bHRpcGx5JyxcbiAgJ1N1YnRyYWN0JyxcbiAgJ0xUJyxcbiAgJ0xURScsXG4gICdHVCcsXG4gICdHVEUnLFxuICAnQW5kJyxcbiAgJ09yJyxcbl1cblxuLy8gRlFMIGZ1bmN0aW9uIG5hbWVzIGNvbWUgYWNyb3NzIHRoZSB3aXJlIGFzIGFsbCBsb3dlcmNhc2UgbGV0dGVyc1xuLy8gKGxpa2UgdGhlIGtleSBvZiB0aGlzIG9iamVjdCkuIE5vdCBhbGwgYXJlIHByb3Blcmx5IHNuYWtlLWNhc2VkXG4vLyBvbiB0aGUgQ29yZSBzaWRlLCB3aGljaCBjYXVzZXMgaW1wcm9wZXIgY2FwaXRhbGl6YXRpb25zLlxuLy9cbi8vIEpTIERyaXZlciBwYXRjaDogaHR0cHM6Ly9mYXVuYWRiLmF0bGFzc2lhbi5uZXQvYnJvd3NlL0ZFLTU0MFxuLy8gQ29yZSB1cGRhdGU6IGh0dHBzOi8vZmF1bmFkYi5hdGxhc3NpYW4ubmV0L2Jyb3dzZS9FTkctMjExMFxuXG52YXIgc3BlY2lhbENhc2VzID0ge1xuICBjb250YWluc3N0cnJlZ2V4OiAnQ29udGFpbnNTdHJSZWdleCcsXG4gIGNvbnRhaW5zc3RyOiAnQ29udGFpbnNTdHInLFxuICBlbmRzd2l0aDogJ0VuZHNXaXRoJyxcbiAgZmluZHN0cjogJ0ZpbmRTdHInLFxuICBmaW5kc3RycmVnZXg6ICdGaW5kU3RyUmVnZXgnLFxuICBndDogJ0dUJyxcbiAgZ3RlOiAnR1RFJyxcbiAgaXNfbm9uZW1wdHk6ICdpc19ub25fZW1wdHknLFxuICBsb3dlcmNhc2U6ICdMb3dlckNhc2UnLFxuICBsdDogJ0xUJyxcbiAgbHRlOiAnTFRFJyxcbiAgbHRyaW06ICdMVHJpbScsXG4gIG5ncmFtOiAnTkdyYW0nLFxuICBydHJpbTogJ1JUcmltJyxcbiAgcmVnZXhlc2NhcGU6ICdSZWdleEVzY2FwZScsXG4gIHJlcGxhY2VzdHI6ICdSZXBsYWNlU3RyJyxcbiAgcmVwbGFjZXN0cnJlZ2V4OiAnUmVwbGFjZVN0clJlZ2V4JyxcbiAgc3RhcnRzd2l0aDogJ1N0YXJ0c1dpdGgnLFxuICBzdWJzdHJpbmc6ICdTdWJTdHJpbmcnLFxuICB0aXRsZWNhc2U6ICdUaXRsZUNhc2UnLFxuICB1cHBlcmNhc2U6ICdVcHBlckNhc2UnLFxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0V4cHJ9IGV4cHJlc3Npb24gQSBGUUwgZXhwcmVzc2lvblxuICogQHJldHVybnMge0Jvb2xlYW59IFJldHVybnMgdHJ1ZSBmb3IgdmFsaWQgZXhwcmVzc2lvbnNcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzRXhwcihleHByZXNzaW9uKSB7XG4gIHJldHVybiAoXG4gICAgZXhwcmVzc2lvbiBpbnN0YW5jZW9mIEV4cHIgfHxcbiAgICB1dGlsLmNoZWNrSW5zdGFuY2VIYXNQcm9wZXJ0eShleHByZXNzaW9uLCAnX2lzRmF1bmFFeHByJylcbiAgKVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIEFuIG9iamVjdCB0byBwcmludFxuICogQHJldHVybnMge1N0cmluZ30gU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIG9iamVjdFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcHJpbnRPYmplY3Qob2JqKSB7XG4gIHJldHVybiAoXG4gICAgJ3snICtcbiAgICBPYmplY3Qua2V5cyhvYmopXG4gICAgICAubWFwKGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuICdcIicgKyBrICsgJ1wiJyArICc6ICcgKyBleHByVG9TdHJpbmcob2JqW2tdKVxuICAgICAgfSlcbiAgICAgIC5qb2luKCcsICcpICtcbiAgICAnfSdcbiAgKVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnIgQW4gYXJyYXkgdG8gcHJpbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRvU3RyIEZ1bmN0aW9uIHVzZWQgZm9yIHN0cmluZ2lmaWNhdGlvblxuICogQHJldHVybnMge1N0cmluZ30gU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFycmF5XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwcmludEFycmF5KGFyciwgdG9TdHIpIHtcbiAgcmV0dXJuIGFyclxuICAgIC5tYXAoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgcmV0dXJuIHRvU3RyKGl0ZW0pXG4gICAgfSlcbiAgICAuam9pbignLCAnKVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZm4gQSBzbmFrZS1jYXNlIEZRTCBmdW5jdGlvbiBuYW1lXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgY29ycmVwc29uZGluZyBjYW1lbC1jYXNlZCBGUUwgZnVuY3Rpb24gbmFtZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29udmVydFRvQ2FtZWxDYXNlKGZuKSB7XG4gIC8vIEZvciBGUUwgZnVuY3Rpb25zIHdpdGggc3BlY2lhbCBmb3JtYXR0aW5nIGNvbmNlcm5zLCB3ZVxuICAvLyB1c2UgdGhlIHNwZWNpYWxDYXNlcyBvYmplY3QgYWJvdmUgdG8gZGVmaW5lIHRoZWlyIGNhc2luZy5cbiAgaWYgKGZuIGluIHNwZWNpYWxDYXNlcykgZm4gPSBzcGVjaWFsQ2FzZXNbZm5dXG5cbiAgcmV0dXJuIGZuXG4gICAgLnNwbGl0KCdfJylcbiAgICAubWFwKGZ1bmN0aW9uKHN0cikge1xuICAgICAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKVxuICAgIH0pXG4gICAgLmpvaW4oJycpXG59XG5cbnZhciBleHByVG9TdHJpbmcgPSBmdW5jdGlvbihleHByLCBjYWxsZXIpIHtcbiAgLy8gSWYgZXhwciBpcyBhIEV4cHIsIHdlIHdhbnQgdG8gcGFyc2UgZXhwci5yYXcgaW5zdGVhZFxuICBpZiAoaXNFeHByKGV4cHIpKSB7XG4gICAgaWYgKCd2YWx1ZScgaW4gZXhwcikgcmV0dXJuIGV4cHIudG9TdHJpbmcoKVxuICAgIGV4cHIgPSBleHByLnJhd1xuICB9XG5cbiAgLy8gUmV0dXJuIGVhcmx5IHRvIGF2b2lkIGV4dHJhIHdvcmsgaWYgbnVsbFxuICBpZiAoZXhwciA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnbnVsbCdcbiAgfVxuXG4gIC8vIFJldHVybiBzdHJpbmdpZmllZCB2YWx1ZSBpZiBleHByZXNzaW9uIGlzIG5vdCBhbiBPYmplY3Qgb3IgQXJyYXlcbiAgc3dpdGNoICh0eXBlb2YgZXhwcikge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXhwcilcbiAgICBjYXNlICdzeW1ib2wnOlxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gZXhwci50b1N0cmluZygpXG4gICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgIHJldHVybiAndW5kZWZpbmVkJ1xuICB9XG5cbiAgLy8gSGFuZGxlIGV4cHJlc3Npb24gQXJyYXlzXG4gIGlmIChBcnJheS5pc0FycmF5KGV4cHIpKSB7XG4gICAgdmFyIGFycmF5ID0gcHJpbnRBcnJheShleHByLCBleHByVG9TdHJpbmcpXG4gICAgcmV0dXJuIHZhckFyZ3NGdW5jdGlvbnMuaW5kZXhPZihjYWxsZXIpICE9IC0xID8gYXJyYXkgOiAnWycgKyBhcnJheSArICddJ1xuICB9XG5cbiAgLy8gUGFyc2UgZXhwcmVzc2lvbiBPYmplY3RzXG4gIGlmICgnbWF0Y2gnIGluIGV4cHIpIHtcbiAgICB2YXIgbWF0Y2hTdHIgPSBleHByVG9TdHJpbmcoZXhwclsnbWF0Y2gnXSlcbiAgICB2YXIgdGVybXMgPSBleHByWyd0ZXJtcyddIHx8IFtdXG5cbiAgICBpZiAoaXNFeHByKHRlcm1zKSkgdGVybXMgPSB0ZXJtcy5yYXdcblxuICAgIGlmIChBcnJheS5pc0FycmF5KHRlcm1zKSAmJiB0ZXJtcy5sZW5ndGggPT0gMClcbiAgICAgIHJldHVybiAnTWF0Y2goJyArIG1hdGNoU3RyICsgJyknXG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0ZXJtcykpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICdNYXRjaCgnICsgbWF0Y2hTdHIgKyAnLCBbJyArIHByaW50QXJyYXkodGVybXMsIGV4cHJUb1N0cmluZykgKyAnXSknXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuICdNYXRjaCgnICsgbWF0Y2hTdHIgKyAnLCAnICsgZXhwclRvU3RyaW5nKHRlcm1zKSArICcpJ1xuICB9XG5cbiAgaWYgKCdwYWdpbmF0ZScgaW4gZXhwcikge1xuICAgIHZhciBleHByS2V5cyA9IE9iamVjdC5rZXlzKGV4cHIpXG4gICAgaWYgKGV4cHJLZXlzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuICdQYWdpbmF0ZSgnICsgZXhwclRvU3RyaW5nKGV4cHJbJ3BhZ2luYXRlJ10pICsgJyknXG4gICAgfVxuXG4gICAgdmFyIGV4cHIyID0gT2JqZWN0LmFzc2lnbih7fSwgZXhwcilcbiAgICBkZWxldGUgZXhwcjJbJ3BhZ2luYXRlJ11cblxuICAgIHJldHVybiAoXG4gICAgICAnUGFnaW5hdGUoJyArXG4gICAgICBleHByVG9TdHJpbmcoZXhwclsncGFnaW5hdGUnXSkgK1xuICAgICAgJywgJyArXG4gICAgICBwcmludE9iamVjdChleHByMikgK1xuICAgICAgJyknXG4gICAgKVxuICB9XG5cbiAgaWYgKCdsZXQnIGluIGV4cHIgJiYgJ2luJyBpbiBleHByKSB7XG4gICAgdmFyIGxldEV4cHIgPSAnJ1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXhwclsnbGV0J10pKVxuICAgICAgbGV0RXhwciA9ICdbJyArIHByaW50QXJyYXkoZXhwclsnbGV0J10sIHByaW50T2JqZWN0KSArICddJ1xuICAgIGVsc2UgbGV0RXhwciA9IHByaW50T2JqZWN0KGV4cHJbJ2xldCddKVxuXG4gICAgcmV0dXJuICdMZXQoJyArIGxldEV4cHIgKyAnLCAnICsgZXhwclRvU3RyaW5nKGV4cHJbJ2luJ10pICsgJyknXG4gIH1cblxuICBpZiAoJ29iamVjdCcgaW4gZXhwcikgcmV0dXJuIHByaW50T2JqZWN0KGV4cHJbJ29iamVjdCddKVxuXG4gIGlmICgnbWVyZ2UnIGluIGV4cHIpIHtcbiAgICBpZiAoZXhwci5sYW1iZGEpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICdNZXJnZSgnICtcbiAgICAgICAgZXhwclRvU3RyaW5nKGV4cHIubWVyZ2UpICtcbiAgICAgICAgJywgJyArXG4gICAgICAgIGV4cHJUb1N0cmluZyhleHByLndpdGgpICtcbiAgICAgICAgJywgJyArXG4gICAgICAgIGV4cHJUb1N0cmluZyhleHByLmxhbWJkYSkgK1xuICAgICAgICAnKSdcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgJ01lcmdlKCcgKyBleHByVG9TdHJpbmcoZXhwci5tZXJnZSkgKyAnLCAnICsgZXhwclRvU3RyaW5nKGV4cHIud2l0aCkgKyAnKSdcbiAgICApXG4gIH1cblxuICBpZiAoJ2xhbWJkYScgaW4gZXhwcikge1xuICAgIHJldHVybiAoXG4gICAgICAnTGFtYmRhKCcgK1xuICAgICAgZXhwclRvU3RyaW5nKGV4cHJbJ2xhbWJkYSddKSArXG4gICAgICAnLCAnICtcbiAgICAgIGV4cHJUb1N0cmluZyhleHByWydleHByJ10pICtcbiAgICAgICcpJ1xuICAgIClcbiAgfVxuXG4gIGlmICgnZmlsdGVyJyBpbiBleHByKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICdGaWx0ZXIoJyArXG4gICAgICBleHByVG9TdHJpbmcoZXhwclsnY29sbGVjdGlvbiddKSArXG4gICAgICAnLCAnICtcbiAgICAgIGV4cHJUb1N0cmluZyhleHByWydmaWx0ZXInXSkgK1xuICAgICAgJyknXG4gICAgKVxuICB9XG5cbiAgaWYgKCdjYWxsJyBpbiBleHByKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICdDYWxsKCcgK1xuICAgICAgZXhwclRvU3RyaW5nKGV4cHJbJ2NhbGwnXSkgK1xuICAgICAgJywgJyArXG4gICAgICBleHByVG9TdHJpbmcoZXhwclsnYXJndW1lbnRzJ10pICtcbiAgICAgICcpJ1xuICAgIClcbiAgfVxuXG4gIGlmICgnbWFwJyBpbiBleHByKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICdNYXAoJyArXG4gICAgICBleHByVG9TdHJpbmcoZXhwclsnY29sbGVjdGlvbiddKSArXG4gICAgICAnLCAnICtcbiAgICAgIGV4cHJUb1N0cmluZyhleHByWydtYXAnXSkgK1xuICAgICAgJyknXG4gICAgKVxuICB9XG5cbiAgaWYgKCdmb3JlYWNoJyBpbiBleHByKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICdGb3JlYWNoKCcgK1xuICAgICAgZXhwclRvU3RyaW5nKGV4cHJbJ2NvbGxlY3Rpb24nXSkgK1xuICAgICAgJywgJyArXG4gICAgICBleHByVG9TdHJpbmcoZXhwclsnZm9yZWFjaCddKSArXG4gICAgICAnKSdcbiAgICApXG4gIH1cblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGV4cHIpXG4gIHZhciBmbiA9IGtleXNbMF1cbiAgZm4gPSBjb252ZXJ0VG9DYW1lbENhc2UoZm4pXG5cbiAgLy8gVGhlIGZpbHRlciBwcmV2ZW50cyB6ZXJvIGFyaXR5IGZ1bmN0aW9ucyBmcm9tIGhhdmluZyBhIG51bGwgYXJndW1lbnRcbiAgLy8gVGhpcyBvbmx5IHdvcmtzIHVuZGVyIHRoZSBhc3N1bXB0aW9uc1xuICAvLyB0aGF0IHRoZXJlIGFyZSBubyBmdW5jdGlvbnMgd2hlcmUgYSBzaW5nbGUgJ251bGwnIGFyZ3VtZW50IG1ha2VzIHNlbnNlLlxuICB2YXIgYXJncyA9IGtleXNcbiAgICAuZmlsdGVyKGsgPT4gZXhwcltrXSAhPT0gbnVsbCB8fCBrZXlzLmxlbmd0aCA+IDEpXG4gICAgLm1hcChrID0+IGV4cHJUb1N0cmluZyhleHByW2tdLCBmbikpXG4gICAgLmpvaW4oJywgJylcblxuICByZXR1cm4gZm4gKyAnKCcgKyBhcmdzICsgJyknXG59XG5cbkV4cHIudG9TdHJpbmcgPSBleHByVG9TdHJpbmdcblxubW9kdWxlLmV4cG9ydHMgPSBFeHByXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/Expr.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/PageHelper.js":
/*!************************************************!*\
  !*** ./node_modules/faunadb/src/PageHelper.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar query = __webpack_require__(/*! ./query */ \"(ssr)/./node_modules/faunadb/src/query.js\")\nvar objectAssign = __webpack_require__(/*! object-assign */ \"(ssr)/./node_modules/object-assign/index.js\")\n\n/**\n * A FaunaDB Lambda expression to be passed into one of the collection\n * functions: Map or Filter.\n *\n * @callback PageHelper~collectionFunction\n * @param {any} var\n *   The variable passed in by FaunaDB when this Lambda\n *   function is executed.\n * @return {Expr}\n *   The FaunaDB query expression to be returned by this Lambda.\n */\n\n/**\n * @callback PageHelper~eachFunction\n * @param {Object} page\n *   A page returned by FaunaDB's Paginate function.\n */\n\n/**\n * A wrapper that provides a helpful API for consuming FaunaDB pages.\n *\n * Generally this is constructed through the {@link Client#paginate} method.\n *\n * The {@link PageHelper#map} and {@link PageHelper#filter} methods will wrap the underlying query with a Map\n * and Filter query function, respectively. These will be executed on the server when a promise-returning function\n * is called.\n *\n * The {@link PageHelper#each} and {@link PageHelper#eachReverse} functions dispatch queries to FaunaDB, and return Promises\n * representing the completion of those queries. The callbacks provided to these functions are executed locally when the\n * queries return.\n *\n * The {@link PageHelper#nextPage} and {@link PageHelper#previousPage} functions also dispatch queries to FaunaDB,\n * but return their responses in a wrapped Promise.\n *\n * @param {Client} client\n *   The FaunaDB client used to paginate.\n * @param {Object} set\n *   The set to paginate.\n * @param {?Object} params\n *   Parameters to be passed to the FaunaDB Paginate function.\n * @param {?Object} options\n *   Object that configures the current pagination, overriding FaunaDB client options.\n * @param {?string} options.secret FaunaDB secret (see [Reference Documentation](https://app.fauna.com/documentation/intro/security))\n * @constructor\n */\nfunction PageHelper(client, set, params, options) {\n  if (params === undefined) {\n    params = {}\n  }\n\n  if (options === undefined) {\n    options = {}\n  }\n\n  this.reverse = false\n  this.params = {}\n\n  this.before = undefined\n  this.after = undefined\n\n  objectAssign(this.params, params)\n\n  var cursorParams = this.params.cursor || this.params\n\n  if ('before' in cursorParams) {\n    this.before = cursorParams.before\n    delete cursorParams.before\n  } else if ('after' in cursorParams) {\n    this.after = cursorParams.after\n    delete cursorParams.after\n  }\n\n  this.options = {}\n  objectAssign(this.options, options)\n\n  this.client = client\n  this.set = set\n\n  /**\n   * @member {Array.<Function>}\n   * @type {Array.<Function>}\n   * @private\n   */\n  this._faunaFunctions = []\n}\n\n/**\n * Wraps the set to be paginated with a FaunaDB Map function.\n * As this function is executed on the server, the `lambda` param must\n * return a valid query expression.\n *\n * @param {PageHelper~collectionFunction} lambda\n *   The Lambda expression to be passed into the Map function.\n * @return {PageHelper}\n *\n */\nPageHelper.prototype.map = function(lambda) {\n  var rv = this._clone()\n  rv._faunaFunctions.push(function(q) {\n    return query.Map(q, lambda)\n  })\n  return rv\n}\n\n/**\n * Wraps the set to be paginated with a FaunaDB Filter funciton.\n * As this function is executed on the server, the `lambda` param must\n * return a valid query expression.\n *\n * @param {PageHelper~collectionFunction} lambda\n *   The lambda expression to be passed into the Filter function.\n * @return {PageHelper}\n */\nPageHelper.prototype.filter = function(lambda) {\n  var rv = this._clone()\n  rv._faunaFunctions.push(function(q) {\n    return query.Filter(q, lambda)\n  })\n  return rv\n}\n\n/**\n * Executes the provided function for each page.\n *\n * @param {PageHelper~eachFunction} lambda\n *   A function to be executed for each page.\n * @returns {external:Promise.<void>}\n */\nPageHelper.prototype.each = function(lambda) {\n  return this._retrieveNextPage(this.after, false).then(\n    this._consumePages(lambda, false)\n  )\n}\n\n/**\n * Executes the provided function for each page, in the reverse direction.\n * @param {PageHelper~eachFunction} lambda\n * @returns {external:Promise.<void>}\n */\nPageHelper.prototype.eachReverse = function(lambda) {\n  return this._retrieveNextPage(this.before, true).then(\n    this._consumePages(lambda, true)\n  )\n}\n\n/**\n * Queries for the previous page from the current cursor point; this mutates\n * the state of the PageHelper when the query completes, updating the internal\n * cursor state to that of the returned page.\n *\n * @returns {external:Promise.<object>}\n */\nPageHelper.prototype.previousPage = function() {\n  var self = this\n  return this._retrieveNextPage(this.before, true).then(\n    this._adjustCursors.bind(self)\n  )\n}\n\n/**\n * Queries for the next page from the current cursor point; this mutates\n * the state of the PageHelper when the query completes, updating the internal\n * cursor state to that of the returned page.\n *\n * @returns {external:Promise.<object>}\n */\nPageHelper.prototype.nextPage = function() {\n  var self = this\n  return this._retrieveNextPage(this.after, false).then(\n    this._adjustCursors.bind(self)\n  )\n}\n\nPageHelper.prototype._adjustCursors = function(page) {\n  if (page.after !== undefined) {\n    this.after = page.after\n  }\n\n  if (page.before !== undefined) {\n    this.before = page.before\n  }\n\n  return page.data\n}\n\nPageHelper.prototype._consumePages = function(lambda, reverse) {\n  var self = this\n  return function(page) {\n    lambda(page.data)\n\n    var nextCursor\n    if (reverse) {\n      nextCursor = page.before\n    } else {\n      nextCursor = page.after\n    }\n\n    if (nextCursor !== undefined) {\n      return self\n        ._retrieveNextPage(nextCursor, reverse)\n        .then(self._consumePages(lambda, reverse))\n    } else {\n      return Promise.resolve()\n    }\n  }\n}\n\n/**\n *\n * @returns {external:Promise.<Object>}\n * @private\n */\nPageHelper.prototype._retrieveNextPage = function(cursor, reverse) {\n  var opts = {}\n  objectAssign(opts, this.params)\n  var cursorOpts = opts.cursor || opts\n\n  if (cursor !== undefined) {\n    if (reverse) {\n      cursorOpts.before = cursor\n    } else {\n      cursorOpts.after = cursor\n    }\n  } else {\n    if (reverse) {\n      cursorOpts.before = null\n    }\n  }\n\n  var q = query.Paginate(this.set, opts)\n\n  if (this._faunaFunctions.length > 0) {\n    this._faunaFunctions.forEach(function(lambda) {\n      q = lambda(q)\n    })\n  }\n\n  return this.client.query(q, this.options)\n}\n\n/**\n * @private\n * @returns {PageHelper}\n */\nPageHelper.prototype._clone = function() {\n  return Object.create(PageHelper.prototype, {\n    client: { value: this.client },\n    set: { value: this.set },\n    _faunaFunctions: { value: this._faunaFunctions },\n    before: { value: this.before },\n    after: { value: this.after },\n    params: { value: this.params },\n  })\n}\n\nmodule.exports = PageHelper\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvUGFnZUhlbHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWixZQUFZLG1CQUFPLENBQUMsMERBQVM7QUFDN0IsbUJBQW1CLG1CQUFPLENBQUMsa0VBQWU7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEtBQUs7QUFDaEI7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsdUJBQXVCO0FBQ3JFO0FBQ0EsUUFBUSxzQkFBc0IsS0FBSyx5QkFBeUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1QkFBdUIsS0FBSyw4QkFBOEI7QUFDbEU7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyQkFBMkIsS0FBSywrQkFBK0I7QUFDdkU7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZCxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0JBQStCO0FBQzFDO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtCQUErQjtBQUMxQztBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0VBQWdFO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDREQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxjQUFjLG9CQUFvQjtBQUNsQyxXQUFXLGlCQUFpQjtBQUM1Qix1QkFBdUIsNkJBQTZCO0FBQ3BELGNBQWMsb0JBQW9CO0FBQ2xDLGFBQWEsbUJBQW1CO0FBQ2hDLGNBQWMsb0JBQW9CO0FBQ2xDLEdBQUc7QUFDSDs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29rYm9va3Nob3BuZy8uL25vZGVfbW9kdWxlcy9mYXVuYWRiL3NyYy9QYWdlSGVscGVyLmpzP2I1YjEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbnZhciBxdWVyeSA9IHJlcXVpcmUoJy4vcXVlcnknKVxudmFyIG9iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKVxuXG4vKipcbiAqIEEgRmF1bmFEQiBMYW1iZGEgZXhwcmVzc2lvbiB0byBiZSBwYXNzZWQgaW50byBvbmUgb2YgdGhlIGNvbGxlY3Rpb25cbiAqIGZ1bmN0aW9uczogTWFwIG9yIEZpbHRlci5cbiAqXG4gKiBAY2FsbGJhY2sgUGFnZUhlbHBlcn5jb2xsZWN0aW9uRnVuY3Rpb25cbiAqIEBwYXJhbSB7YW55fSB2YXJcbiAqICAgVGhlIHZhcmlhYmxlIHBhc3NlZCBpbiBieSBGYXVuYURCIHdoZW4gdGhpcyBMYW1iZGFcbiAqICAgZnVuY3Rpb24gaXMgZXhlY3V0ZWQuXG4gKiBAcmV0dXJuIHtFeHByfVxuICogICBUaGUgRmF1bmFEQiBxdWVyeSBleHByZXNzaW9uIHRvIGJlIHJldHVybmVkIGJ5IHRoaXMgTGFtYmRhLlxuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIFBhZ2VIZWxwZXJ+ZWFjaEZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZVxuICogICBBIHBhZ2UgcmV0dXJuZWQgYnkgRmF1bmFEQidzIFBhZ2luYXRlIGZ1bmN0aW9uLlxuICovXG5cbi8qKlxuICogQSB3cmFwcGVyIHRoYXQgcHJvdmlkZXMgYSBoZWxwZnVsIEFQSSBmb3IgY29uc3VtaW5nIEZhdW5hREIgcGFnZXMuXG4gKlxuICogR2VuZXJhbGx5IHRoaXMgaXMgY29uc3RydWN0ZWQgdGhyb3VnaCB0aGUge0BsaW5rIENsaWVudCNwYWdpbmF0ZX0gbWV0aG9kLlxuICpcbiAqIFRoZSB7QGxpbmsgUGFnZUhlbHBlciNtYXB9IGFuZCB7QGxpbmsgUGFnZUhlbHBlciNmaWx0ZXJ9IG1ldGhvZHMgd2lsbCB3cmFwIHRoZSB1bmRlcmx5aW5nIHF1ZXJ5IHdpdGggYSBNYXBcbiAqIGFuZCBGaWx0ZXIgcXVlcnkgZnVuY3Rpb24sIHJlc3BlY3RpdmVseS4gVGhlc2Ugd2lsbCBiZSBleGVjdXRlZCBvbiB0aGUgc2VydmVyIHdoZW4gYSBwcm9taXNlLXJldHVybmluZyBmdW5jdGlvblxuICogaXMgY2FsbGVkLlxuICpcbiAqIFRoZSB7QGxpbmsgUGFnZUhlbHBlciNlYWNofSBhbmQge0BsaW5rIFBhZ2VIZWxwZXIjZWFjaFJldmVyc2V9IGZ1bmN0aW9ucyBkaXNwYXRjaCBxdWVyaWVzIHRvIEZhdW5hREIsIGFuZCByZXR1cm4gUHJvbWlzZXNcbiAqIHJlcHJlc2VudGluZyB0aGUgY29tcGxldGlvbiBvZiB0aG9zZSBxdWVyaWVzLiBUaGUgY2FsbGJhY2tzIHByb3ZpZGVkIHRvIHRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhlY3V0ZWQgbG9jYWxseSB3aGVuIHRoZVxuICogcXVlcmllcyByZXR1cm4uXG4gKlxuICogVGhlIHtAbGluayBQYWdlSGVscGVyI25leHRQYWdlfSBhbmQge0BsaW5rIFBhZ2VIZWxwZXIjcHJldmlvdXNQYWdlfSBmdW5jdGlvbnMgYWxzbyBkaXNwYXRjaCBxdWVyaWVzIHRvIEZhdW5hREIsXG4gKiBidXQgcmV0dXJuIHRoZWlyIHJlc3BvbnNlcyBpbiBhIHdyYXBwZWQgUHJvbWlzZS5cbiAqXG4gKiBAcGFyYW0ge0NsaWVudH0gY2xpZW50XG4gKiAgIFRoZSBGYXVuYURCIGNsaWVudCB1c2VkIHRvIHBhZ2luYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IHNldFxuICogICBUaGUgc2V0IHRvIHBhZ2luYXRlLlxuICogQHBhcmFtIHs/T2JqZWN0fSBwYXJhbXNcbiAqICAgUGFyYW1ldGVycyB0byBiZSBwYXNzZWQgdG8gdGhlIEZhdW5hREIgUGFnaW5hdGUgZnVuY3Rpb24uXG4gKiBAcGFyYW0gez9PYmplY3R9IG9wdGlvbnNcbiAqICAgT2JqZWN0IHRoYXQgY29uZmlndXJlcyB0aGUgY3VycmVudCBwYWdpbmF0aW9uLCBvdmVycmlkaW5nIEZhdW5hREIgY2xpZW50IG9wdGlvbnMuXG4gKiBAcGFyYW0gez9zdHJpbmd9IG9wdGlvbnMuc2VjcmV0IEZhdW5hREIgc2VjcmV0IChzZWUgW1JlZmVyZW5jZSBEb2N1bWVudGF0aW9uXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9pbnRyby9zZWN1cml0eSkpXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gUGFnZUhlbHBlcihjbGllbnQsIHNldCwgcGFyYW1zLCBvcHRpb25zKSB7XG4gIGlmIChwYXJhbXMgPT09IHVuZGVmaW5lZCkge1xuICAgIHBhcmFtcyA9IHt9XG4gIH1cblxuICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgb3B0aW9ucyA9IHt9XG4gIH1cblxuICB0aGlzLnJldmVyc2UgPSBmYWxzZVxuICB0aGlzLnBhcmFtcyA9IHt9XG5cbiAgdGhpcy5iZWZvcmUgPSB1bmRlZmluZWRcbiAgdGhpcy5hZnRlciA9IHVuZGVmaW5lZFxuXG4gIG9iamVjdEFzc2lnbih0aGlzLnBhcmFtcywgcGFyYW1zKVxuXG4gIHZhciBjdXJzb3JQYXJhbXMgPSB0aGlzLnBhcmFtcy5jdXJzb3IgfHwgdGhpcy5wYXJhbXNcblxuICBpZiAoJ2JlZm9yZScgaW4gY3Vyc29yUGFyYW1zKSB7XG4gICAgdGhpcy5iZWZvcmUgPSBjdXJzb3JQYXJhbXMuYmVmb3JlXG4gICAgZGVsZXRlIGN1cnNvclBhcmFtcy5iZWZvcmVcbiAgfSBlbHNlIGlmICgnYWZ0ZXInIGluIGN1cnNvclBhcmFtcykge1xuICAgIHRoaXMuYWZ0ZXIgPSBjdXJzb3JQYXJhbXMuYWZ0ZXJcbiAgICBkZWxldGUgY3Vyc29yUGFyYW1zLmFmdGVyXG4gIH1cblxuICB0aGlzLm9wdGlvbnMgPSB7fVxuICBvYmplY3RBc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKVxuXG4gIHRoaXMuY2xpZW50ID0gY2xpZW50XG4gIHRoaXMuc2V0ID0gc2V0XG5cbiAgLyoqXG4gICAqIEBtZW1iZXIge0FycmF5LjxGdW5jdGlvbj59XG4gICAqIEB0eXBlIHtBcnJheS48RnVuY3Rpb24+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5fZmF1bmFGdW5jdGlvbnMgPSBbXVxufVxuXG4vKipcbiAqIFdyYXBzIHRoZSBzZXQgdG8gYmUgcGFnaW5hdGVkIHdpdGggYSBGYXVuYURCIE1hcCBmdW5jdGlvbi5cbiAqIEFzIHRoaXMgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgb24gdGhlIHNlcnZlciwgdGhlIGBsYW1iZGFgIHBhcmFtIG11c3RcbiAqIHJldHVybiBhIHZhbGlkIHF1ZXJ5IGV4cHJlc3Npb24uXG4gKlxuICogQHBhcmFtIHtQYWdlSGVscGVyfmNvbGxlY3Rpb25GdW5jdGlvbn0gbGFtYmRhXG4gKiAgIFRoZSBMYW1iZGEgZXhwcmVzc2lvbiB0byBiZSBwYXNzZWQgaW50byB0aGUgTWFwIGZ1bmN0aW9uLlxuICogQHJldHVybiB7UGFnZUhlbHBlcn1cbiAqXG4gKi9cblBhZ2VIZWxwZXIucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKGxhbWJkYSkge1xuICB2YXIgcnYgPSB0aGlzLl9jbG9uZSgpXG4gIHJ2Ll9mYXVuYUZ1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uKHEpIHtcbiAgICByZXR1cm4gcXVlcnkuTWFwKHEsIGxhbWJkYSlcbiAgfSlcbiAgcmV0dXJuIHJ2XG59XG5cbi8qKlxuICogV3JhcHMgdGhlIHNldCB0byBiZSBwYWdpbmF0ZWQgd2l0aCBhIEZhdW5hREIgRmlsdGVyIGZ1bmNpdG9uLlxuICogQXMgdGhpcyBmdW5jdGlvbiBpcyBleGVjdXRlZCBvbiB0aGUgc2VydmVyLCB0aGUgYGxhbWJkYWAgcGFyYW0gbXVzdFxuICogcmV0dXJuIGEgdmFsaWQgcXVlcnkgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge1BhZ2VIZWxwZXJ+Y29sbGVjdGlvbkZ1bmN0aW9ufSBsYW1iZGFcbiAqICAgVGhlIGxhbWJkYSBleHByZXNzaW9uIHRvIGJlIHBhc3NlZCBpbnRvIHRoZSBGaWx0ZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtQYWdlSGVscGVyfVxuICovXG5QYWdlSGVscGVyLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbihsYW1iZGEpIHtcbiAgdmFyIHJ2ID0gdGhpcy5fY2xvbmUoKVxuICBydi5fZmF1bmFGdW5jdGlvbnMucHVzaChmdW5jdGlvbihxKSB7XG4gICAgcmV0dXJuIHF1ZXJ5LkZpbHRlcihxLCBsYW1iZGEpXG4gIH0pXG4gIHJldHVybiBydlxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZWFjaCBwYWdlLlxuICpcbiAqIEBwYXJhbSB7UGFnZUhlbHBlcn5lYWNoRnVuY3Rpb259IGxhbWJkYVxuICogICBBIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciBlYWNoIHBhZ2UuXG4gKiBAcmV0dXJucyB7ZXh0ZXJuYWw6UHJvbWlzZS48dm9pZD59XG4gKi9cblBhZ2VIZWxwZXIucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbihsYW1iZGEpIHtcbiAgcmV0dXJuIHRoaXMuX3JldHJpZXZlTmV4dFBhZ2UodGhpcy5hZnRlciwgZmFsc2UpLnRoZW4oXG4gICAgdGhpcy5fY29uc3VtZVBhZ2VzKGxhbWJkYSwgZmFsc2UpXG4gIClcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggcGFnZSwgaW4gdGhlIHJldmVyc2UgZGlyZWN0aW9uLlxuICogQHBhcmFtIHtQYWdlSGVscGVyfmVhY2hGdW5jdGlvbn0gbGFtYmRhXG4gKiBAcmV0dXJucyB7ZXh0ZXJuYWw6UHJvbWlzZS48dm9pZD59XG4gKi9cblBhZ2VIZWxwZXIucHJvdG90eXBlLmVhY2hSZXZlcnNlID0gZnVuY3Rpb24obGFtYmRhKSB7XG4gIHJldHVybiB0aGlzLl9yZXRyaWV2ZU5leHRQYWdlKHRoaXMuYmVmb3JlLCB0cnVlKS50aGVuKFxuICAgIHRoaXMuX2NvbnN1bWVQYWdlcyhsYW1iZGEsIHRydWUpXG4gIClcbn1cblxuLyoqXG4gKiBRdWVyaWVzIGZvciB0aGUgcHJldmlvdXMgcGFnZSBmcm9tIHRoZSBjdXJyZW50IGN1cnNvciBwb2ludDsgdGhpcyBtdXRhdGVzXG4gKiB0aGUgc3RhdGUgb2YgdGhlIFBhZ2VIZWxwZXIgd2hlbiB0aGUgcXVlcnkgY29tcGxldGVzLCB1cGRhdGluZyB0aGUgaW50ZXJuYWxcbiAqIGN1cnNvciBzdGF0ZSB0byB0aGF0IG9mIHRoZSByZXR1cm5lZCBwYWdlLlxuICpcbiAqIEByZXR1cm5zIHtleHRlcm5hbDpQcm9taXNlLjxvYmplY3Q+fVxuICovXG5QYWdlSGVscGVyLnByb3RvdHlwZS5wcmV2aW91c1BhZ2UgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHJldHVybiB0aGlzLl9yZXRyaWV2ZU5leHRQYWdlKHRoaXMuYmVmb3JlLCB0cnVlKS50aGVuKFxuICAgIHRoaXMuX2FkanVzdEN1cnNvcnMuYmluZChzZWxmKVxuICApXG59XG5cbi8qKlxuICogUXVlcmllcyBmb3IgdGhlIG5leHQgcGFnZSBmcm9tIHRoZSBjdXJyZW50IGN1cnNvciBwb2ludDsgdGhpcyBtdXRhdGVzXG4gKiB0aGUgc3RhdGUgb2YgdGhlIFBhZ2VIZWxwZXIgd2hlbiB0aGUgcXVlcnkgY29tcGxldGVzLCB1cGRhdGluZyB0aGUgaW50ZXJuYWxcbiAqIGN1cnNvciBzdGF0ZSB0byB0aGF0IG9mIHRoZSByZXR1cm5lZCBwYWdlLlxuICpcbiAqIEByZXR1cm5zIHtleHRlcm5hbDpQcm9taXNlLjxvYmplY3Q+fVxuICovXG5QYWdlSGVscGVyLnByb3RvdHlwZS5uZXh0UGFnZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgcmV0dXJuIHRoaXMuX3JldHJpZXZlTmV4dFBhZ2UodGhpcy5hZnRlciwgZmFsc2UpLnRoZW4oXG4gICAgdGhpcy5fYWRqdXN0Q3Vyc29ycy5iaW5kKHNlbGYpXG4gIClcbn1cblxuUGFnZUhlbHBlci5wcm90b3R5cGUuX2FkanVzdEN1cnNvcnMgPSBmdW5jdGlvbihwYWdlKSB7XG4gIGlmIChwYWdlLmFmdGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLmFmdGVyID0gcGFnZS5hZnRlclxuICB9XG5cbiAgaWYgKHBhZ2UuYmVmb3JlICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLmJlZm9yZSA9IHBhZ2UuYmVmb3JlXG4gIH1cblxuICByZXR1cm4gcGFnZS5kYXRhXG59XG5cblBhZ2VIZWxwZXIucHJvdG90eXBlLl9jb25zdW1lUGFnZXMgPSBmdW5jdGlvbihsYW1iZGEsIHJldmVyc2UpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gIHJldHVybiBmdW5jdGlvbihwYWdlKSB7XG4gICAgbGFtYmRhKHBhZ2UuZGF0YSlcblxuICAgIHZhciBuZXh0Q3Vyc29yXG4gICAgaWYgKHJldmVyc2UpIHtcbiAgICAgIG5leHRDdXJzb3IgPSBwYWdlLmJlZm9yZVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0Q3Vyc29yID0gcGFnZS5hZnRlclxuICAgIH1cblxuICAgIGlmIChuZXh0Q3Vyc29yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBzZWxmXG4gICAgICAgIC5fcmV0cmlldmVOZXh0UGFnZShuZXh0Q3Vyc29yLCByZXZlcnNlKVxuICAgICAgICAudGhlbihzZWxmLl9jb25zdW1lUGFnZXMobGFtYmRhLCByZXZlcnNlKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICpcbiAqIEByZXR1cm5zIHtleHRlcm5hbDpQcm9taXNlLjxPYmplY3Q+fVxuICogQHByaXZhdGVcbiAqL1xuUGFnZUhlbHBlci5wcm90b3R5cGUuX3JldHJpZXZlTmV4dFBhZ2UgPSBmdW5jdGlvbihjdXJzb3IsIHJldmVyc2UpIHtcbiAgdmFyIG9wdHMgPSB7fVxuICBvYmplY3RBc3NpZ24ob3B0cywgdGhpcy5wYXJhbXMpXG4gIHZhciBjdXJzb3JPcHRzID0gb3B0cy5jdXJzb3IgfHwgb3B0c1xuXG4gIGlmIChjdXJzb3IgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICBjdXJzb3JPcHRzLmJlZm9yZSA9IGN1cnNvclxuICAgIH0gZWxzZSB7XG4gICAgICBjdXJzb3JPcHRzLmFmdGVyID0gY3Vyc29yXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICBjdXJzb3JPcHRzLmJlZm9yZSA9IG51bGxcbiAgICB9XG4gIH1cblxuICB2YXIgcSA9IHF1ZXJ5LlBhZ2luYXRlKHRoaXMuc2V0LCBvcHRzKVxuXG4gIGlmICh0aGlzLl9mYXVuYUZ1bmN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgdGhpcy5fZmF1bmFGdW5jdGlvbnMuZm9yRWFjaChmdW5jdGlvbihsYW1iZGEpIHtcbiAgICAgIHEgPSBsYW1iZGEocSlcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHRoaXMuY2xpZW50LnF1ZXJ5KHEsIHRoaXMub3B0aW9ucylcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge1BhZ2VIZWxwZXJ9XG4gKi9cblBhZ2VIZWxwZXIucHJvdG90eXBlLl9jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gT2JqZWN0LmNyZWF0ZShQYWdlSGVscGVyLnByb3RvdHlwZSwge1xuICAgIGNsaWVudDogeyB2YWx1ZTogdGhpcy5jbGllbnQgfSxcbiAgICBzZXQ6IHsgdmFsdWU6IHRoaXMuc2V0IH0sXG4gICAgX2ZhdW5hRnVuY3Rpb25zOiB7IHZhbHVlOiB0aGlzLl9mYXVuYUZ1bmN0aW9ucyB9LFxuICAgIGJlZm9yZTogeyB2YWx1ZTogdGhpcy5iZWZvcmUgfSxcbiAgICBhZnRlcjogeyB2YWx1ZTogdGhpcy5hZnRlciB9LFxuICAgIHBhcmFtczogeyB2YWx1ZTogdGhpcy5wYXJhbXMgfSxcbiAgfSlcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQYWdlSGVscGVyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/PageHelper.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/RequestResult.js":
/*!***************************************************!*\
  !*** ./node_modules/faunadb/src/RequestResult.js ***!
  \***************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/**\n * A structure containing the request and response context for a given FaunaDB request.\n * Provided to an observer function optionally defined in the {@link Client} constructor.\n *\n * @param {'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE'} method\n *   The HTTP method used in the request.\n * @param {string} path\n *   The path that was queried. Relative to the client's domain.\n * @param {string} query\n *   URL query parameters. Only set if `method` is \"GET\".\n * @param {Object} requestRaw\n *   The JSON request string.\n * @param {Object} requestContent\n *   The request data.\n * @param {string} responseRaw\n *   The unparsed response data, as a string.\n * @param {object | FaunaHttpErrorResponseContent} responseContent\n *   The response data parsed as JSON.\n * @param {number} statusCode\n *   The HTTP response status code.\n * @param {object} responseHeaders\n *   The HTTP headers returned in the response.\n * @param {number} startTime\n *   The time the request was issued by the client.\n * @param {number} endTime\n *   The time the response was received by the client.\n * @constructor\n */\nfunction RequestResult(\n  method,\n  path,\n  query,\n  requestRaw,\n  requestContent,\n  responseRaw,\n  responseContent,\n  statusCode,\n  responseHeaders,\n  startTime,\n  endTime\n) {\n  /** @type {'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE'} */\n  this.method = method\n\n  /** @type {string} */\n  this.path = path\n\n  /**\n   * URL query. Null unless `method == 'get'`.\n   * *Not* related to {@link Client.query}.\n   * @type {object}\n   */\n  this.query = query\n\n  /** @type {string} */\n  this.requestRaw = requestRaw\n\n  /** @type {object} */\n  this.requestContent = requestContent\n\n  /** @type {string} */\n  this.responseRaw = responseRaw\n\n  /**\n   * Parsed value returned by the server.\n   * Includes \"resource\" wrapper dict, or may be an FaunaHttpErrorResponseContent instead\n   * @type {object | FaunaHttpErrorResponseContent}\n   */\n  this.responseContent = responseContent\n\n  /** @type {number} */\n  this.statusCode = statusCode\n\n  /** @type {object} */\n  this.responseHeaders = responseHeaders\n\n  /** @type {number} */\n  this.startTime = startTime\n\n  /** @type {number} */\n  this.endTime = endTime\n}\n\n/**\n * `this.endTime - this.startTime`: Time taken in milliseconds.\n * @type {number}\n */\nObject.defineProperty(RequestResult.prototype, 'timeTaken', {\n  get: function() {\n    return this.endTime - this.startTime\n  },\n})\n\nmodule.exports = RequestResult\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvUmVxdWVzdFJlc3VsdC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWjtBQUNBO0FBQ0EsK0RBQStELGNBQWM7QUFDN0U7QUFDQSxXQUFXLDZDQUE2QztBQUN4RDtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsd0NBQXdDO0FBQ25EO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw2Q0FBNkM7QUFDMUQ7O0FBRUEsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUIsbUJBQW1CO0FBQzFDLFlBQVk7QUFDWjtBQUNBOztBQUVBLGFBQWEsUUFBUTtBQUNyQjs7QUFFQSxhQUFhLFFBQVE7QUFDckI7O0FBRUEsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBLGFBQWEsUUFBUTtBQUNyQjs7QUFFQSxhQUFhLFFBQVE7QUFDckI7O0FBRUEsYUFBYSxRQUFRO0FBQ3JCOztBQUVBLGFBQWEsUUFBUTtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL29rYm9va3Nob3BuZy8uL25vZGVfbW9kdWxlcy9mYXVuYWRiL3NyYy9SZXF1ZXN0UmVzdWx0LmpzPzA4OTQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogQSBzdHJ1Y3R1cmUgY29udGFpbmluZyB0aGUgcmVxdWVzdCBhbmQgcmVzcG9uc2UgY29udGV4dCBmb3IgYSBnaXZlbiBGYXVuYURCIHJlcXVlc3QuXG4gKiBQcm92aWRlZCB0byBhbiBvYnNlcnZlciBmdW5jdGlvbiBvcHRpb25hbGx5IGRlZmluZWQgaW4gdGhlIHtAbGluayBDbGllbnR9IGNvbnN0cnVjdG9yLlxuICpcbiAqIEBwYXJhbSB7J0dFVCcgfCAnUE9TVCcgfCAnUFVUJyB8ICdQQVRDSCcgfCAnREVMRVRFJ30gbWV0aG9kXG4gKiAgIFRoZSBIVFRQIG1ldGhvZCB1c2VkIGluIHRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAqICAgVGhlIHBhdGggdGhhdCB3YXMgcXVlcmllZC4gUmVsYXRpdmUgdG8gdGhlIGNsaWVudCdzIGRvbWFpbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVxuICogICBVUkwgcXVlcnkgcGFyYW1ldGVycy4gT25seSBzZXQgaWYgYG1ldGhvZGAgaXMgXCJHRVRcIi5cbiAqIEBwYXJhbSB7T2JqZWN0fSByZXF1ZXN0UmF3XG4gKiAgIFRoZSBKU09OIHJlcXVlc3Qgc3RyaW5nLlxuICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RDb250ZW50XG4gKiAgIFRoZSByZXF1ZXN0IGRhdGEuXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVzcG9uc2VSYXdcbiAqICAgVGhlIHVucGFyc2VkIHJlc3BvbnNlIGRhdGEsIGFzIGEgc3RyaW5nLlxuICogQHBhcmFtIHtvYmplY3QgfCBGYXVuYUh0dHBFcnJvclJlc3BvbnNlQ29udGVudH0gcmVzcG9uc2VDb250ZW50XG4gKiAgIFRoZSByZXNwb25zZSBkYXRhIHBhcnNlZCBhcyBKU09OLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXR1c0NvZGVcbiAqICAgVGhlIEhUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUuXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2VIZWFkZXJzXG4gKiAgIFRoZSBIVFRQIGhlYWRlcnMgcmV0dXJuZWQgaW4gdGhlIHJlc3BvbnNlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0VGltZVxuICogICBUaGUgdGltZSB0aGUgcmVxdWVzdCB3YXMgaXNzdWVkIGJ5IHRoZSBjbGllbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kVGltZVxuICogICBUaGUgdGltZSB0aGUgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkIGJ5IHRoZSBjbGllbnQuXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gUmVxdWVzdFJlc3VsdChcbiAgbWV0aG9kLFxuICBwYXRoLFxuICBxdWVyeSxcbiAgcmVxdWVzdFJhdyxcbiAgcmVxdWVzdENvbnRlbnQsXG4gIHJlc3BvbnNlUmF3LFxuICByZXNwb25zZUNvbnRlbnQsXG4gIHN0YXR1c0NvZGUsXG4gIHJlc3BvbnNlSGVhZGVycyxcbiAgc3RhcnRUaW1lLFxuICBlbmRUaW1lXG4pIHtcbiAgLyoqIEB0eXBlIHsnR0VUJyB8ICdQT1NUJyB8ICdQVVQnIHwgJ1BBVENIJyB8ICdERUxFVEUnfSAqL1xuICB0aGlzLm1ldGhvZCA9IG1ldGhvZFxuXG4gIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICB0aGlzLnBhdGggPSBwYXRoXG5cbiAgLyoqXG4gICAqIFVSTCBxdWVyeS4gTnVsbCB1bmxlc3MgYG1ldGhvZCA9PSAnZ2V0J2AuXG4gICAqICpOb3QqIHJlbGF0ZWQgdG8ge0BsaW5rIENsaWVudC5xdWVyeX0uXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqL1xuICB0aGlzLnF1ZXJ5ID0gcXVlcnlcblxuICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgdGhpcy5yZXF1ZXN0UmF3ID0gcmVxdWVzdFJhd1xuXG4gIC8qKiBAdHlwZSB7b2JqZWN0fSAqL1xuICB0aGlzLnJlcXVlc3RDb250ZW50ID0gcmVxdWVzdENvbnRlbnRcblxuICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgdGhpcy5yZXNwb25zZVJhdyA9IHJlc3BvbnNlUmF3XG5cbiAgLyoqXG4gICAqIFBhcnNlZCB2YWx1ZSByZXR1cm5lZCBieSB0aGUgc2VydmVyLlxuICAgKiBJbmNsdWRlcyBcInJlc291cmNlXCIgd3JhcHBlciBkaWN0LCBvciBtYXkgYmUgYW4gRmF1bmFIdHRwRXJyb3JSZXNwb25zZUNvbnRlbnQgaW5zdGVhZFxuICAgKiBAdHlwZSB7b2JqZWN0IHwgRmF1bmFIdHRwRXJyb3JSZXNwb25zZUNvbnRlbnR9XG4gICAqL1xuICB0aGlzLnJlc3BvbnNlQ29udGVudCA9IHJlc3BvbnNlQ29udGVudFxuXG4gIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlXG5cbiAgLyoqIEB0eXBlIHtvYmplY3R9ICovXG4gIHRoaXMucmVzcG9uc2VIZWFkZXJzID0gcmVzcG9uc2VIZWFkZXJzXG5cbiAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gIHRoaXMuc3RhcnRUaW1lID0gc3RhcnRUaW1lXG5cbiAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gIHRoaXMuZW5kVGltZSA9IGVuZFRpbWVcbn1cblxuLyoqXG4gKiBgdGhpcy5lbmRUaW1lIC0gdGhpcy5zdGFydFRpbWVgOiBUaW1lIHRha2VuIGluIG1pbGxpc2Vjb25kcy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXF1ZXN0UmVzdWx0LnByb3RvdHlwZSwgJ3RpbWVUYWtlbicsIHtcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5lbmRUaW1lIC0gdGhpcy5zdGFydFRpbWVcbiAgfSxcbn0pXG5cbm1vZHVsZS5leHBvcnRzID0gUmVxdWVzdFJlc3VsdFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/RequestResult.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/_http/errors.js":
/*!**************************************************!*\
  !*** ./node_modules/faunadb/src/_http/errors.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nvar util = __webpack_require__(/*! ../_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\n\n/**\n * Thrown by HttpClient when request hits specified timeout.\n *\n * @param {?string} message\n * @extends Error\n * @constructor\n */\nfunction TimeoutError(message) {\n  Error.call(this)\n\n  this.message = message || 'Request aborted due to timeout'\n  this.isTimeoutError = true\n}\n\nutil.inherits(TimeoutError, Error)\n\n/**\n * Thrown by HttpClient when request is aborted via Signal interface.\n *\n * @param {?string} message\n * @extends Error\n * @constructor\n */\nfunction AbortError(message) {\n  Error.call(this)\n\n  this.message = message || 'Request aborted'\n  this.isAbortError = true\n}\n\nutil.inherits(AbortError, Error)\n\nmodule.exports = {\n  TimeoutError: TimeoutError,\n  AbortError: AbortError,\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvX2h0dHAvZXJyb3JzLmpzIiwibWFwcGluZ3MiOiJBQUFZO0FBQ1osV0FBVyxtQkFBTyxDQUFDLDJEQUFVOztBQUU3QjtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2tib29rc2hvcG5nLy4vbm9kZV9tb2R1bGVzL2ZhdW5hZGIvc3JjL19odHRwL2Vycm9ycy5qcz8wNGQxIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xudmFyIHV0aWwgPSByZXF1aXJlKCcuLi9fdXRpbCcpXG5cbi8qKlxuICogVGhyb3duIGJ5IEh0dHBDbGllbnQgd2hlbiByZXF1ZXN0IGhpdHMgc3BlY2lmaWVkIHRpbWVvdXQuXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSBtZXNzYWdlXG4gKiBAZXh0ZW5kcyBFcnJvclxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFRpbWVvdXRFcnJvcihtZXNzYWdlKSB7XG4gIEVycm9yLmNhbGwodGhpcylcblxuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdSZXF1ZXN0IGFib3J0ZWQgZHVlIHRvIHRpbWVvdXQnXG4gIHRoaXMuaXNUaW1lb3V0RXJyb3IgPSB0cnVlXG59XG5cbnV0aWwuaW5oZXJpdHMoVGltZW91dEVycm9yLCBFcnJvcilcblxuLyoqXG4gKiBUaHJvd24gYnkgSHR0cENsaWVudCB3aGVuIHJlcXVlc3QgaXMgYWJvcnRlZCB2aWEgU2lnbmFsIGludGVyZmFjZS5cbiAqXG4gKiBAcGFyYW0gez9zdHJpbmd9IG1lc3NhZ2VcbiAqIEBleHRlbmRzIEVycm9yXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gQWJvcnRFcnJvcihtZXNzYWdlKSB7XG4gIEVycm9yLmNhbGwodGhpcylcblxuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdSZXF1ZXN0IGFib3J0ZWQnXG4gIHRoaXMuaXNBYm9ydEVycm9yID0gdHJ1ZVxufVxuXG51dGlsLmluaGVyaXRzKEFib3J0RXJyb3IsIEVycm9yKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgVGltZW91dEVycm9yOiBUaW1lb3V0RXJyb3IsXG4gIEFib3J0RXJyb3I6IEFib3J0RXJyb3IsXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/_http/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/_http/fetchAdapter.js":
/*!********************************************************!*\
  !*** ./node_modules/faunadb/src/_http/fetchAdapter.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nvar { AbortController } = __webpack_require__(/*! node-abort-controller */ \"(ssr)/./node_modules/node-abort-controller/index.js\")\nvar util = __webpack_require__(/*! ../_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\nvar faunaErrors = __webpack_require__(/*! ../errors */ \"(ssr)/./node_modules/faunadb/src/errors.js\")\nvar errors = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/faunadb/src/_http/errors.js\")\n\n/**\n * Http client adapter built around fetch API.\n *\n * @constructor\n * @param {?object} options FetchAdapter options.\n * @param {?boolean} options.keepAlive Whether use keep-alive connection.\n * @param {?boolean} options.isHttps Whether use https connection.\n * @param {?function} options.fetch Fetch compatible API.\n * @private\n */\nfunction FetchAdapter(options) {\n  options = options || {}\n\n  /**\n   * Identifies a type of adapter.\n   *\n   * @type {string}\n   */\n  this.type = 'fetch'\n  /**\n   * Indicates whether the .close method has been called.\n   *\n   * @type {boolean}\n   * @private\n   */\n  this._closed = false\n  this._fetch = util.resolveFetch(options.fetch)\n  /**\n   * A map that tracks ongoing requests to be able to cancel them when\n   * the .close method is called.\n   *\n   * @type {Map<Object, Object>}\n   * @private\n   */\n  this._pendingRequests = new Map()\n\n  if (util.isNodeEnv() && options.keepAlive) {\n    this._keepAliveEnabledAgent = new (options.isHttps\n      ? __webpack_require__(/*! https */ \"https\")\n      : __webpack_require__(/*! http */ \"http\")\n    ).Agent({ keepAlive: true, timeout: 3000 })\n  }\n}\n\n/**\n * Issues http requests using fetch API.\n *\n * @param {object} options Request options.\n * @param {string} options.origin Request origin.\n * @param {string} options.path Request path.\n * @param {?object} options.query Request query.\n * @param {string} options.method Request method.\n * @param {?object} options.headers Request headers.\n * @param {?string} options.body Request body utf8 string.\n * @params {?object} options.streamConsumer Stream consumer.\n * @param {?object} options.signal Abort signal object.\n * @param {?number} options.timeout Request timeout.\n * @returns {Promise} Request result.\n */\nFetchAdapter.prototype.execute = function(options) {\n  if (this._closed) {\n    return Promise.reject(\n      new faunaErrors.ClientClosed(\n        'The Client has already been closed',\n        'No subsequent requests can be issued after the .close method is called. ' +\n          'Consider creating a new Client instance'\n      )\n    )\n  }\n\n  var self = this\n  var timerId = null\n  var isStreaming = options.streamConsumer != null\n  // Use timeout only if no signal provided\n  var useTimeout = !options.signal && !!options.timeout\n  var ctrl = new AbortController()\n  var pendingRequest = {\n    isStreaming: isStreaming,\n    isAbortedByClose: false,\n    // This callback can be set during the .close method call to be notified\n    // on request ending to resolve .close's Promise only after all of the requests complete.\n    onComplete: null,\n  }\n\n  self._pendingRequests.set(ctrl, pendingRequest)\n\n  var onComplete = function() {\n    self._pendingRequests.delete(ctrl)\n\n    if (options.signal) {\n      options.signal.removeEventListener('abort', onAbort)\n    }\n\n    if (pendingRequest.onComplete) {\n      pendingRequest.onComplete()\n    }\n  }\n\n  var onSettle = function() {\n    if (timerId) {\n      clearTimeout(timerId)\n    }\n  }\n\n  var onResponse = function(response) {\n    onSettle()\n\n    var headers = responseHeadersAsObject(response.headers)\n    var processStream = isStreaming && response.ok\n\n    // Regular request - return text content immediately.\n    if (!processStream) {\n      onComplete()\n\n      return response.text().then(function(content) {\n        return {\n          body: content,\n          headers: headers,\n          status: response.status,\n        }\n      })\n    }\n\n    attachStreamConsumer(response, options.streamConsumer, onComplete)\n\n    return {\n      // Syntactic stream representation.\n      body: '[stream]',\n      headers: headers,\n      status: response.status,\n    }\n  }\n\n  var onError = function(error) {\n    onSettle()\n    onComplete()\n\n    return Promise.reject(\n      remapIfAbortError(error, function() {\n        if (!isStreaming && pendingRequest.isAbortedByClose) {\n          return new faunaErrors.ClientClosed(\n            'The request is aborted due to the Client#close ' +\n              'call with the force=true option'\n          )\n        }\n\n        return useTimeout ? new errors.TimeoutError() : new errors.AbortError()\n      })\n    )\n  }\n\n  var onAbort = function() {\n    ctrl.abort()\n  }\n\n  if (useTimeout) {\n    timerId = setTimeout(function() {\n      timerId = null\n      ctrl.abort()\n    }, options.timeout)\n  }\n\n  if (options.signal) {\n    options.signal.addEventListener('abort', onAbort)\n  }\n\n  return this._fetch(\n    util.formatUrl(options.origin, options.path, options.query),\n    {\n      method: options.method,\n      headers: options.headers,\n      body: options.body,\n      agent: this._keepAliveEnabledAgent,\n      signal: ctrl.signal,\n    }\n  )\n    .then(onResponse)\n    .catch(onError)\n}\n\n/**\n * Moves to the closed state, aborts streaming requests.\n * Aborts non-streaming requests if force is true,\n * waits until they complete otherwise.\n *\n * @param {?object} opts Close options.\n * @param {?boolean} opts.force Whether to force resources clean up.\n * @returns {Promise<void>}\n */\nFetchAdapter.prototype.close = function(opts) {\n  opts = opts || {}\n\n  this._closed = true\n\n  var promises = []\n\n  var abortOrWait = function(pendingRequest, ctrl) {\n    var shouldAbort = pendingRequest.isStreaming || opts.force\n\n    if (shouldAbort) {\n      pendingRequest.isAbortedByClose = true\n\n      return ctrl.abort()\n    }\n\n    promises.push(\n      new Promise(function(resolve) {\n        pendingRequest.onComplete = resolve\n      })\n    )\n  }\n\n  this._pendingRequests.forEach(abortOrWait)\n\n  var noop = function() {}\n\n  return Promise.all(promises).then(noop)\n}\n\n/**\n * Attaches streamConsumer specifically either for browser or NodeJS.\n * Minimum browser compatibility based on current code:\n * Chrome                52\n * Edge                  79\n * Firefox               65\n * IE                    NA\n * Opera                 39\n * Safari                10.1\n * Android Webview       52\n * Chrome for Android    52\n * Firefox for Android   65\n * Opera for Android     41\n * Safari on iOS         10.3\n * Samsung Internet      6.0\n *\n * @param {object} response Fetch response.\n * @param {object} consumer StreamConsumer.\n * @param {function} onComplete Callback fired when the stream ends or errors.\n * @private\n */\nfunction attachStreamConsumer(response, consumer, onComplete) {\n  var onError = function(error) {\n    onComplete()\n    consumer.onError(remapIfAbortError(error))\n  }\n\n  if (util.isNodeEnv()) {\n    response.body\n      .on('error', onError)\n      .on('data', consumer.onData)\n      .on('end', function() {\n        onComplete()\n        // To simulate how browsers behave in case of \"end\" event.\n        consumer.onError(new TypeError('network error'))\n      })\n\n    return\n  }\n\n  // ATTENTION: The following code is meant to run in browsers and is not\n  // covered by current test automation. Manual testing on major browsers\n  // is required after making changes to it.\n  try {\n    var reader = response.body.getReader()\n    var decoder = new TextDecoder('utf-8')\n\n    function pump() {\n      return reader.read().then(function(msg) {\n        if (!msg.done) {\n          var chunk = decoder.decode(msg.value, { stream: true })\n\n          consumer.onData(chunk)\n\n          return pump()\n        }\n\n        onComplete()\n        // In case a browser hasn't thrown the \"network error\" on stream's end\n        // we need to force it in order to provide a way to handle stream's\n        // ending.\n        consumer.onError(new TypeError('network error'))\n      })\n    }\n\n    pump().catch(onError)\n  } catch (err) {\n    throw new faunaErrors.StreamsNotSupported(\n      'Please, consider providing a Fetch API-compatible function ' +\n        'with streamable response bodies. ' +\n        err\n    )\n  }\n}\n\n/**\n * Remaps an AbortError thrown by fetch to HttpClient's one\n * for timeout and abort use-cases.\n *\n * @param {Error} error Error object.\n * @param {?function} errorFactory A factory called to construct an abort error.\n * @returns {Error} Remapped or original error.\n * @private\n */\nfunction remapIfAbortError(error, errorFactory) {\n  var isAbortError = error && error.name === 'AbortError'\n\n  if (!isAbortError) {\n    return error\n  }\n\n  if (errorFactory) {\n    return errorFactory()\n  }\n\n  return new errors.AbortError()\n}\n\n/**\n * Converts fetch Headers object into POJO.\n *\n * @param {object} headers Fetch Headers object.\n * @returns {object} Response headers as a plain object.\n * @private\n */\nfunction responseHeadersAsObject(headers) {\n  var result = {}\n\n  for (var header of headers.entries()) {\n    var key = header[0]\n    var value = header[1]\n\n    result[key] = value\n  }\n\n  return result\n}\n\nmodule.exports = FetchAdapter\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvX2h0dHAvZmV0Y2hBZGFwdGVyLmpzIiwibWFwcGluZ3MiOiJBQUFZO0FBQ1osTUFBTSxrQkFBa0IsRUFBRSxtQkFBTyxDQUFDLGtGQUF1QjtBQUN6RCxXQUFXLG1CQUFPLENBQUMsMkRBQVU7QUFDN0Isa0JBQWtCLG1CQUFPLENBQUMsNkRBQVc7QUFDckMsYUFBYSxtQkFBTyxDQUFDLGtFQUFVOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLFVBQVU7QUFDckIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsV0FBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUSxtQkFBTyxDQUFDLG9CQUFPO0FBQ3ZCLFFBQVEsbUJBQU8sQ0FBQyxrQkFBTTtBQUN0QixjQUFjLGdDQUFnQztBQUM5QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQixZQUFZLFNBQVM7QUFDckIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsVUFBVTtBQUNyQixhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsY0FBYzs7QUFFaEU7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsV0FBVztBQUN0QixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL29rYm9va3Nob3BuZy8uL25vZGVfbW9kdWxlcy9mYXVuYWRiL3NyYy9faHR0cC9mZXRjaEFkYXB0ZXIuanM/MmI0YyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcbnZhciB7IEFib3J0Q29udHJvbGxlciB9ID0gcmVxdWlyZSgnbm9kZS1hYm9ydC1jb250cm9sbGVyJylcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vX3V0aWwnKVxudmFyIGZhdW5hRXJyb3JzID0gcmVxdWlyZSgnLi4vZXJyb3JzJylcbnZhciBlcnJvcnMgPSByZXF1aXJlKCcuL2Vycm9ycycpXG5cbi8qKlxuICogSHR0cCBjbGllbnQgYWRhcHRlciBidWlsdCBhcm91bmQgZmV0Y2ggQVBJLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHs/b2JqZWN0fSBvcHRpb25zIEZldGNoQWRhcHRlciBvcHRpb25zLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gb3B0aW9ucy5rZWVwQWxpdmUgV2hldGhlciB1c2Uga2VlcC1hbGl2ZSBjb25uZWN0aW9uLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gb3B0aW9ucy5pc0h0dHBzIFdoZXRoZXIgdXNlIGh0dHBzIGNvbm5lY3Rpb24uXG4gKiBAcGFyYW0gez9mdW5jdGlvbn0gb3B0aW9ucy5mZXRjaCBGZXRjaCBjb21wYXRpYmxlIEFQSS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEZldGNoQWRhcHRlcihvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG5cbiAgLyoqXG4gICAqIElkZW50aWZpZXMgYSB0eXBlIG9mIGFkYXB0ZXIuXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICB0aGlzLnR5cGUgPSAnZmV0Y2gnXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgLmNsb3NlIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQuXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5fY2xvc2VkID0gZmFsc2VcbiAgdGhpcy5fZmV0Y2ggPSB1dGlsLnJlc29sdmVGZXRjaChvcHRpb25zLmZldGNoKVxuICAvKipcbiAgICogQSBtYXAgdGhhdCB0cmFja3Mgb25nb2luZyByZXF1ZXN0cyB0byBiZSBhYmxlIHRvIGNhbmNlbCB0aGVtIHdoZW5cbiAgICogdGhlIC5jbG9zZSBtZXRob2QgaXMgY2FsbGVkLlxuICAgKlxuICAgKiBAdHlwZSB7TWFwPE9iamVjdCwgT2JqZWN0Pn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuX3BlbmRpbmdSZXF1ZXN0cyA9IG5ldyBNYXAoKVxuXG4gIGlmICh1dGlsLmlzTm9kZUVudigpICYmIG9wdGlvbnMua2VlcEFsaXZlKSB7XG4gICAgdGhpcy5fa2VlcEFsaXZlRW5hYmxlZEFnZW50ID0gbmV3IChvcHRpb25zLmlzSHR0cHNcbiAgICAgID8gcmVxdWlyZSgnaHR0cHMnKVxuICAgICAgOiByZXF1aXJlKCdodHRwJylcbiAgICApLkFnZW50KHsga2VlcEFsaXZlOiB0cnVlLCB0aW1lb3V0OiAzMDAwIH0pXG4gIH1cbn1cblxuLyoqXG4gKiBJc3N1ZXMgaHR0cCByZXF1ZXN0cyB1c2luZyBmZXRjaCBBUEkuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgUmVxdWVzdCBvcHRpb25zLlxuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMub3JpZ2luIFJlcXVlc3Qgb3JpZ2luLlxuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMucGF0aCBSZXF1ZXN0IHBhdGguXG4gKiBAcGFyYW0gez9vYmplY3R9IG9wdGlvbnMucXVlcnkgUmVxdWVzdCBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm1ldGhvZCBSZXF1ZXN0IG1ldGhvZC5cbiAqIEBwYXJhbSB7P29iamVjdH0gb3B0aW9ucy5oZWFkZXJzIFJlcXVlc3QgaGVhZGVycy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gb3B0aW9ucy5ib2R5IFJlcXVlc3QgYm9keSB1dGY4IHN0cmluZy5cbiAqIEBwYXJhbXMgez9vYmplY3R9IG9wdGlvbnMuc3RyZWFtQ29uc3VtZXIgU3RyZWFtIGNvbnN1bWVyLlxuICogQHBhcmFtIHs/b2JqZWN0fSBvcHRpb25zLnNpZ25hbCBBYm9ydCBzaWduYWwgb2JqZWN0LlxuICogQHBhcmFtIHs/bnVtYmVyfSBvcHRpb25zLnRpbWVvdXQgUmVxdWVzdCB0aW1lb3V0LlxuICogQHJldHVybnMge1Byb21pc2V9IFJlcXVlc3QgcmVzdWx0LlxuICovXG5GZXRjaEFkYXB0ZXIucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICBuZXcgZmF1bmFFcnJvcnMuQ2xpZW50Q2xvc2VkKFxuICAgICAgICAnVGhlIENsaWVudCBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZCcsXG4gICAgICAgICdObyBzdWJzZXF1ZW50IHJlcXVlc3RzIGNhbiBiZSBpc3N1ZWQgYWZ0ZXIgdGhlIC5jbG9zZSBtZXRob2QgaXMgY2FsbGVkLiAnICtcbiAgICAgICAgICAnQ29uc2lkZXIgY3JlYXRpbmcgYSBuZXcgQ2xpZW50IGluc3RhbmNlJ1xuICAgICAgKVxuICAgIClcbiAgfVxuXG4gIHZhciBzZWxmID0gdGhpc1xuICB2YXIgdGltZXJJZCA9IG51bGxcbiAgdmFyIGlzU3RyZWFtaW5nID0gb3B0aW9ucy5zdHJlYW1Db25zdW1lciAhPSBudWxsXG4gIC8vIFVzZSB0aW1lb3V0IG9ubHkgaWYgbm8gc2lnbmFsIHByb3ZpZGVkXG4gIHZhciB1c2VUaW1lb3V0ID0gIW9wdGlvbnMuc2lnbmFsICYmICEhb3B0aW9ucy50aW1lb3V0XG4gIHZhciBjdHJsID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gIHZhciBwZW5kaW5nUmVxdWVzdCA9IHtcbiAgICBpc1N0cmVhbWluZzogaXNTdHJlYW1pbmcsXG4gICAgaXNBYm9ydGVkQnlDbG9zZTogZmFsc2UsXG4gICAgLy8gVGhpcyBjYWxsYmFjayBjYW4gYmUgc2V0IGR1cmluZyB0aGUgLmNsb3NlIG1ldGhvZCBjYWxsIHRvIGJlIG5vdGlmaWVkXG4gICAgLy8gb24gcmVxdWVzdCBlbmRpbmcgdG8gcmVzb2x2ZSAuY2xvc2UncyBQcm9taXNlIG9ubHkgYWZ0ZXIgYWxsIG9mIHRoZSByZXF1ZXN0cyBjb21wbGV0ZS5cbiAgICBvbkNvbXBsZXRlOiBudWxsLFxuICB9XG5cbiAgc2VsZi5fcGVuZGluZ1JlcXVlc3RzLnNldChjdHJsLCBwZW5kaW5nUmVxdWVzdClcblxuICB2YXIgb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuX3BlbmRpbmdSZXF1ZXN0cy5kZWxldGUoY3RybClcblxuICAgIGlmIChvcHRpb25zLnNpZ25hbCkge1xuICAgICAgb3B0aW9ucy5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbkFib3J0KVxuICAgIH1cblxuICAgIGlmIChwZW5kaW5nUmVxdWVzdC5vbkNvbXBsZXRlKSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5vbkNvbXBsZXRlKClcbiAgICB9XG4gIH1cblxuICB2YXIgb25TZXR0bGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGltZXJJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpXG4gICAgfVxuICB9XG5cbiAgdmFyIG9uUmVzcG9uc2UgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgIG9uU2V0dGxlKClcblxuICAgIHZhciBoZWFkZXJzID0gcmVzcG9uc2VIZWFkZXJzQXNPYmplY3QocmVzcG9uc2UuaGVhZGVycylcbiAgICB2YXIgcHJvY2Vzc1N0cmVhbSA9IGlzU3RyZWFtaW5nICYmIHJlc3BvbnNlLm9rXG5cbiAgICAvLyBSZWd1bGFyIHJlcXVlc3QgLSByZXR1cm4gdGV4dCBjb250ZW50IGltbWVkaWF0ZWx5LlxuICAgIGlmICghcHJvY2Vzc1N0cmVhbSkge1xuICAgICAgb25Db21wbGV0ZSgpXG5cbiAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbihmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYm9keTogY29udGVudCxcbiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGF0dGFjaFN0cmVhbUNvbnN1bWVyKHJlc3BvbnNlLCBvcHRpb25zLnN0cmVhbUNvbnN1bWVyLCBvbkNvbXBsZXRlKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIFN5bnRhY3RpYyBzdHJlYW0gcmVwcmVzZW50YXRpb24uXG4gICAgICBib2R5OiAnW3N0cmVhbV0nLFxuICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgIH1cbiAgfVxuXG4gIHZhciBvbkVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICBvblNldHRsZSgpXG4gICAgb25Db21wbGV0ZSgpXG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICByZW1hcElmQWJvcnRFcnJvcihlcnJvciwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghaXNTdHJlYW1pbmcgJiYgcGVuZGluZ1JlcXVlc3QuaXNBYm9ydGVkQnlDbG9zZSkge1xuICAgICAgICAgIHJldHVybiBuZXcgZmF1bmFFcnJvcnMuQ2xpZW50Q2xvc2VkKFxuICAgICAgICAgICAgJ1RoZSByZXF1ZXN0IGlzIGFib3J0ZWQgZHVlIHRvIHRoZSBDbGllbnQjY2xvc2UgJyArXG4gICAgICAgICAgICAgICdjYWxsIHdpdGggdGhlIGZvcmNlPXRydWUgb3B0aW9uJ1xuICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1c2VUaW1lb3V0ID8gbmV3IGVycm9ycy5UaW1lb3V0RXJyb3IoKSA6IG5ldyBlcnJvcnMuQWJvcnRFcnJvcigpXG4gICAgICB9KVxuICAgIClcbiAgfVxuXG4gIHZhciBvbkFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgY3RybC5hYm9ydCgpXG4gIH1cblxuICBpZiAodXNlVGltZW91dCkge1xuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgdGltZXJJZCA9IG51bGxcbiAgICAgIGN0cmwuYWJvcnQoKVxuICAgIH0sIG9wdGlvbnMudGltZW91dClcbiAgfVxuXG4gIGlmIChvcHRpb25zLnNpZ25hbCkge1xuICAgIG9wdGlvbnMuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25BYm9ydClcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9mZXRjaChcbiAgICB1dGlsLmZvcm1hdFVybChvcHRpb25zLm9yaWdpbiwgb3B0aW9ucy5wYXRoLCBvcHRpb25zLnF1ZXJ5KSxcbiAgICB7XG4gICAgICBtZXRob2Q6IG9wdGlvbnMubWV0aG9kLFxuICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgYm9keTogb3B0aW9ucy5ib2R5LFxuICAgICAgYWdlbnQ6IHRoaXMuX2tlZXBBbGl2ZUVuYWJsZWRBZ2VudCxcbiAgICAgIHNpZ25hbDogY3RybC5zaWduYWwsXG4gICAgfVxuICApXG4gICAgLnRoZW4ob25SZXNwb25zZSlcbiAgICAuY2F0Y2gob25FcnJvcilcbn1cblxuLyoqXG4gKiBNb3ZlcyB0byB0aGUgY2xvc2VkIHN0YXRlLCBhYm9ydHMgc3RyZWFtaW5nIHJlcXVlc3RzLlxuICogQWJvcnRzIG5vbi1zdHJlYW1pbmcgcmVxdWVzdHMgaWYgZm9yY2UgaXMgdHJ1ZSxcbiAqIHdhaXRzIHVudGlsIHRoZXkgY29tcGxldGUgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gb3B0cyBDbG9zZSBvcHRpb25zLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gb3B0cy5mb3JjZSBXaGV0aGVyIHRvIGZvcmNlIHJlc291cmNlcyBjbGVhbiB1cC5cbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICovXG5GZXRjaEFkYXB0ZXIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24ob3B0cykge1xuICBvcHRzID0gb3B0cyB8fCB7fVxuXG4gIHRoaXMuX2Nsb3NlZCA9IHRydWVcblxuICB2YXIgcHJvbWlzZXMgPSBbXVxuXG4gIHZhciBhYm9ydE9yV2FpdCA9IGZ1bmN0aW9uKHBlbmRpbmdSZXF1ZXN0LCBjdHJsKSB7XG4gICAgdmFyIHNob3VsZEFib3J0ID0gcGVuZGluZ1JlcXVlc3QuaXNTdHJlYW1pbmcgfHwgb3B0cy5mb3JjZVxuXG4gICAgaWYgKHNob3VsZEFib3J0KSB7XG4gICAgICBwZW5kaW5nUmVxdWVzdC5pc0Fib3J0ZWRCeUNsb3NlID0gdHJ1ZVxuXG4gICAgICByZXR1cm4gY3RybC5hYm9ydCgpXG4gICAgfVxuXG4gICAgcHJvbWlzZXMucHVzaChcbiAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgICAgcGVuZGluZ1JlcXVlc3Qub25Db21wbGV0ZSA9IHJlc29sdmVcbiAgICAgIH0pXG4gICAgKVxuICB9XG5cbiAgdGhpcy5fcGVuZGluZ1JlcXVlc3RzLmZvckVhY2goYWJvcnRPcldhaXQpXG5cbiAgdmFyIG5vb3AgPSBmdW5jdGlvbigpIHt9XG5cbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKG5vb3ApXG59XG5cbi8qKlxuICogQXR0YWNoZXMgc3RyZWFtQ29uc3VtZXIgc3BlY2lmaWNhbGx5IGVpdGhlciBmb3IgYnJvd3NlciBvciBOb2RlSlMuXG4gKiBNaW5pbXVtIGJyb3dzZXIgY29tcGF0aWJpbGl0eSBiYXNlZCBvbiBjdXJyZW50IGNvZGU6XG4gKiBDaHJvbWUgICAgICAgICAgICAgICAgNTJcbiAqIEVkZ2UgICAgICAgICAgICAgICAgICA3OVxuICogRmlyZWZveCAgICAgICAgICAgICAgIDY1XG4gKiBJRSAgICAgICAgICAgICAgICAgICAgTkFcbiAqIE9wZXJhICAgICAgICAgICAgICAgICAzOVxuICogU2FmYXJpICAgICAgICAgICAgICAgIDEwLjFcbiAqIEFuZHJvaWQgV2VidmlldyAgICAgICA1MlxuICogQ2hyb21lIGZvciBBbmRyb2lkICAgIDUyXG4gKiBGaXJlZm94IGZvciBBbmRyb2lkICAgNjVcbiAqIE9wZXJhIGZvciBBbmRyb2lkICAgICA0MVxuICogU2FmYXJpIG9uIGlPUyAgICAgICAgIDEwLjNcbiAqIFNhbXN1bmcgSW50ZXJuZXQgICAgICA2LjBcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgRmV0Y2ggcmVzcG9uc2UuXG4gKiBAcGFyYW0ge29iamVjdH0gY29uc3VtZXIgU3RyZWFtQ29uc3VtZXIuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbkNvbXBsZXRlIENhbGxiYWNrIGZpcmVkIHdoZW4gdGhlIHN0cmVhbSBlbmRzIG9yIGVycm9ycy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGF0dGFjaFN0cmVhbUNvbnN1bWVyKHJlc3BvbnNlLCBjb25zdW1lciwgb25Db21wbGV0ZSkge1xuICB2YXIgb25FcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgb25Db21wbGV0ZSgpXG4gICAgY29uc3VtZXIub25FcnJvcihyZW1hcElmQWJvcnRFcnJvcihlcnJvcikpXG4gIH1cblxuICBpZiAodXRpbC5pc05vZGVFbnYoKSkge1xuICAgIHJlc3BvbnNlLmJvZHlcbiAgICAgIC5vbignZXJyb3InLCBvbkVycm9yKVxuICAgICAgLm9uKCdkYXRhJywgY29uc3VtZXIub25EYXRhKVxuICAgICAgLm9uKCdlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgb25Db21wbGV0ZSgpXG4gICAgICAgIC8vIFRvIHNpbXVsYXRlIGhvdyBicm93c2VycyBiZWhhdmUgaW4gY2FzZSBvZiBcImVuZFwiIGV2ZW50LlxuICAgICAgICBjb25zdW1lci5vbkVycm9yKG5ldyBUeXBlRXJyb3IoJ25ldHdvcmsgZXJyb3InKSlcbiAgICAgIH0pXG5cbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIEFUVEVOVElPTjogVGhlIGZvbGxvd2luZyBjb2RlIGlzIG1lYW50IHRvIHJ1biBpbiBicm93c2VycyBhbmQgaXMgbm90XG4gIC8vIGNvdmVyZWQgYnkgY3VycmVudCB0ZXN0IGF1dG9tYXRpb24uIE1hbnVhbCB0ZXN0aW5nIG9uIG1ham9yIGJyb3dzZXJzXG4gIC8vIGlzIHJlcXVpcmVkIGFmdGVyIG1ha2luZyBjaGFuZ2VzIHRvIGl0LlxuICB0cnkge1xuICAgIHZhciByZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpXG4gICAgdmFyIGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JylcblxuICAgIGZ1bmN0aW9uIHB1bXAoKSB7XG4gICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKGZ1bmN0aW9uKG1zZykge1xuICAgICAgICBpZiAoIW1zZy5kb25lKSB7XG4gICAgICAgICAgdmFyIGNodW5rID0gZGVjb2Rlci5kZWNvZGUobXNnLnZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KVxuXG4gICAgICAgICAgY29uc3VtZXIub25EYXRhKGNodW5rKVxuXG4gICAgICAgICAgcmV0dXJuIHB1bXAoKVxuICAgICAgICB9XG5cbiAgICAgICAgb25Db21wbGV0ZSgpXG4gICAgICAgIC8vIEluIGNhc2UgYSBicm93c2VyIGhhc24ndCB0aHJvd24gdGhlIFwibmV0d29yayBlcnJvclwiIG9uIHN0cmVhbSdzIGVuZFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIGZvcmNlIGl0IGluIG9yZGVyIHRvIHByb3ZpZGUgYSB3YXkgdG8gaGFuZGxlIHN0cmVhbSdzXG4gICAgICAgIC8vIGVuZGluZy5cbiAgICAgICAgY29uc3VtZXIub25FcnJvcihuZXcgVHlwZUVycm9yKCduZXR3b3JrIGVycm9yJykpXG4gICAgICB9KVxuICAgIH1cblxuICAgIHB1bXAoKS5jYXRjaChvbkVycm9yKVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgZmF1bmFFcnJvcnMuU3RyZWFtc05vdFN1cHBvcnRlZChcbiAgICAgICdQbGVhc2UsIGNvbnNpZGVyIHByb3ZpZGluZyBhIEZldGNoIEFQSS1jb21wYXRpYmxlIGZ1bmN0aW9uICcgK1xuICAgICAgICAnd2l0aCBzdHJlYW1hYmxlIHJlc3BvbnNlIGJvZGllcy4gJyArXG4gICAgICAgIGVyclxuICAgIClcbiAgfVxufVxuXG4vKipcbiAqIFJlbWFwcyBhbiBBYm9ydEVycm9yIHRocm93biBieSBmZXRjaCB0byBIdHRwQ2xpZW50J3Mgb25lXG4gKiBmb3IgdGltZW91dCBhbmQgYWJvcnQgdXNlLWNhc2VzLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIEVycm9yIG9iamVjdC5cbiAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBlcnJvckZhY3RvcnkgQSBmYWN0b3J5IGNhbGxlZCB0byBjb25zdHJ1Y3QgYW4gYWJvcnQgZXJyb3IuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFJlbWFwcGVkIG9yIG9yaWdpbmFsIGVycm9yLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVtYXBJZkFib3J0RXJyb3IoZXJyb3IsIGVycm9yRmFjdG9yeSkge1xuICB2YXIgaXNBYm9ydEVycm9yID0gZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InXG5cbiAgaWYgKCFpc0Fib3J0RXJyb3IpIHtcbiAgICByZXR1cm4gZXJyb3JcbiAgfVxuXG4gIGlmIChlcnJvckZhY3RvcnkpIHtcbiAgICByZXR1cm4gZXJyb3JGYWN0b3J5KClcbiAgfVxuXG4gIHJldHVybiBuZXcgZXJyb3JzLkFib3J0RXJyb3IoKVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGZldGNoIEhlYWRlcnMgb2JqZWN0IGludG8gUE9KTy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gaGVhZGVycyBGZXRjaCBIZWFkZXJzIG9iamVjdC5cbiAqIEByZXR1cm5zIHtvYmplY3R9IFJlc3BvbnNlIGhlYWRlcnMgYXMgYSBwbGFpbiBvYmplY3QuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZXNwb25zZUhlYWRlcnNBc09iamVjdChoZWFkZXJzKSB7XG4gIHZhciByZXN1bHQgPSB7fVxuXG4gIGZvciAodmFyIGhlYWRlciBvZiBoZWFkZXJzLmVudHJpZXMoKSkge1xuICAgIHZhciBrZXkgPSBoZWFkZXJbMF1cbiAgICB2YXIgdmFsdWUgPSBoZWFkZXJbMV1cblxuICAgIHJlc3VsdFtrZXldID0gdmFsdWVcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGZXRjaEFkYXB0ZXJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/_http/fetchAdapter.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/_http/http2Adapter.js":
/*!********************************************************!*\
  !*** ./node_modules/faunadb/src/_http/http2Adapter.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nvar http2 = __webpack_require__(/*! http2 */ \"http2\")\nvar errors = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/faunadb/src/_http/errors.js\")\nvar faunaErrors = __webpack_require__(/*! ../errors */ \"(ssr)/./node_modules/faunadb/src/errors.js\")\nvar util = __webpack_require__(/*! ../_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\n\nvar STREAM_PREFIX = 'stream::'\n\n/**\n * Http client adapter built around NodeJS http2 module.\n *\n * @constructor\n * @param {object} options Http2Adapter options.\n * @param {number} options.http2SessionIdleTime The time (in milliseconds) that\n * an HTTP2 session may live when there's no activity.\n * @private\n */\nfunction Http2Adapter(options) {\n  /**\n   * Identifies a type of adapter.\n   *\n   * @type {string}\n   */\n  this.type = 'http2'\n  /**\n   * Serves for reusing http2 sessions between multiple calls.\n   *\n   * @type {object}\n   * @private\n   */\n  this._sessionMap = {}\n  /**\n   * The time (in ms) that an HTTP2 session may live when there's no activity.\n   *\n   * @type {number}\n   * @private\n   */\n  this._http2SessionIdleTime = options.http2SessionIdleTime\n  /**\n   * Indicates whether the .close method has been called.\n   *\n   * @type {boolean}\n   * @private\n   */\n  this._closed = false\n}\n\n/**\n * Resolves ClientHttp2Session to be reused across multiple requests.\n *\n * @param {string} origin Request origin to connect to.\n * @param {?boolean} isStreaming Whether it's a streaming request. A separate session\n * is created for streaming requests to avoid shared resources with regular\n * ones for the purpose of reliability.\n * @returns {object} An interface to operate with HTTP2 session.\n */\nHttp2Adapter.prototype._resolveSessionFor = function(origin, isStreaming) {\n  var sessionKey = isStreaming ? STREAM_PREFIX + origin : origin\n\n  if (this._sessionMap[sessionKey]) {\n    return this._sessionMap[sessionKey]\n  }\n\n  var self = this\n  var timerId = null\n  var ongoingRequests = 0\n\n  var cleanup = function() {\n    self._cleanupSessionFor(origin, isStreaming)\n  }\n\n  var clearInactivityTimeout = function() {\n    if (timerId) {\n      clearTimeout(timerId)\n      timerId = null\n    }\n  }\n\n  var setInactivityTimeout = function() {\n    clearInactivityTimeout()\n\n    if (self._http2SessionIdleTime === Infinity) {\n      return\n    }\n\n    var onTimeout = function() {\n      timerId = null\n\n      if (ongoingRequests === 0) {\n        cleanup()\n      }\n    }\n\n    timerId = setTimeout(onTimeout, self._http2SessionIdleTime)\n  }\n\n  var close = function(force) {\n    clearInactivityTimeout()\n\n    var shouldDestroy = force || isStreaming\n\n    if (shouldDestroy) {\n      session.destroy()\n\n      return Promise.resolve()\n    }\n\n    return new Promise(function(resolve) {\n      session.close(resolve)\n    })\n  }\n\n  var onRequestStart = function() {\n    ++ongoingRequests\n    clearInactivityTimeout()\n  }\n\n  var onRequestEnd = function() {\n    --ongoingRequests\n\n    var noOngoingRequests = ongoingRequests === 0\n    var isSessionClosed = self._closed || session.closed || session.destroyed\n\n    if (noOngoingRequests && !isSessionClosed) {\n      setInactivityTimeout()\n    }\n  }\n\n  var session = http2\n    .connect(origin)\n    .once('error', cleanup)\n    .once('goaway', cleanup)\n  var sessionInterface = {\n    session: session,\n    close: close,\n    onRequestStart: onRequestStart,\n    onRequestEnd: onRequestEnd,\n  }\n\n  this._sessionMap[sessionKey] = sessionInterface\n\n  return sessionInterface\n}\n\n/**\n * Performs cleanup for broken session.\n *\n * @param {string} origin Request origin to connect to.\n * @param {?boolean} isStreaming Whether it's a streaming request.\n * @returns {void}\n */\nHttp2Adapter.prototype._cleanupSessionFor = function(origin, isStreaming) {\n  var sessionKey = isStreaming ? STREAM_PREFIX + origin : origin\n\n  if (this._sessionMap[sessionKey]) {\n    this._sessionMap[sessionKey].session.close()\n    delete this._sessionMap[sessionKey]\n  }\n}\n\n/**\n * Issues http requests using http2 module.\n *\n * @param {object} options Request options.\n * @param {string} options.origin Request origin.\n * @param {string} options.path Request path.\n * @param {?object} options.query Request query.\n * @param {string} options.method Request method.\n * @param {?object} options.headers Request headers.\n * @param {?string} options.body Request body utf8 string.\n * @params {?object} options.streamConsumer Stream consumer.\n * @param {?object} options.signal Abort signal object.\n * @param {?number} options.timeout Request timeout.\n * @returns {Promise} Request result.\n */\nHttp2Adapter.prototype.execute = function(options) {\n  if (this._closed) {\n    return Promise.reject(\n      new faunaErrors.ClientClosed(\n        'The Client has already been closed',\n        'No subsequent requests can be issued after the .close method is called. ' +\n          'Consider creating a new Client instance'\n      )\n    )\n  }\n\n  var self = this\n  var isStreaming = options.streamConsumer != null\n\n  return new Promise(function(resolvePromise, rejectPromise) {\n    var isPromiseSettled = false\n    var isCanceled = false\n\n    var resolve = function(value) {\n      isPromiseSettled = true\n      resolvePromise(value)\n    }\n\n    // If an error has occurred after the Promise is settled\n    // we need to call streamConsumer.onError instead of reject function.\n    // Possible scenario is aborting request when stream is already being consumed.\n    var rejectOrOnError = function(error) {\n      var remapped = remapHttp2Error({ error, isClosed: self._closed })\n\n      if (isPromiseSettled && isStreaming) {\n        return options.streamConsumer.onError(remapped)\n      }\n\n      isPromiseSettled = true\n      rejectPromise(remapped)\n    }\n\n    var onSettled = function() {\n      sessionInterface.onRequestEnd()\n\n      if (options.signal) {\n        options.signal.removeEventListener('abort', onAbort)\n      }\n    }\n\n    var onError = function(error) {\n      onSettled()\n      rejectOrOnError(error)\n    }\n\n    var onAbort = function() {\n      isCanceled = true\n      onSettled()\n      request.close(http2.constants.NGHTTP2_CANCEL)\n      rejectOrOnError(new errors.AbortError())\n    }\n\n    var onTimeout = function() {\n      isCanceled = true\n      onSettled()\n      request.close(http2.constants.NGHTTP2_CANCEL)\n      rejectOrOnError(new errors.TimeoutError())\n    }\n\n    var onResponse = function(responseHeaders) {\n      var status = responseHeaders[http2.constants.HTTP2_HEADER_STATUS]\n      var isOkStatus = status >= 200 && status < 400\n      var processStream = isOkStatus && isStreaming\n      var responseBody = ''\n\n      var onData = function(chunk) {\n        if (processStream) {\n          return options.streamConsumer.onData(chunk)\n        }\n\n        responseBody += chunk\n      }\n\n      var onEnd = function() {\n        if (!isCanceled) {\n          onSettled()\n        }\n\n        if (!processStream) {\n          return resolve({\n            body: responseBody,\n            headers: responseHeaders,\n            status: status,\n          })\n        }\n\n        // Call .onError with TypeError only if the request hasn't been canceled\n        // and the Client hasn't been closed in order to align on how\n        // FetchAdapter works - it throws the TypeError due to underlying fetch API mechanics.\n        if (!isCanceled && !self._closed) {\n          options.streamConsumer.onError(new TypeError('network error'))\n        }\n      }\n\n      if (processStream) {\n        resolve({\n          // Syntactic stream representation.\n          body: '[stream]',\n          headers: responseHeaders,\n          status: status,\n        })\n      }\n\n      request.on('data', onData).on('end', onEnd)\n    }\n\n    try {\n      var pathname =\n        (options.path[0] === '/' ? options.path : '/' + options.path) +\n        util.querystringify(options.query, '?')\n      var requestHeaders = Object.assign({}, options.headers, {\n        [http2.constants.HTTP2_HEADER_PATH]: pathname,\n        [http2.constants.HTTP2_HEADER_METHOD]: options.method,\n      })\n      var sessionInterface = self._resolveSessionFor(\n        options.origin,\n        isStreaming\n      )\n      var request = sessionInterface.session\n        .request(requestHeaders)\n        .setEncoding('utf8')\n        .on('error', onError)\n        .on('response', onResponse)\n\n      sessionInterface.onRequestStart()\n\n      // Set up timeout only if no signal provided.\n      if (!options.signal && options.timeout) {\n        request.setTimeout(options.timeout, onTimeout)\n      }\n\n      if (options.signal) {\n        options.signal.addEventListener('abort', onAbort)\n      }\n\n      if (options.body != null) {\n        request.write(options.body)\n      }\n\n      request.end()\n    } catch (error) {\n      self._cleanupSessionFor(options.origin, isStreaming)\n      rejectOrOnError(error)\n    }\n  })\n}\n\n/**\n * Moves to the closed state, cleans up ongoing HTTP2 sessions if any.\n *\n * @param {?object} opts Close options.\n * @param {?boolean} opts.force Whether to force resources clean up.\n * @returns {Promise<void>}\n */\nHttp2Adapter.prototype.close = function(opts) {\n  opts = opts || {}\n\n  this._closed = true\n\n  var noop = function() {}\n\n  return Promise.all(\n    Object.values(this._sessionMap).map(function(sessionInterface) {\n      return sessionInterface.close(opts.force)\n    })\n  ).then(noop)\n}\n\n/**\n * Remaps internal NodeJS error into ClientClosed one.\n *\n * @private\n * @param {Error} error Error object.\n * @returns {Error} Remapped error.\n */\nfunction remapHttp2Error({ error, isClosed }) {\n  var shouldRemap =\n    isClosed &&\n    (error.code === 'ERR_HTTP2_GOAWAY_SESSION' ||\n      error.code === 'ERR_HTTP2_STREAM_CANCEL')\n\n  if (shouldRemap) {\n    return new faunaErrors.ClientClosed(\n      'The request is aborted due to the Client#close call'\n    )\n  }\n\n  return error\n}\n\nmodule.exports = Http2Adapter\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvX2h0dHAvaHR0cDJBZGFwdGVyLmpzIiwibWFwcGluZ3MiOiJBQUFZO0FBQ1osWUFBWSxtQkFBTyxDQUFDLG9CQUFPO0FBQzNCLGFBQWEsbUJBQU8sQ0FBQyxrRUFBVTtBQUMvQixrQkFBa0IsbUJBQU8sQ0FBQyw2REFBVztBQUNyQyxXQUFXLG1CQUFPLENBQUMsMkRBQVU7O0FBRTdCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxTQUFTO0FBQ3BCLFlBQVksU0FBUztBQUNyQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxTQUFTO0FBQ3BCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLCtCQUErQjs7QUFFdEU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsVUFBVTtBQUNyQixhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsT0FBTztBQUNwQjtBQUNBLDJCQUEyQixpQkFBaUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2tib29rc2hvcG5nLy4vbm9kZV9tb2R1bGVzL2ZhdW5hZGIvc3JjL19odHRwL2h0dHAyQWRhcHRlci5qcz81MjliIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xudmFyIGh0dHAyID0gcmVxdWlyZSgnaHR0cDInKVxudmFyIGVycm9ycyA9IHJlcXVpcmUoJy4vZXJyb3JzJylcbnZhciBmYXVuYUVycm9ycyA9IHJlcXVpcmUoJy4uL2Vycm9ycycpXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4uL191dGlsJylcblxudmFyIFNUUkVBTV9QUkVGSVggPSAnc3RyZWFtOjonXG5cbi8qKlxuICogSHR0cCBjbGllbnQgYWRhcHRlciBidWlsdCBhcm91bmQgTm9kZUpTIGh0dHAyIG1vZHVsZS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIEh0dHAyQWRhcHRlciBvcHRpb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuaHR0cDJTZXNzaW9uSWRsZVRpbWUgVGhlIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgdGhhdFxuICogYW4gSFRUUDIgc2Vzc2lvbiBtYXkgbGl2ZSB3aGVuIHRoZXJlJ3Mgbm8gYWN0aXZpdHkuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBIdHRwMkFkYXB0ZXIob3B0aW9ucykge1xuICAvKipcbiAgICogSWRlbnRpZmllcyBhIHR5cGUgb2YgYWRhcHRlci5cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIHRoaXMudHlwZSA9ICdodHRwMidcbiAgLyoqXG4gICAqIFNlcnZlcyBmb3IgcmV1c2luZyBodHRwMiBzZXNzaW9ucyBiZXR3ZWVuIG11bHRpcGxlIGNhbGxzLlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5fc2Vzc2lvbk1hcCA9IHt9XG4gIC8qKlxuICAgKiBUaGUgdGltZSAoaW4gbXMpIHRoYXQgYW4gSFRUUDIgc2Vzc2lvbiBtYXkgbGl2ZSB3aGVuIHRoZXJlJ3Mgbm8gYWN0aXZpdHkuXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLl9odHRwMlNlc3Npb25JZGxlVGltZSA9IG9wdGlvbnMuaHR0cDJTZXNzaW9uSWRsZVRpbWVcbiAgLyoqXG4gICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSAuY2xvc2UgbWV0aG9kIGhhcyBiZWVuIGNhbGxlZC5cbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLl9jbG9zZWQgPSBmYWxzZVxufVxuXG4vKipcbiAqIFJlc29sdmVzIENsaWVudEh0dHAyU2Vzc2lvbiB0byBiZSByZXVzZWQgYWNyb3NzIG11bHRpcGxlIHJlcXVlc3RzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW4gUmVxdWVzdCBvcmlnaW4gdG8gY29ubmVjdCB0by5cbiAqIEBwYXJhbSB7P2Jvb2xlYW59IGlzU3RyZWFtaW5nIFdoZXRoZXIgaXQncyBhIHN0cmVhbWluZyByZXF1ZXN0LiBBIHNlcGFyYXRlIHNlc3Npb25cbiAqIGlzIGNyZWF0ZWQgZm9yIHN0cmVhbWluZyByZXF1ZXN0cyB0byBhdm9pZCBzaGFyZWQgcmVzb3VyY2VzIHdpdGggcmVndWxhclxuICogb25lcyBmb3IgdGhlIHB1cnBvc2Ugb2YgcmVsaWFiaWxpdHkuXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBBbiBpbnRlcmZhY2UgdG8gb3BlcmF0ZSB3aXRoIEhUVFAyIHNlc3Npb24uXG4gKi9cbkh0dHAyQWRhcHRlci5wcm90b3R5cGUuX3Jlc29sdmVTZXNzaW9uRm9yID0gZnVuY3Rpb24ob3JpZ2luLCBpc1N0cmVhbWluZykge1xuICB2YXIgc2Vzc2lvbktleSA9IGlzU3RyZWFtaW5nID8gU1RSRUFNX1BSRUZJWCArIG9yaWdpbiA6IG9yaWdpblxuXG4gIGlmICh0aGlzLl9zZXNzaW9uTWFwW3Nlc3Npb25LZXldKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Nlc3Npb25NYXBbc2Vzc2lvbktleV1cbiAgfVxuXG4gIHZhciBzZWxmID0gdGhpc1xuICB2YXIgdGltZXJJZCA9IG51bGxcbiAgdmFyIG9uZ29pbmdSZXF1ZXN0cyA9IDBcblxuICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuX2NsZWFudXBTZXNzaW9uRm9yKG9yaWdpbiwgaXNTdHJlYW1pbmcpXG4gIH1cblxuICB2YXIgY2xlYXJJbmFjdGl2aXR5VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aW1lcklkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZClcbiAgICAgIHRpbWVySWQgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgdmFyIHNldEluYWN0aXZpdHlUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgY2xlYXJJbmFjdGl2aXR5VGltZW91dCgpXG5cbiAgICBpZiAoc2VsZi5faHR0cDJTZXNzaW9uSWRsZVRpbWUgPT09IEluZmluaXR5KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgb25UaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aW1lcklkID0gbnVsbFxuXG4gICAgICBpZiAob25nb2luZ1JlcXVlc3RzID09PSAwKSB7XG4gICAgICAgIGNsZWFudXAoKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KG9uVGltZW91dCwgc2VsZi5faHR0cDJTZXNzaW9uSWRsZVRpbWUpXG4gIH1cblxuICB2YXIgY2xvc2UgPSBmdW5jdGlvbihmb3JjZSkge1xuICAgIGNsZWFySW5hY3Rpdml0eVRpbWVvdXQoKVxuXG4gICAgdmFyIHNob3VsZERlc3Ryb3kgPSBmb3JjZSB8fCBpc1N0cmVhbWluZ1xuXG4gICAgaWYgKHNob3VsZERlc3Ryb3kpIHtcbiAgICAgIHNlc3Npb24uZGVzdHJveSgpXG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICBzZXNzaW9uLmNsb3NlKHJlc29sdmUpXG4gICAgfSlcbiAgfVxuXG4gIHZhciBvblJlcXVlc3RTdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgICsrb25nb2luZ1JlcXVlc3RzXG4gICAgY2xlYXJJbmFjdGl2aXR5VGltZW91dCgpXG4gIH1cblxuICB2YXIgb25SZXF1ZXN0RW5kID0gZnVuY3Rpb24oKSB7XG4gICAgLS1vbmdvaW5nUmVxdWVzdHNcblxuICAgIHZhciBub09uZ29pbmdSZXF1ZXN0cyA9IG9uZ29pbmdSZXF1ZXN0cyA9PT0gMFxuICAgIHZhciBpc1Nlc3Npb25DbG9zZWQgPSBzZWxmLl9jbG9zZWQgfHwgc2Vzc2lvbi5jbG9zZWQgfHwgc2Vzc2lvbi5kZXN0cm95ZWRcblxuICAgIGlmIChub09uZ29pbmdSZXF1ZXN0cyAmJiAhaXNTZXNzaW9uQ2xvc2VkKSB7XG4gICAgICBzZXRJbmFjdGl2aXR5VGltZW91dCgpXG4gICAgfVxuICB9XG5cbiAgdmFyIHNlc3Npb24gPSBodHRwMlxuICAgIC5jb25uZWN0KG9yaWdpbilcbiAgICAub25jZSgnZXJyb3InLCBjbGVhbnVwKVxuICAgIC5vbmNlKCdnb2F3YXknLCBjbGVhbnVwKVxuICB2YXIgc2Vzc2lvbkludGVyZmFjZSA9IHtcbiAgICBzZXNzaW9uOiBzZXNzaW9uLFxuICAgIGNsb3NlOiBjbG9zZSxcbiAgICBvblJlcXVlc3RTdGFydDogb25SZXF1ZXN0U3RhcnQsXG4gICAgb25SZXF1ZXN0RW5kOiBvblJlcXVlc3RFbmQsXG4gIH1cblxuICB0aGlzLl9zZXNzaW9uTWFwW3Nlc3Npb25LZXldID0gc2Vzc2lvbkludGVyZmFjZVxuXG4gIHJldHVybiBzZXNzaW9uSW50ZXJmYWNlXG59XG5cbi8qKlxuICogUGVyZm9ybXMgY2xlYW51cCBmb3IgYnJva2VuIHNlc3Npb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpbiBSZXF1ZXN0IG9yaWdpbiB0byBjb25uZWN0IHRvLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gaXNTdHJlYW1pbmcgV2hldGhlciBpdCdzIGEgc3RyZWFtaW5nIHJlcXVlc3QuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuSHR0cDJBZGFwdGVyLnByb3RvdHlwZS5fY2xlYW51cFNlc3Npb25Gb3IgPSBmdW5jdGlvbihvcmlnaW4sIGlzU3RyZWFtaW5nKSB7XG4gIHZhciBzZXNzaW9uS2V5ID0gaXNTdHJlYW1pbmcgPyBTVFJFQU1fUFJFRklYICsgb3JpZ2luIDogb3JpZ2luXG5cbiAgaWYgKHRoaXMuX3Nlc3Npb25NYXBbc2Vzc2lvbktleV0pIHtcbiAgICB0aGlzLl9zZXNzaW9uTWFwW3Nlc3Npb25LZXldLnNlc3Npb24uY2xvc2UoKVxuICAgIGRlbGV0ZSB0aGlzLl9zZXNzaW9uTWFwW3Nlc3Npb25LZXldXG4gIH1cbn1cblxuLyoqXG4gKiBJc3N1ZXMgaHR0cCByZXF1ZXN0cyB1c2luZyBodHRwMiBtb2R1bGUuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgUmVxdWVzdCBvcHRpb25zLlxuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMub3JpZ2luIFJlcXVlc3Qgb3JpZ2luLlxuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMucGF0aCBSZXF1ZXN0IHBhdGguXG4gKiBAcGFyYW0gez9vYmplY3R9IG9wdGlvbnMucXVlcnkgUmVxdWVzdCBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm1ldGhvZCBSZXF1ZXN0IG1ldGhvZC5cbiAqIEBwYXJhbSB7P29iamVjdH0gb3B0aW9ucy5oZWFkZXJzIFJlcXVlc3QgaGVhZGVycy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gb3B0aW9ucy5ib2R5IFJlcXVlc3QgYm9keSB1dGY4IHN0cmluZy5cbiAqIEBwYXJhbXMgez9vYmplY3R9IG9wdGlvbnMuc3RyZWFtQ29uc3VtZXIgU3RyZWFtIGNvbnN1bWVyLlxuICogQHBhcmFtIHs/b2JqZWN0fSBvcHRpb25zLnNpZ25hbCBBYm9ydCBzaWduYWwgb2JqZWN0LlxuICogQHBhcmFtIHs/bnVtYmVyfSBvcHRpb25zLnRpbWVvdXQgUmVxdWVzdCB0aW1lb3V0LlxuICogQHJldHVybnMge1Byb21pc2V9IFJlcXVlc3QgcmVzdWx0LlxuICovXG5IdHRwMkFkYXB0ZXIucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXG4gICAgICBuZXcgZmF1bmFFcnJvcnMuQ2xpZW50Q2xvc2VkKFxuICAgICAgICAnVGhlIENsaWVudCBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZCcsXG4gICAgICAgICdObyBzdWJzZXF1ZW50IHJlcXVlc3RzIGNhbiBiZSBpc3N1ZWQgYWZ0ZXIgdGhlIC5jbG9zZSBtZXRob2QgaXMgY2FsbGVkLiAnICtcbiAgICAgICAgICAnQ29uc2lkZXIgY3JlYXRpbmcgYSBuZXcgQ2xpZW50IGluc3RhbmNlJ1xuICAgICAgKVxuICAgIClcbiAgfVxuXG4gIHZhciBzZWxmID0gdGhpc1xuICB2YXIgaXNTdHJlYW1pbmcgPSBvcHRpb25zLnN0cmVhbUNvbnN1bWVyICE9IG51bGxcblxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZVByb21pc2UsIHJlamVjdFByb21pc2UpIHtcbiAgICB2YXIgaXNQcm9taXNlU2V0dGxlZCA9IGZhbHNlXG4gICAgdmFyIGlzQ2FuY2VsZWQgPSBmYWxzZVxuXG4gICAgdmFyIHJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaXNQcm9taXNlU2V0dGxlZCA9IHRydWVcbiAgICAgIHJlc29sdmVQcm9taXNlKHZhbHVlKVxuICAgIH1cblxuICAgIC8vIElmIGFuIGVycm9yIGhhcyBvY2N1cnJlZCBhZnRlciB0aGUgUHJvbWlzZSBpcyBzZXR0bGVkXG4gICAgLy8gd2UgbmVlZCB0byBjYWxsIHN0cmVhbUNvbnN1bWVyLm9uRXJyb3IgaW5zdGVhZCBvZiByZWplY3QgZnVuY3Rpb24uXG4gICAgLy8gUG9zc2libGUgc2NlbmFyaW8gaXMgYWJvcnRpbmcgcmVxdWVzdCB3aGVuIHN0cmVhbSBpcyBhbHJlYWR5IGJlaW5nIGNvbnN1bWVkLlxuICAgIHZhciByZWplY3RPck9uRXJyb3IgPSBmdW5jdGlvbihlcnJvcikge1xuICAgICAgdmFyIHJlbWFwcGVkID0gcmVtYXBIdHRwMkVycm9yKHsgZXJyb3IsIGlzQ2xvc2VkOiBzZWxmLl9jbG9zZWQgfSlcblxuICAgICAgaWYgKGlzUHJvbWlzZVNldHRsZWQgJiYgaXNTdHJlYW1pbmcpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuc3RyZWFtQ29uc3VtZXIub25FcnJvcihyZW1hcHBlZClcbiAgICAgIH1cblxuICAgICAgaXNQcm9taXNlU2V0dGxlZCA9IHRydWVcbiAgICAgIHJlamVjdFByb21pc2UocmVtYXBwZWQpXG4gICAgfVxuXG4gICAgdmFyIG9uU2V0dGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2Vzc2lvbkludGVyZmFjZS5vblJlcXVlc3RFbmQoKVxuXG4gICAgICBpZiAob3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgb3B0aW9ucy5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbkFib3J0KVxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBvbkVycm9yID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgIG9uU2V0dGxlZCgpXG4gICAgICByZWplY3RPck9uRXJyb3IoZXJyb3IpXG4gICAgfVxuXG4gICAgdmFyIG9uQWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlzQ2FuY2VsZWQgPSB0cnVlXG4gICAgICBvblNldHRsZWQoKVxuICAgICAgcmVxdWVzdC5jbG9zZShodHRwMi5jb25zdGFudHMuTkdIVFRQMl9DQU5DRUwpXG4gICAgICByZWplY3RPck9uRXJyb3IobmV3IGVycm9ycy5BYm9ydEVycm9yKCkpXG4gICAgfVxuXG4gICAgdmFyIG9uVGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaXNDYW5jZWxlZCA9IHRydWVcbiAgICAgIG9uU2V0dGxlZCgpXG4gICAgICByZXF1ZXN0LmNsb3NlKGh0dHAyLmNvbnN0YW50cy5OR0hUVFAyX0NBTkNFTClcbiAgICAgIHJlamVjdE9yT25FcnJvcihuZXcgZXJyb3JzLlRpbWVvdXRFcnJvcigpKVxuICAgIH1cblxuICAgIHZhciBvblJlc3BvbnNlID0gZnVuY3Rpb24ocmVzcG9uc2VIZWFkZXJzKSB7XG4gICAgICB2YXIgc3RhdHVzID0gcmVzcG9uc2VIZWFkZXJzW2h0dHAyLmNvbnN0YW50cy5IVFRQMl9IRUFERVJfU1RBVFVTXVxuICAgICAgdmFyIGlzT2tTdGF0dXMgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDQwMFxuICAgICAgdmFyIHByb2Nlc3NTdHJlYW0gPSBpc09rU3RhdHVzICYmIGlzU3RyZWFtaW5nXG4gICAgICB2YXIgcmVzcG9uc2VCb2R5ID0gJydcblxuICAgICAgdmFyIG9uRGF0YSA9IGZ1bmN0aW9uKGNodW5rKSB7XG4gICAgICAgIGlmIChwcm9jZXNzU3RyZWFtKSB7XG4gICAgICAgICAgcmV0dXJuIG9wdGlvbnMuc3RyZWFtQ29uc3VtZXIub25EYXRhKGNodW5rKVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzcG9uc2VCb2R5ICs9IGNodW5rXG4gICAgICB9XG5cbiAgICAgIHZhciBvbkVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIWlzQ2FuY2VsZWQpIHtcbiAgICAgICAgICBvblNldHRsZWQoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwcm9jZXNzU3RyZWFtKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoe1xuICAgICAgICAgICAgYm9keTogcmVzcG9uc2VCb2R5LFxuICAgICAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGwgLm9uRXJyb3Igd2l0aCBUeXBlRXJyb3Igb25seSBpZiB0aGUgcmVxdWVzdCBoYXNuJ3QgYmVlbiBjYW5jZWxlZFxuICAgICAgICAvLyBhbmQgdGhlIENsaWVudCBoYXNuJ3QgYmVlbiBjbG9zZWQgaW4gb3JkZXIgdG8gYWxpZ24gb24gaG93XG4gICAgICAgIC8vIEZldGNoQWRhcHRlciB3b3JrcyAtIGl0IHRocm93cyB0aGUgVHlwZUVycm9yIGR1ZSB0byB1bmRlcmx5aW5nIGZldGNoIEFQSSBtZWNoYW5pY3MuXG4gICAgICAgIGlmICghaXNDYW5jZWxlZCAmJiAhc2VsZi5fY2xvc2VkKSB7XG4gICAgICAgICAgb3B0aW9ucy5zdHJlYW1Db25zdW1lci5vbkVycm9yKG5ldyBUeXBlRXJyb3IoJ25ldHdvcmsgZXJyb3InKSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvY2Vzc1N0cmVhbSkge1xuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAvLyBTeW50YWN0aWMgc3RyZWFtIHJlcHJlc2VudGF0aW9uLlxuICAgICAgICAgIGJvZHk6ICdbc3RyZWFtXScsXG4gICAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICAgIHN0YXR1czogc3RhdHVzLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXF1ZXN0Lm9uKCdkYXRhJywgb25EYXRhKS5vbignZW5kJywgb25FbmQpXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHZhciBwYXRobmFtZSA9XG4gICAgICAgIChvcHRpb25zLnBhdGhbMF0gPT09ICcvJyA/IG9wdGlvbnMucGF0aCA6ICcvJyArIG9wdGlvbnMucGF0aCkgK1xuICAgICAgICB1dGlsLnF1ZXJ5c3RyaW5naWZ5KG9wdGlvbnMucXVlcnksICc/JylcbiAgICAgIHZhciByZXF1ZXN0SGVhZGVycyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMuaGVhZGVycywge1xuICAgICAgICBbaHR0cDIuY29uc3RhbnRzLkhUVFAyX0hFQURFUl9QQVRIXTogcGF0aG5hbWUsXG4gICAgICAgIFtodHRwMi5jb25zdGFudHMuSFRUUDJfSEVBREVSX01FVEhPRF06IG9wdGlvbnMubWV0aG9kLFxuICAgICAgfSlcbiAgICAgIHZhciBzZXNzaW9uSW50ZXJmYWNlID0gc2VsZi5fcmVzb2x2ZVNlc3Npb25Gb3IoXG4gICAgICAgIG9wdGlvbnMub3JpZ2luLFxuICAgICAgICBpc1N0cmVhbWluZ1xuICAgICAgKVxuICAgICAgdmFyIHJlcXVlc3QgPSBzZXNzaW9uSW50ZXJmYWNlLnNlc3Npb25cbiAgICAgICAgLnJlcXVlc3QocmVxdWVzdEhlYWRlcnMpXG4gICAgICAgIC5zZXRFbmNvZGluZygndXRmOCcpXG4gICAgICAgIC5vbignZXJyb3InLCBvbkVycm9yKVxuICAgICAgICAub24oJ3Jlc3BvbnNlJywgb25SZXNwb25zZSlcblxuICAgICAgc2Vzc2lvbkludGVyZmFjZS5vblJlcXVlc3RTdGFydCgpXG5cbiAgICAgIC8vIFNldCB1cCB0aW1lb3V0IG9ubHkgaWYgbm8gc2lnbmFsIHByb3ZpZGVkLlxuICAgICAgaWYgKCFvcHRpb25zLnNpZ25hbCAmJiBvcHRpb25zLnRpbWVvdXQpIHtcbiAgICAgICAgcmVxdWVzdC5zZXRUaW1lb3V0KG9wdGlvbnMudGltZW91dCwgb25UaW1lb3V0KVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgb3B0aW9ucy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbkFib3J0KVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5ib2R5ICE9IG51bGwpIHtcbiAgICAgICAgcmVxdWVzdC53cml0ZShvcHRpb25zLmJvZHkpXG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3QuZW5kKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc2VsZi5fY2xlYW51cFNlc3Npb25Gb3Iob3B0aW9ucy5vcmlnaW4sIGlzU3RyZWFtaW5nKVxuICAgICAgcmVqZWN0T3JPbkVycm9yKGVycm9yKVxuICAgIH1cbiAgfSlcbn1cblxuLyoqXG4gKiBNb3ZlcyB0byB0aGUgY2xvc2VkIHN0YXRlLCBjbGVhbnMgdXAgb25nb2luZyBIVFRQMiBzZXNzaW9ucyBpZiBhbnkuXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBvcHRzIENsb3NlIG9wdGlvbnMuXG4gKiBAcGFyYW0gez9ib29sZWFufSBvcHRzLmZvcmNlIFdoZXRoZXIgdG8gZm9yY2UgcmVzb3VyY2VzIGNsZWFuIHVwLlxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gKi9cbkh0dHAyQWRhcHRlci5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbihvcHRzKSB7XG4gIG9wdHMgPSBvcHRzIHx8IHt9XG5cbiAgdGhpcy5fY2xvc2VkID0gdHJ1ZVxuXG4gIHZhciBub29wID0gZnVuY3Rpb24oKSB7fVxuXG4gIHJldHVybiBQcm9taXNlLmFsbChcbiAgICBPYmplY3QudmFsdWVzKHRoaXMuX3Nlc3Npb25NYXApLm1hcChmdW5jdGlvbihzZXNzaW9uSW50ZXJmYWNlKSB7XG4gICAgICByZXR1cm4gc2Vzc2lvbkludGVyZmFjZS5jbG9zZShvcHRzLmZvcmNlKVxuICAgIH0pXG4gICkudGhlbihub29wKVxufVxuXG4vKipcbiAqIFJlbWFwcyBpbnRlcm5hbCBOb2RlSlMgZXJyb3IgaW50byBDbGllbnRDbG9zZWQgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBFcnJvciBvYmplY3QuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFJlbWFwcGVkIGVycm9yLlxuICovXG5mdW5jdGlvbiByZW1hcEh0dHAyRXJyb3IoeyBlcnJvciwgaXNDbG9zZWQgfSkge1xuICB2YXIgc2hvdWxkUmVtYXAgPVxuICAgIGlzQ2xvc2VkICYmXG4gICAgKGVycm9yLmNvZGUgPT09ICdFUlJfSFRUUDJfR09BV0FZX1NFU1NJT04nIHx8XG4gICAgICBlcnJvci5jb2RlID09PSAnRVJSX0hUVFAyX1NUUkVBTV9DQU5DRUwnKVxuXG4gIGlmIChzaG91bGRSZW1hcCkge1xuICAgIHJldHVybiBuZXcgZmF1bmFFcnJvcnMuQ2xpZW50Q2xvc2VkKFxuICAgICAgJ1RoZSByZXF1ZXN0IGlzIGFib3J0ZWQgZHVlIHRvIHRoZSBDbGllbnQjY2xvc2UgY2FsbCdcbiAgICApXG4gIH1cblxuICByZXR1cm4gZXJyb3Jcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBIdHRwMkFkYXB0ZXJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/_http/http2Adapter.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/_http/index.js":
/*!*************************************************!*\
  !*** ./node_modules/faunadb/src/_http/index.js ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\nvar packageJson = __webpack_require__(/*! ../../package.json */ \"(ssr)/./node_modules/faunadb/package.json\")\nconst { getBrowserOsDetails } = __webpack_require__(/*! ../_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\nvar util = __webpack_require__(/*! ../_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\nvar errors = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/faunadb/src/_http/errors.js\")\n\n/**\n * The driver's internal HTTP client.\n *\n * @constructor\n * @param {Object} options Same as the {@link Client} options.\n * @private\n */\nfunction HttpClient(options) {\n  var isHttps = options.scheme === 'https'\n\n  // If the port is a falsy value - replace it with default one.\n  if (!options.port) {\n    options.port = isHttps ? 443 : 80\n  }\n\n  // HTTP2 adapter is applicable only if it's NodeJS env and\n  // no fetch API override provided (to preserve backward-compatibility).\n  var useHttp2Adapter = !options.fetch && util.isNodeEnv() && isHttp2Supported()\n\n  this._adapter = useHttp2Adapter\n    ? new (__webpack_require__(/*! ./http2Adapter */ \"(ssr)/./node_modules/faunadb/src/_http/http2Adapter.js\"))({\n        http2SessionIdleTime: options.http2SessionIdleTime,\n      })\n    : new (__webpack_require__(/*! ./fetchAdapter */ \"(ssr)/./node_modules/faunadb/src/_http/fetchAdapter.js\"))({\n        isHttps: isHttps,\n        fetch: options.fetch,\n        keepAlive: options.keepAlive,\n      })\n\n  if (options.endpoint === null) {\n    this._baseUrl = options.scheme + '://' + options.domain + ':' + options.port\n  } else {\n    this._baseUrl = options.endpoint\n  }\n\n  this._secret = options.secret\n  this._headers = Object.assign({}, options.headers, getDefaultHeaders())\n  this._queryTimeout = options.queryTimeout\n  this._lastSeen = null\n  this._timeout = Math.floor(options.timeout * 1000)\n}\n\n/**\n * Returns last seen transaction time.\n *\n * @returns {number} The last seen transaction time.\n */\nHttpClient.prototype.getLastTxnTime = function() {\n  return this._lastSeen\n}\n\n/**\n * Sets the last seen transaction if the given timestamp is greater than then\n * know last seen timestamp.\n *\n * @param {number} time transaction timestamp.\n */\nHttpClient.prototype.syncLastTxnTime = function(time) {\n  if (this._lastSeen == null || this._lastSeen < time) {\n    this._lastSeen = time\n  }\n}\n\n/**\n * Cleans up any held resources.\n *\n * @param {?object} opts Close options.\n * @param {?boolean} opts.force Whether to force resources clean up.\n * @returns {Promise<void>}\n */\nHttpClient.prototype.close = function(opts) {\n  return this._adapter.close(opts)\n}\n\n/**\n * Executes an HTTP request.\n *\n * @param {?object} options Request parameters.\n * @param {?string} options.method Request method.\n * @param {?string} options.path Request path.\n * @param {?string} options.body Request body.\n * @param {?object} options.query Request query.\n * @params {?object} options.streamConsumer Stream consumer, if presented\n * the request will be \"streamed\" into streamConsumer.onData function.\n * @params {function} options.streamConsumer.onData Function called with a chunk of data.\n * @params {function} options.streamConsumer.onError Function called\n * when an error occurred.\n * when the stream is ended.\n * @param {?object} options.signal Abort signal object.\n * @param {?object} options.fetch Fetch API compatible function.\n * @param {?object} options.secret FaunaDB secret.\n * @param {?object} options.queryTimeout FaunaDB query timeout.\n * @param {?string} options.traceparent Unique identifier for the query.\n * @param { {[key: string]: string|number } } options.tags Keyword-value pairs which can be associated with a query.\n * @returns {Promise} The response promise.\n */\nHttpClient.prototype.execute = function(options) {\n  options = options || {}\n\n  var invalidStreamConsumer =\n    options.streamConsumer &&\n    (typeof options.streamConsumer.onData !== 'function' ||\n      typeof options.streamConsumer.onError !== 'function')\n\n  if (invalidStreamConsumer) {\n    return Promise.reject(new TypeError('Invalid \"streamConsumer\" provided'))\n  }\n\n  var secret = options.secret || this._secret\n  var queryTimeout = options.queryTimeout || this._queryTimeout\n  var headers = this._headers\n  // We perform basic validation on the traceparent format and pass along as-is.\n  // In the event the traceparent is invalid, we silently drop it here, generate\n  // a new one server-side, and return it via the traceresponse header.\n  // See https://w3c.github.io/trace-context/#a-traceparent-is-received\n  var traceparent = isValidTraceparentHeader(options.traceparent)\n    ? options.traceparent\n    : null\n\n  headers['Authorization'] = secret && secretHeader(secret)\n  headers['X-Last-Seen-Txn'] = this._lastSeen\n  headers['X-Query-Timeout'] = queryTimeout\n  headers['traceparent'] = traceparent\n  headers['x-fauna-tags'] = parseTags(options.tags)\n\n  return this._adapter.execute({\n    origin: this._baseUrl,\n    path: options.path || '/',\n    query: options.query,\n    method: options.method || 'GET',\n    headers: util.removeNullAndUndefinedValues(headers),\n    body: options.body,\n    signal: options.signal,\n    timeout: this._timeout,\n    streamConsumer: options.streamConsumer,\n  })\n}\n\nfunction isValidTraceparentHeader(traceparentHeader) {\n  // Shamelessly copied from shorturl.at/osvwz\n  return /^[\\da-f]{2}-[\\da-f]{32}-[\\da-f]{16}-[\\da-f]{2}$/.test(\n    traceparentHeader\n  )\n}\n\nfunction parseTags(tags) {\n  if (tags === undefined || tags == null || tags == '') return null\n  validateTags(tags)\n  return Object.entries(tags)\n    .map(e => e.join('='))\n    .join(',')\n}\n\nfunction validateTags(tags) {\n  if (typeof tags != 'object') {\n    throw new Error('Tags must be provided as an object!')\n  }\n}\n\nfunction secretHeader(secret) {\n  return 'Bearer ' + secret\n}\n\n/** @ignore */\nfunction getDefaultHeaders() {\n  var driverEnv = {\n    driver: ['javascript', packageJson.version].join('-'),\n  }\n\n  var isServiceWorker\n\n  try {\n    isServiceWorker = global instanceof ServiceWorkerGlobalScope\n  } catch (error) {\n    isServiceWorker = false\n  }\n\n  try {\n    if (util.isNodeEnv()) {\n      driverEnv.runtime = ['nodejs', process.version].join('-')\n      driverEnv.env = util.getNodeRuntimeEnv()\n      var os = __webpack_require__(/*! os */ \"os\")\n      driverEnv.os = [os.platform(), os.release()].join('-')\n    } else if (isServiceWorker) {\n      driverEnv.runtime = 'Service Worker'\n    } else {\n      driverEnv.runtime = util.getBrowserDetails()\n      driverEnv.env = 'browser'\n      driverEnv.os = getBrowserOsDetails()\n    }\n  } catch (_) {}\n\n  var headers = {\n    'X-FaunaDB-API-Version': packageJson.apiVersion,\n  }\n\n  // TODO: api cors must be enabled to accept header X-Driver-Env\n  if (util.isNodeEnv()) {\n    headers['X-Driver-Env'] = Object.keys(driverEnv)\n      .map(key => [key, driverEnv[key].toLowerCase()].join('='))\n      .join('; ')\n  }\n  return headers\n}\n\nfunction isHttp2Supported() {\n  try {\n    __webpack_require__(/*! http2 */ \"http2\")\n\n    return true\n  } catch (_) {\n    return false\n  }\n}\n\nmodule.exports = {\n  HttpClient: HttpClient,\n  TimeoutError: errors.TimeoutError,\n  AbortError: errors.AbortError,\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvX2h0dHAvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQVk7QUFDWixrQkFBa0IsbUJBQU8sQ0FBQyxxRUFBb0I7QUFDOUMsUUFBUSxzQkFBc0IsRUFBRSxtQkFBTyxDQUFDLDJEQUFVO0FBQ2xELFdBQVcsbUJBQU8sQ0FBQywyREFBVTtBQUM3QixhQUFhLG1CQUFPLENBQUMsa0VBQVU7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRLHFCQUFxQixjQUFjO0FBQ3REO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsbUJBQU8sQ0FBQyw4RUFBZ0I7QUFDbkM7QUFDQSxPQUFPO0FBQ1AsV0FBVyxtQkFBTyxDQUFDLDhFQUFnQjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLFVBQVU7QUFDckIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQixXQUFXLFNBQVM7QUFDcEIsWUFBWSxTQUFTO0FBQ3JCO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQixhQUFhLGlDQUFpQztBQUM5QyxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsRUFBRSxTQUFTLEdBQUcsU0FBUyxHQUFHLFNBQVMsRUFBRTtBQUN4RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFPLENBQUMsY0FBSTtBQUMzQjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSSxtQkFBTyxDQUFDLG9CQUFPOztBQUVuQjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29rYm9va3Nob3BuZy8uL25vZGVfbW9kdWxlcy9mYXVuYWRiL3NyYy9faHR0cC9pbmRleC5qcz81NzU5Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xudmFyIHBhY2thZ2VKc29uID0gcmVxdWlyZSgnLi4vLi4vcGFja2FnZS5qc29uJylcbmNvbnN0IHsgZ2V0QnJvd3Nlck9zRGV0YWlscyB9ID0gcmVxdWlyZSgnLi4vX3V0aWwnKVxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi9fdXRpbCcpXG52YXIgZXJyb3JzID0gcmVxdWlyZSgnLi9lcnJvcnMnKVxuXG4vKipcbiAqIFRoZSBkcml2ZXIncyBpbnRlcm5hbCBIVFRQIGNsaWVudC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFNhbWUgYXMgdGhlIHtAbGluayBDbGllbnR9IG9wdGlvbnMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBIdHRwQ2xpZW50KG9wdGlvbnMpIHtcbiAgdmFyIGlzSHR0cHMgPSBvcHRpb25zLnNjaGVtZSA9PT0gJ2h0dHBzJ1xuXG4gIC8vIElmIHRoZSBwb3J0IGlzIGEgZmFsc3kgdmFsdWUgLSByZXBsYWNlIGl0IHdpdGggZGVmYXVsdCBvbmUuXG4gIGlmICghb3B0aW9ucy5wb3J0KSB7XG4gICAgb3B0aW9ucy5wb3J0ID0gaXNIdHRwcyA/IDQ0MyA6IDgwXG4gIH1cblxuICAvLyBIVFRQMiBhZGFwdGVyIGlzIGFwcGxpY2FibGUgb25seSBpZiBpdCdzIE5vZGVKUyBlbnYgYW5kXG4gIC8vIG5vIGZldGNoIEFQSSBvdmVycmlkZSBwcm92aWRlZCAodG8gcHJlc2VydmUgYmFja3dhcmQtY29tcGF0aWJpbGl0eSkuXG4gIHZhciB1c2VIdHRwMkFkYXB0ZXIgPSAhb3B0aW9ucy5mZXRjaCAmJiB1dGlsLmlzTm9kZUVudigpICYmIGlzSHR0cDJTdXBwb3J0ZWQoKVxuXG4gIHRoaXMuX2FkYXB0ZXIgPSB1c2VIdHRwMkFkYXB0ZXJcbiAgICA/IG5ldyAocmVxdWlyZSgnLi9odHRwMkFkYXB0ZXInKSkoe1xuICAgICAgICBodHRwMlNlc3Npb25JZGxlVGltZTogb3B0aW9ucy5odHRwMlNlc3Npb25JZGxlVGltZSxcbiAgICAgIH0pXG4gICAgOiBuZXcgKHJlcXVpcmUoJy4vZmV0Y2hBZGFwdGVyJykpKHtcbiAgICAgICAgaXNIdHRwczogaXNIdHRwcyxcbiAgICAgICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2gsXG4gICAgICAgIGtlZXBBbGl2ZTogb3B0aW9ucy5rZWVwQWxpdmUsXG4gICAgICB9KVxuXG4gIGlmIChvcHRpb25zLmVuZHBvaW50ID09PSBudWxsKSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuc2NoZW1lICsgJzovLycgKyBvcHRpb25zLmRvbWFpbiArICc6JyArIG9wdGlvbnMucG9ydFxuICB9IGVsc2Uge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmVuZHBvaW50XG4gIH1cblxuICB0aGlzLl9zZWNyZXQgPSBvcHRpb25zLnNlY3JldFxuICB0aGlzLl9oZWFkZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucy5oZWFkZXJzLCBnZXREZWZhdWx0SGVhZGVycygpKVxuICB0aGlzLl9xdWVyeVRpbWVvdXQgPSBvcHRpb25zLnF1ZXJ5VGltZW91dFxuICB0aGlzLl9sYXN0U2VlbiA9IG51bGxcbiAgdGhpcy5fdGltZW91dCA9IE1hdGguZmxvb3Iob3B0aW9ucy50aW1lb3V0ICogMTAwMClcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGxhc3Qgc2VlbiB0cmFuc2FjdGlvbiB0aW1lLlxuICpcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBsYXN0IHNlZW4gdHJhbnNhY3Rpb24gdGltZS5cbiAqL1xuSHR0cENsaWVudC5wcm90b3R5cGUuZ2V0TGFzdFR4blRpbWUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2xhc3RTZWVuXG59XG5cbi8qKlxuICogU2V0cyB0aGUgbGFzdCBzZWVuIHRyYW5zYWN0aW9uIGlmIHRoZSBnaXZlbiB0aW1lc3RhbXAgaXMgZ3JlYXRlciB0aGFuIHRoZW5cbiAqIGtub3cgbGFzdCBzZWVuIHRpbWVzdGFtcC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZSB0cmFuc2FjdGlvbiB0aW1lc3RhbXAuXG4gKi9cbkh0dHBDbGllbnQucHJvdG90eXBlLnN5bmNMYXN0VHhuVGltZSA9IGZ1bmN0aW9uKHRpbWUpIHtcbiAgaWYgKHRoaXMuX2xhc3RTZWVuID09IG51bGwgfHwgdGhpcy5fbGFzdFNlZW4gPCB0aW1lKSB7XG4gICAgdGhpcy5fbGFzdFNlZW4gPSB0aW1lXG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgYW55IGhlbGQgcmVzb3VyY2VzLlxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gb3B0cyBDbG9zZSBvcHRpb25zLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gb3B0cy5mb3JjZSBXaGV0aGVyIHRvIGZvcmNlIHJlc291cmNlcyBjbGVhbiB1cC5cbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICovXG5IdHRwQ2xpZW50LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgcmV0dXJuIHRoaXMuX2FkYXB0ZXIuY2xvc2Uob3B0cylcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBhbiBIVFRQIHJlcXVlc3QuXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBvcHRpb25zIFJlcXVlc3QgcGFyYW1ldGVycy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gb3B0aW9ucy5tZXRob2QgUmVxdWVzdCBtZXRob2QuXG4gKiBAcGFyYW0gez9zdHJpbmd9IG9wdGlvbnMucGF0aCBSZXF1ZXN0IHBhdGguXG4gKiBAcGFyYW0gez9zdHJpbmd9IG9wdGlvbnMuYm9keSBSZXF1ZXN0IGJvZHkuXG4gKiBAcGFyYW0gez9vYmplY3R9IG9wdGlvbnMucXVlcnkgUmVxdWVzdCBxdWVyeS5cbiAqIEBwYXJhbXMgez9vYmplY3R9IG9wdGlvbnMuc3RyZWFtQ29uc3VtZXIgU3RyZWFtIGNvbnN1bWVyLCBpZiBwcmVzZW50ZWRcbiAqIHRoZSByZXF1ZXN0IHdpbGwgYmUgXCJzdHJlYW1lZFwiIGludG8gc3RyZWFtQ29uc3VtZXIub25EYXRhIGZ1bmN0aW9uLlxuICogQHBhcmFtcyB7ZnVuY3Rpb259IG9wdGlvbnMuc3RyZWFtQ29uc3VtZXIub25EYXRhIEZ1bmN0aW9uIGNhbGxlZCB3aXRoIGEgY2h1bmsgb2YgZGF0YS5cbiAqIEBwYXJhbXMge2Z1bmN0aW9ufSBvcHRpb25zLnN0cmVhbUNvbnN1bWVyLm9uRXJyb3IgRnVuY3Rpb24gY2FsbGVkXG4gKiB3aGVuIGFuIGVycm9yIG9jY3VycmVkLlxuICogd2hlbiB0aGUgc3RyZWFtIGlzIGVuZGVkLlxuICogQHBhcmFtIHs/b2JqZWN0fSBvcHRpb25zLnNpZ25hbCBBYm9ydCBzaWduYWwgb2JqZWN0LlxuICogQHBhcmFtIHs/b2JqZWN0fSBvcHRpb25zLmZldGNoIEZldGNoIEFQSSBjb21wYXRpYmxlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHs/b2JqZWN0fSBvcHRpb25zLnNlY3JldCBGYXVuYURCIHNlY3JldC5cbiAqIEBwYXJhbSB7P29iamVjdH0gb3B0aW9ucy5xdWVyeVRpbWVvdXQgRmF1bmFEQiBxdWVyeSB0aW1lb3V0LlxuICogQHBhcmFtIHs/c3RyaW5nfSBvcHRpb25zLnRyYWNlcGFyZW50IFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgcXVlcnkuXG4gKiBAcGFyYW0geyB7W2tleTogc3RyaW5nXTogc3RyaW5nfG51bWJlciB9IH0gb3B0aW9ucy50YWdzIEtleXdvcmQtdmFsdWUgcGFpcnMgd2hpY2ggY2FuIGJlIGFzc29jaWF0ZWQgd2l0aCBhIHF1ZXJ5LlxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSByZXNwb25zZSBwcm9taXNlLlxuICovXG5IdHRwQ2xpZW50LnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXG4gIHZhciBpbnZhbGlkU3RyZWFtQ29uc3VtZXIgPVxuICAgIG9wdGlvbnMuc3RyZWFtQ29uc3VtZXIgJiZcbiAgICAodHlwZW9mIG9wdGlvbnMuc3RyZWFtQ29uc3VtZXIub25EYXRhICE9PSAnZnVuY3Rpb24nIHx8XG4gICAgICB0eXBlb2Ygb3B0aW9ucy5zdHJlYW1Db25zdW1lci5vbkVycm9yICE9PSAnZnVuY3Rpb24nKVxuXG4gIGlmIChpbnZhbGlkU3RyZWFtQ29uc3VtZXIpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcignSW52YWxpZCBcInN0cmVhbUNvbnN1bWVyXCIgcHJvdmlkZWQnKSlcbiAgfVxuXG4gIHZhciBzZWNyZXQgPSBvcHRpb25zLnNlY3JldCB8fCB0aGlzLl9zZWNyZXRcbiAgdmFyIHF1ZXJ5VGltZW91dCA9IG9wdGlvbnMucXVlcnlUaW1lb3V0IHx8IHRoaXMuX3F1ZXJ5VGltZW91dFxuICB2YXIgaGVhZGVycyA9IHRoaXMuX2hlYWRlcnNcbiAgLy8gV2UgcGVyZm9ybSBiYXNpYyB2YWxpZGF0aW9uIG9uIHRoZSB0cmFjZXBhcmVudCBmb3JtYXQgYW5kIHBhc3MgYWxvbmcgYXMtaXMuXG4gIC8vIEluIHRoZSBldmVudCB0aGUgdHJhY2VwYXJlbnQgaXMgaW52YWxpZCwgd2Ugc2lsZW50bHkgZHJvcCBpdCBoZXJlLCBnZW5lcmF0ZVxuICAvLyBhIG5ldyBvbmUgc2VydmVyLXNpZGUsIGFuZCByZXR1cm4gaXQgdmlhIHRoZSB0cmFjZXJlc3BvbnNlIGhlYWRlci5cbiAgLy8gU2VlIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby90cmFjZS1jb250ZXh0LyNhLXRyYWNlcGFyZW50LWlzLXJlY2VpdmVkXG4gIHZhciB0cmFjZXBhcmVudCA9IGlzVmFsaWRUcmFjZXBhcmVudEhlYWRlcihvcHRpb25zLnRyYWNlcGFyZW50KVxuICAgID8gb3B0aW9ucy50cmFjZXBhcmVudFxuICAgIDogbnVsbFxuXG4gIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IHNlY3JldCAmJiBzZWNyZXRIZWFkZXIoc2VjcmV0KVxuICBoZWFkZXJzWydYLUxhc3QtU2Vlbi1UeG4nXSA9IHRoaXMuX2xhc3RTZWVuXG4gIGhlYWRlcnNbJ1gtUXVlcnktVGltZW91dCddID0gcXVlcnlUaW1lb3V0XG4gIGhlYWRlcnNbJ3RyYWNlcGFyZW50J10gPSB0cmFjZXBhcmVudFxuICBoZWFkZXJzWyd4LWZhdW5hLXRhZ3MnXSA9IHBhcnNlVGFncyhvcHRpb25zLnRhZ3MpXG5cbiAgcmV0dXJuIHRoaXMuX2FkYXB0ZXIuZXhlY3V0ZSh7XG4gICAgb3JpZ2luOiB0aGlzLl9iYXNlVXJsLFxuICAgIHBhdGg6IG9wdGlvbnMucGF0aCB8fCAnLycsXG4gICAgcXVlcnk6IG9wdGlvbnMucXVlcnksXG4gICAgbWV0aG9kOiBvcHRpb25zLm1ldGhvZCB8fCAnR0VUJyxcbiAgICBoZWFkZXJzOiB1dGlsLnJlbW92ZU51bGxBbmRVbmRlZmluZWRWYWx1ZXMoaGVhZGVycyksXG4gICAgYm9keTogb3B0aW9ucy5ib2R5LFxuICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgdGltZW91dDogdGhpcy5fdGltZW91dCxcbiAgICBzdHJlYW1Db25zdW1lcjogb3B0aW9ucy5zdHJlYW1Db25zdW1lcixcbiAgfSlcbn1cblxuZnVuY3Rpb24gaXNWYWxpZFRyYWNlcGFyZW50SGVhZGVyKHRyYWNlcGFyZW50SGVhZGVyKSB7XG4gIC8vIFNoYW1lbGVzc2x5IGNvcGllZCBmcm9tIHNob3J0dXJsLmF0L29zdnd6XG4gIHJldHVybiAvXltcXGRhLWZdezJ9LVtcXGRhLWZdezMyfS1bXFxkYS1mXXsxNn0tW1xcZGEtZl17Mn0kLy50ZXN0KFxuICAgIHRyYWNlcGFyZW50SGVhZGVyXG4gIClcbn1cblxuZnVuY3Rpb24gcGFyc2VUYWdzKHRhZ3MpIHtcbiAgaWYgKHRhZ3MgPT09IHVuZGVmaW5lZCB8fCB0YWdzID09IG51bGwgfHwgdGFncyA9PSAnJykgcmV0dXJuIG51bGxcbiAgdmFsaWRhdGVUYWdzKHRhZ3MpXG4gIHJldHVybiBPYmplY3QuZW50cmllcyh0YWdzKVxuICAgIC5tYXAoZSA9PiBlLmpvaW4oJz0nKSlcbiAgICAuam9pbignLCcpXG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVGFncyh0YWdzKSB7XG4gIGlmICh0eXBlb2YgdGFncyAhPSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignVGFncyBtdXN0IGJlIHByb3ZpZGVkIGFzIGFuIG9iamVjdCEnKVxuICB9XG59XG5cbmZ1bmN0aW9uIHNlY3JldEhlYWRlcihzZWNyZXQpIHtcbiAgcmV0dXJuICdCZWFyZXIgJyArIHNlY3JldFxufVxuXG4vKiogQGlnbm9yZSAqL1xuZnVuY3Rpb24gZ2V0RGVmYXVsdEhlYWRlcnMoKSB7XG4gIHZhciBkcml2ZXJFbnYgPSB7XG4gICAgZHJpdmVyOiBbJ2phdmFzY3JpcHQnLCBwYWNrYWdlSnNvbi52ZXJzaW9uXS5qb2luKCctJyksXG4gIH1cblxuICB2YXIgaXNTZXJ2aWNlV29ya2VyXG5cbiAgdHJ5IHtcbiAgICBpc1NlcnZpY2VXb3JrZXIgPSBnbG9iYWwgaW5zdGFuY2VvZiBTZXJ2aWNlV29ya2VyR2xvYmFsU2NvcGVcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpc1NlcnZpY2VXb3JrZXIgPSBmYWxzZVxuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAodXRpbC5pc05vZGVFbnYoKSkge1xuICAgICAgZHJpdmVyRW52LnJ1bnRpbWUgPSBbJ25vZGVqcycsIHByb2Nlc3MudmVyc2lvbl0uam9pbignLScpXG4gICAgICBkcml2ZXJFbnYuZW52ID0gdXRpbC5nZXROb2RlUnVudGltZUVudigpXG4gICAgICB2YXIgb3MgPSByZXF1aXJlKCdvcycpXG4gICAgICBkcml2ZXJFbnYub3MgPSBbb3MucGxhdGZvcm0oKSwgb3MucmVsZWFzZSgpXS5qb2luKCctJylcbiAgICB9IGVsc2UgaWYgKGlzU2VydmljZVdvcmtlcikge1xuICAgICAgZHJpdmVyRW52LnJ1bnRpbWUgPSAnU2VydmljZSBXb3JrZXInXG4gICAgfSBlbHNlIHtcbiAgICAgIGRyaXZlckVudi5ydW50aW1lID0gdXRpbC5nZXRCcm93c2VyRGV0YWlscygpXG4gICAgICBkcml2ZXJFbnYuZW52ID0gJ2Jyb3dzZXInXG4gICAgICBkcml2ZXJFbnYub3MgPSBnZXRCcm93c2VyT3NEZXRhaWxzKClcbiAgICB9XG4gIH0gY2F0Y2ggKF8pIHt9XG5cbiAgdmFyIGhlYWRlcnMgPSB7XG4gICAgJ1gtRmF1bmFEQi1BUEktVmVyc2lvbic6IHBhY2thZ2VKc29uLmFwaVZlcnNpb24sXG4gIH1cblxuICAvLyBUT0RPOiBhcGkgY29ycyBtdXN0IGJlIGVuYWJsZWQgdG8gYWNjZXB0IGhlYWRlciBYLURyaXZlci1FbnZcbiAgaWYgKHV0aWwuaXNOb2RlRW52KCkpIHtcbiAgICBoZWFkZXJzWydYLURyaXZlci1FbnYnXSA9IE9iamVjdC5rZXlzKGRyaXZlckVudilcbiAgICAgIC5tYXAoa2V5ID0+IFtrZXksIGRyaXZlckVudltrZXldLnRvTG93ZXJDYXNlKCldLmpvaW4oJz0nKSlcbiAgICAgIC5qb2luKCc7ICcpXG4gIH1cbiAgcmV0dXJuIGhlYWRlcnNcbn1cblxuZnVuY3Rpb24gaXNIdHRwMlN1cHBvcnRlZCgpIHtcbiAgdHJ5IHtcbiAgICByZXF1aXJlKCdodHRwMicpXG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9IGNhdGNoIChfKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEh0dHBDbGllbnQ6IEh0dHBDbGllbnQsXG4gIFRpbWVvdXRFcnJvcjogZXJyb3JzLlRpbWVvdXRFcnJvcixcbiAgQWJvcnRFcnJvcjogZXJyb3JzLkFib3J0RXJyb3IsXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/_http/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/_json.js":
/*!*******************************************!*\
  !*** ./node_modules/faunadb/src/_json.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar values = __webpack_require__(/*! ./values */ \"(ssr)/./node_modules/faunadb/src/values.js\")\n\nfunction toJSON(object, pretty) {\n  pretty = typeof pretty !== 'undefined' ? pretty : false\n\n  if (pretty) {\n    return JSON.stringify(object, null, '  ')\n  } else {\n    return JSON.stringify(object)\n  }\n}\n\nfunction parseJSON(json) {\n  return JSON.parse(json, json_parse)\n}\n\n/*\n * Parses a line-separated JSON stream. For backwards compatibility with\n * concatenated JSON objects, it attempts to parse the received content as a\n * JSON object. Failures should occur when partial or multiple line-separated\n * JSON objects are received. Upon a parsing failure, attempt paring the\n * received content as line-separated JSON objects.\n *\n * See https://en.wikipedia.org/wiki/JSON_streaming#Line-delimited_JSON\n * See https://en.wikipedia.org/wiki/JSON_streaming#Concatenated_JSON\n *\n * @private\n */\nfunction parseJSONStreaming(content) {\n  var values = []\n\n  try {\n    values.push(parseJSON(content))\n    content = '' // whole content parsed\n  } catch (err) {\n    while (true) {\n      var pos = content.indexOf('\\n') + 1 // include \\n\n      if (pos <= 0) {\n        break\n      }\n      var slice = content.slice(0, pos).trim()\n      if (slice.length > 0) {\n        // discards empty slices due to leading \\n\n        values.push(parseJSON(slice))\n      }\n      content = content.slice(pos)\n    }\n  }\n\n  return {\n    values: values,\n    buffer: content,\n  }\n}\n\nfunction json_parse(_, val) {\n  if (typeof val !== 'object' || val === null) {\n    return val\n  } else if ('@ref' in val) {\n    var ref = val['@ref']\n\n    if (!('collection' in ref) && !('database' in ref)) {\n      return values.Native.fromName(ref['id'])\n    }\n\n    var col = json_parse('collection', ref['collection'])\n    var db = json_parse('database', ref['database'])\n\n    return new values.Ref(ref['id'], col, db)\n  } else if ('@obj' in val) {\n    return val['@obj']\n  } else if ('@set' in val) {\n    return new values.SetRef(val['@set'])\n  } else if ('@ts' in val) {\n    return new values.FaunaTime(val['@ts'])\n  } else if ('@date' in val) {\n    return new values.FaunaDate(val['@date'])\n  } else if ('@bytes' in val) {\n    return new values.Bytes(val['@bytes'])\n  } else if ('@query' in val) {\n    return new values.Query(val['@query'])\n  } else {\n    return val\n  }\n}\n\nmodule.exports = {\n  toJSON: toJSON,\n  parseJSON: parseJSON,\n  parseJSONStreaming: parseJSONStreaming,\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvX2pzb24uanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosYUFBYSxtQkFBTyxDQUFDLDREQUFVOztBQUUvQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29rYm9va3Nob3BuZy8uL25vZGVfbW9kdWxlcy9mYXVuYWRiL3NyYy9fanNvbi5qcz9mOGJkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG52YXIgdmFsdWVzID0gcmVxdWlyZSgnLi92YWx1ZXMnKVxuXG5mdW5jdGlvbiB0b0pTT04ob2JqZWN0LCBwcmV0dHkpIHtcbiAgcHJldHR5ID0gdHlwZW9mIHByZXR0eSAhPT0gJ3VuZGVmaW5lZCcgPyBwcmV0dHkgOiBmYWxzZVxuXG4gIGlmIChwcmV0dHkpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqZWN0LCBudWxsLCAnICAnKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmplY3QpXG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VKU09OKGpzb24pIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UoanNvbiwganNvbl9wYXJzZSlcbn1cblxuLypcbiAqIFBhcnNlcyBhIGxpbmUtc2VwYXJhdGVkIEpTT04gc3RyZWFtLiBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxuICogY29uY2F0ZW5hdGVkIEpTT04gb2JqZWN0cywgaXQgYXR0ZW1wdHMgdG8gcGFyc2UgdGhlIHJlY2VpdmVkIGNvbnRlbnQgYXMgYVxuICogSlNPTiBvYmplY3QuIEZhaWx1cmVzIHNob3VsZCBvY2N1ciB3aGVuIHBhcnRpYWwgb3IgbXVsdGlwbGUgbGluZS1zZXBhcmF0ZWRcbiAqIEpTT04gb2JqZWN0cyBhcmUgcmVjZWl2ZWQuIFVwb24gYSBwYXJzaW5nIGZhaWx1cmUsIGF0dGVtcHQgcGFyaW5nIHRoZVxuICogcmVjZWl2ZWQgY29udGVudCBhcyBsaW5lLXNlcGFyYXRlZCBKU09OIG9iamVjdHMuXG4gKlxuICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0pTT05fc3RyZWFtaW5nI0xpbmUtZGVsaW1pdGVkX0pTT05cbiAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KU09OX3N0cmVhbWluZyNDb25jYXRlbmF0ZWRfSlNPTlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlSlNPTlN0cmVhbWluZyhjb250ZW50KSB7XG4gIHZhciB2YWx1ZXMgPSBbXVxuXG4gIHRyeSB7XG4gICAgdmFsdWVzLnB1c2gocGFyc2VKU09OKGNvbnRlbnQpKVxuICAgIGNvbnRlbnQgPSAnJyAvLyB3aG9sZSBjb250ZW50IHBhcnNlZFxuICB9IGNhdGNoIChlcnIpIHtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgdmFyIHBvcyA9IGNvbnRlbnQuaW5kZXhPZignXFxuJykgKyAxIC8vIGluY2x1ZGUgXFxuXG4gICAgICBpZiAocG9zIDw9IDApIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIHZhciBzbGljZSA9IGNvbnRlbnQuc2xpY2UoMCwgcG9zKS50cmltKClcbiAgICAgIGlmIChzbGljZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIGRpc2NhcmRzIGVtcHR5IHNsaWNlcyBkdWUgdG8gbGVhZGluZyBcXG5cbiAgICAgICAgdmFsdWVzLnB1c2gocGFyc2VKU09OKHNsaWNlKSlcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKHBvcylcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHZhbHVlczogdmFsdWVzLFxuICAgIGJ1ZmZlcjogY29udGVudCxcbiAgfVxufVxuXG5mdW5jdGlvbiBqc29uX3BhcnNlKF8sIHZhbCkge1xuICBpZiAodHlwZW9mIHZhbCAhPT0gJ29iamVjdCcgfHwgdmFsID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbFxuICB9IGVsc2UgaWYgKCdAcmVmJyBpbiB2YWwpIHtcbiAgICB2YXIgcmVmID0gdmFsWydAcmVmJ11cblxuICAgIGlmICghKCdjb2xsZWN0aW9uJyBpbiByZWYpICYmICEoJ2RhdGFiYXNlJyBpbiByZWYpKSB7XG4gICAgICByZXR1cm4gdmFsdWVzLk5hdGl2ZS5mcm9tTmFtZShyZWZbJ2lkJ10pXG4gICAgfVxuXG4gICAgdmFyIGNvbCA9IGpzb25fcGFyc2UoJ2NvbGxlY3Rpb24nLCByZWZbJ2NvbGxlY3Rpb24nXSlcbiAgICB2YXIgZGIgPSBqc29uX3BhcnNlKCdkYXRhYmFzZScsIHJlZlsnZGF0YWJhc2UnXSlcblxuICAgIHJldHVybiBuZXcgdmFsdWVzLlJlZihyZWZbJ2lkJ10sIGNvbCwgZGIpXG4gIH0gZWxzZSBpZiAoJ0BvYmonIGluIHZhbCkge1xuICAgIHJldHVybiB2YWxbJ0BvYmonXVxuICB9IGVsc2UgaWYgKCdAc2V0JyBpbiB2YWwpIHtcbiAgICByZXR1cm4gbmV3IHZhbHVlcy5TZXRSZWYodmFsWydAc2V0J10pXG4gIH0gZWxzZSBpZiAoJ0B0cycgaW4gdmFsKSB7XG4gICAgcmV0dXJuIG5ldyB2YWx1ZXMuRmF1bmFUaW1lKHZhbFsnQHRzJ10pXG4gIH0gZWxzZSBpZiAoJ0BkYXRlJyBpbiB2YWwpIHtcbiAgICByZXR1cm4gbmV3IHZhbHVlcy5GYXVuYURhdGUodmFsWydAZGF0ZSddKVxuICB9IGVsc2UgaWYgKCdAYnl0ZXMnIGluIHZhbCkge1xuICAgIHJldHVybiBuZXcgdmFsdWVzLkJ5dGVzKHZhbFsnQGJ5dGVzJ10pXG4gIH0gZWxzZSBpZiAoJ0BxdWVyeScgaW4gdmFsKSB7XG4gICAgcmV0dXJuIG5ldyB2YWx1ZXMuUXVlcnkodmFsWydAcXVlcnknXSlcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHRvSlNPTjogdG9KU09OLFxuICBwYXJzZUpTT046IHBhcnNlSlNPTixcbiAgcGFyc2VKU09OU3RyZWFtaW5nOiBwYXJzZUpTT05TdHJlYW1pbmcsXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/_json.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/_util.js":
/*!*******************************************!*\
  !*** ./node_modules/faunadb/src/_util.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar packageJson = __webpack_require__(/*! ../package.json */ \"(ssr)/./node_modules/faunadb/package.json\")\nvar chalk = __webpack_require__(/*! chalk */ \"(ssr)/./node_modules/chalk/source/index.js\")\nvar boxen = __webpack_require__(/*! boxen */ \"(ssr)/./node_modules/boxen/index.js\")\n\nvar crossGlobal =\n  typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n    ? global\n    : self\n\n/**\n * Inherit the prototype methods from one constructor into another.\n * Source: https://github.com/kaelzhang/node-util-inherits\n * @param {function} ctor Constructor function which needs to inherit the prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n * @private\n */\nfunction inherits(ctor, superCtor) {\n  if (ctor === undefined || ctor === null) {\n    throw new TypeError(\n      'The constructor to \"inherits\" must not be null or undefined'\n    )\n  }\n\n  if (superCtor === undefined || superCtor === null) {\n    throw new TypeError(\n      'The super constructor to \"inherits\" must not be null or undefined'\n    )\n  }\n\n  if (superCtor.prototype === undefined) {\n    throw new TypeError(\n      'The super constructor to \"inherits\" must have a prototype'\n    )\n  }\n\n  ctor.super_ = superCtor\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true,\n    },\n  })\n}\n\n/**\n * Determines if the current environment is a NodeJS environment.\n * @private\n */\nfunction isNodeEnv() {\n  return (\n    typeof window === 'undefined' &&\n    typeof process !== 'undefined' &&\n    process.versions != null &&\n    process.versions.node != null\n  )\n}\n\n/**\n * Resolves environment variable if available.\n *\n * @param {string} envKey A name of env variable.\n * @return {void|string} Returns requested env variable or void.\n * @private\n */\nfunction getEnvVariable(envKey) {\n  var areEnvVarsAvailable = !!(\n    typeof process !== 'undefined' &&\n    process &&\n    process.env\n  )\n\n  if (areEnvVarsAvailable && process.env[envKey] != null) {\n    return process.env[envKey]\n  }\n}\n\n/**\n * JavaScript Client Detection\n * @private\n */\nfunction getBrowserDetails() {\n  var browser = navigator.appName\n  var browserVersion = '' + parseFloat(navigator.appVersion)\n  var nameOffset, verOffset, ix\n\n  // Opera\n  if ((verOffset = navigator.userAgent.indexOf('Opera')) != -1) {\n    browser = 'Opera'\n    browserVersion = navigator.userAgent.substring(verOffset + 6)\n    if ((verOffset = navigator.userAgent.indexOf('Version')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8)\n    }\n  }\n  // MSIE\n  else if ((verOffset = navigator.userAgent.indexOf('MSIE')) != -1) {\n    browser = 'Microsoft Internet Explorer'\n    browserVersion = navigator.userAgent.substring(verOffset + 5)\n  }\n\n  //IE 11 no longer identifies itself as MS IE, so trap it\n  //http://stackoverflow.com/questions/17907445/how-to-detect-ie11\n  else if (\n    browser == 'Netscape' &&\n    navigator.userAgent.indexOf('Trident/') != -1\n  ) {\n    browser = 'Microsoft Internet Explorer'\n    browserVersion = navigator.userAgent.substring(verOffset + 5)\n    if ((verOffset = navigator.userAgent.indexOf('rv:')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 3)\n    }\n  }\n\n  // Chrome\n  else if ((verOffset = navigator.userAgent.indexOf('Chrome')) != -1) {\n    browser = 'Chrome'\n    browserVersion = navigator.userAgent.substring(verOffset + 7)\n  }\n  // Safari\n  else if ((verOffset = navigator.userAgent.indexOf('Safari')) != -1) {\n    browser = 'Safari'\n    browserVersion = navigator.userAgent.substring(verOffset + 7)\n    if ((verOffset = navigator.userAgent.indexOf('Version')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8)\n    }\n\n    // Chrome on iPad identifies itself as Safari. Actual results do not match what Google claims\n    //  at: https://developers.google.com/chrome/mobile/docs/user-agent?hl=ja\n    //  No mention of chrome in the user agent string. However it does mention CriOS, which presumably\n    //  can be keyed on to detect it.\n    if (navigator.userAgent.indexOf('CriOS') != -1) {\n      //Chrome on iPad spoofing Safari...correct it.\n      browser = 'Chrome'\n      //Don't believe there is a way to grab the accurate version number, so leaving that for now.\n    }\n  }\n  // Firefox\n  else if ((verOffset = navigator.userAgent.indexOf('Firefox')) != -1) {\n    browser = 'Firefox'\n    browserVersion = navigator.userAgent.substring(verOffset + 8)\n  }\n  // Other browsers\n  else if (\n    (nameOffset = navigator.userAgent.lastIndexOf(' ') + 1) <\n    (verOffset = navigator.userAgent.lastIndexOf('/'))\n  ) {\n    browser = navigator.userAgent.substring(nameOffset, verOffset)\n    browserVersion = navigator.userAgent.substring(verOffset + 1)\n    if (browser.toLowerCase() == browser.toUpperCase()) {\n      browser = navigator.appName\n    }\n  }\n  // trim the browser version string\n  if ((ix = browserVersion.indexOf(';')) != -1)\n    browserVersion = browserVersion.substring(0, ix)\n  if ((ix = browserVersion.indexOf(' ')) != -1)\n    browserVersion = browserVersion.substring(0, ix)\n  if ((ix = browserVersion.indexOf(')')) != -1)\n    browserVersion = browserVersion.substring(0, ix)\n\n  return [browser, browserVersion].join('-')\n}\n\nfunction getBrowserOsDetails() {\n  var os = 'unknown'\n  var clientStrings = [\n    { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },\n    { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },\n    { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },\n    { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },\n    { s: 'Windows Vista', r: /Windows NT 6.0/ },\n    { s: 'Windows Server 2003', r: /Windows NT 5.2/ },\n    { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },\n    { s: 'Windows 2000', r: /(Windows NT 5.0|Windows 2000)/ },\n    { s: 'Windows ME', r: /(Win 9x 4.90|Windows ME)/ },\n    { s: 'Windows 98', r: /(Windows 98|Win98)/ },\n    { s: 'Windows 95', r: /(Windows 95|Win95|Windows_95)/ },\n    { s: 'Windows NT 4.0', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },\n    { s: 'Windows CE', r: /Windows CE/ },\n    { s: 'Windows 3.11', r: /Win16/ },\n    { s: 'Android', r: /Android/ },\n    { s: 'Open BSD', r: /OpenBSD/ },\n    { s: 'Sun OS', r: /SunOS/ },\n    { s: 'Chrome OS', r: /CrOS/ },\n    { s: 'Linux', r: /(Linux|X11(?!.*CrOS))/ },\n    { s: 'iOS', r: /(iPhone|iPad|iPod)/ },\n    { s: 'Mac OS X', r: /Mac OS X/ },\n    { s: 'Mac OS', r: /(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\n    { s: 'QNX', r: /QNX/ },\n    { s: 'UNIX', r: /UNIX/ },\n    { s: 'BeOS', r: /BeOS/ },\n    { s: 'OS/2', r: /OS\\/2/ },\n    {\n      s: 'Search Bot',\n      r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/,\n    },\n  ]\n  for (var id in clientStrings) {\n    var cs = clientStrings[id]\n    if (cs.r.test(navigator.userAgent)) {\n      os = cs.s\n      break\n    }\n  }\n\n  var osVersion = 'unknown'\n\n  if (/Windows/.test(os)) {\n    osVersion = /Windows (.*)/.exec(os)[1]\n    os = 'Windows'\n  }\n\n  switch (os) {\n    case 'Mac OS':\n    case 'Mac OS X':\n    case 'Android':\n      osVersion = /(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\\.\\_\\d]+)/.exec(\n        navigator.userAgent\n      )[1]\n      break\n\n    case 'iOS':\n      osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(navigator.appVersion)\n      osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0)\n      break\n  }\n  return [os, osVersion].join('-')\n}\n\n/**\n * For checking process.env always use `hasOwnProperty`\n * Some providers could throw an error when trying to access env variables that does not exists\n * @private */\nfunction getNodeRuntimeEnv() {\n  var runtimeEnvs = [\n    {\n      name: 'Netlify',\n      check: function() {\n        return process.env.hasOwnProperty('NETLIFY_IMAGES_CDN_DOMAIN')\n      },\n    },\n    {\n      name: 'Vercel',\n      check: function() {\n        return process.env.hasOwnProperty('VERCEL')\n      },\n    },\n    {\n      name: 'Heroku',\n      check: function() {\n        return (\n          process.env.hasOwnProperty('PATH') &&\n          process.env.PATH.indexOf('.heroku') !== -1\n        )\n      },\n    },\n    {\n      name: 'AWS Lambda',\n      check: function() {\n        return process.env.hasOwnProperty('AWS_LAMBDA_FUNCTION_VERSION')\n      },\n    },\n    {\n      name: 'GCP Cloud Functions',\n      check: function() {\n        return (\n          process.env.hasOwnProperty('_') &&\n          process.env._.indexOf('google') !== -1\n        )\n      },\n    },\n    {\n      name: 'GCP Compute Instances',\n      check: function() {\n        return process.env.hasOwnProperty('GOOGLE_CLOUD_PROJECT')\n      },\n    },\n    {\n      name: 'Azure Cloud Functions',\n      check: function() {\n        return process.env.hasOwnProperty(\n          'WEBSITE_FUNCTIONS_AZUREMONITOR_CATEGORIES'\n        )\n      },\n    },\n    {\n      name: 'Azure Compute',\n      check: function() {\n        return (\n          process.env.hasOwnProperty('ORYX_ENV_TYPE') &&\n          process.env.hasOwnProperty('WEBSITE_INSTANCE_ID') &&\n          process.env.ORYX_ENV_TYPE === 'AppService'\n        )\n      },\n    },\n    {\n      name: 'Mongo Stitch',\n      check: function() {\n        return typeof crossGlobal.StitchError === 'function'\n      },\n    },\n    {\n      name: 'Render',\n      check: function() {\n        return process.env.hasOwnProperty('RENDER_SERVICE_ID')\n      },\n    },\n    {\n      name: 'Begin',\n      check: function() {\n        return process.env.hasOwnProperty('BEGIN_DATA_SCOPE_ID')\n      },\n    },\n  ]\n  var detectedEnv = runtimeEnvs.find(env => env.check())\n\n  return detectedEnv ? detectedEnv.name : 'unknown'\n}\n\n/**\n * If defined, returns the given value. Otherwise, returns the default value.\n * @param {any} obj The given value.\n * @param {any} def The default value.\n * @private\n */\nfunction defaults(obj, def) {\n  if (obj === undefined) {\n    return def\n  } else {\n    return obj\n  }\n}\n\n/**\n * Used for functions that take an options objects.\n * Fills in defaults for options not provided.\n * Throws errors for provided options that aren't recognized.\n * A default value of `undefined` is used to indicate that the option must be provided.\n * @private\n */\nfunction applyDefaults(provided, defaults) {\n  var out = {}\n\n  for (var providedKey in provided) {\n    if (!(providedKey in defaults)) {\n      throw new Error('No such option ' + providedKey)\n    }\n    out[providedKey] = provided[providedKey]\n  }\n\n  for (var defaultsKey in defaults) {\n    if (!(defaultsKey in out)) {\n      out[defaultsKey] = defaults[defaultsKey]\n    }\n  }\n\n  return out\n}\n\n/**\n * Returns a new object without any keys where the value would be null or undefined.\n * @private\n * */\nfunction removeNullAndUndefinedValues(object) {\n  var res = {}\n  for (var key in object) {\n    var val = object[key]\n    if (val !== null && val !== undefined) {\n      res[key] = val\n    }\n  }\n  return res\n}\n\n/**\n * Returns a new object without any keys where the value would be undefined.\n * @private\n * */\nfunction removeUndefinedValues(object) {\n  var res = {}\n  for (var key in object) {\n    var val = object[key]\n    if (val !== undefined) {\n      res[key] = val\n    }\n  }\n  return res\n}\n\n/**\n * Returns a boolean stating if the given object has a given property\n * @private\n * */\nfunction checkInstanceHasProperty(obj, prop) {\n  return typeof obj === 'object' && obj !== null && Boolean(obj[prop])\n}\n\nfunction formatUrl(base, path, query) {\n  query = typeof query === 'object' ? querystringify(query) : query\n  return [\n    base,\n    path ? (path.charAt(0) === '/' ? '' : '/' + path) : '',\n    query ? (query.charAt(0) === '?' ? '' : '?' + query) : '',\n  ].join('')\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || ''\n\n  var pairs = [],\n    value,\n    key\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?'\n\n  for (key in obj) {\n    if (checkInstanceHasProperty(obj, key)) {\n      value = obj[key]\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undefined || isNaN(value))) {\n        value = ''\n      }\n\n      key = encode(key)\n      value = encode(value)\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue\n      pairs.push(key + '=' + value)\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : ''\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input)\n  } catch (e) {\n    return null\n  }\n}\n\n/**\n * Merge two objects into one\n * @param obj1\n * @param obj2\n * @returns obj3 a new object based on obj1 and obj2\n */\nfunction mergeObjects(obj1, obj2) {\n  var obj3 = {}\n  for (var attrname in obj1) {\n    obj3[attrname] = obj1[attrname]\n  }\n  for (var attrname in obj2) {\n    obj3[attrname] = obj2[attrname]\n  }\n  return obj3\n}\n\n/**\n * Resolves which Fetch API compatible function to use. If an override is\n * provided, returns the override. If no override and the global (window) has\n * \"fetch\" property, return the native fetch. Otherwise returns the cross-fetch polyfill.\n *\n * @param {?function} fetchOverride An Fetch API compatible function to use.\n * @returns {function} A Fetch API compatible function.\n * @private\n */\nfunction resolveFetch(fetchOverride) {\n  if (typeof fetchOverride === 'function') {\n    return fetchOverride\n  }\n\n  if (typeof crossGlobal.fetch === 'function') {\n    // NB. Rebinding to global is needed for Safari\n    return crossGlobal.fetch.bind(crossGlobal)\n  }\n\n  return __webpack_require__(/*! cross-fetch */ \"(ssr)/./node_modules/cross-fetch/dist/node-ponyfill.js\")\n}\n\nmodule.exports = {\n  crossGlobal: crossGlobal,\n  mergeObjects: mergeObjects,\n  formatUrl: formatUrl,\n  querystringify: querystringify,\n  inherits: inherits,\n  isNodeEnv: isNodeEnv,\n  getEnvVariable: getEnvVariable,\n  defaults: defaults,\n  applyDefaults: applyDefaults,\n  removeNullAndUndefinedValues: removeNullAndUndefinedValues,\n  removeUndefinedValues: removeUndefinedValues,\n  checkInstanceHasProperty: checkInstanceHasProperty,\n  getBrowserDetails: getBrowserDetails,\n  getBrowserOsDetails: getBrowserOsDetails,\n  getNodeRuntimeEnv: getNodeRuntimeEnv,\n  resolveFetch: resolveFetch,\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvX3V0aWwuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosa0JBQWtCLG1CQUFPLENBQUMsa0VBQWlCO0FBQzNDLFlBQVksbUJBQU8sQ0FBQyx5REFBTztBQUMzQixZQUFZLG1CQUFPLENBQUMsa0RBQU87O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZLGFBQWE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGFBQWEsYUFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxXQUFXO0FBQ3RCLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxtQkFBTyxDQUFDLDJFQUFhO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29rYm9va3Nob3BuZy8uL25vZGVfbW9kdWxlcy9mYXVuYWRiL3NyYy9fdXRpbC5qcz8zMjM3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG52YXIgcGFja2FnZUpzb24gPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKVxudmFyIGNoYWxrID0gcmVxdWlyZSgnY2hhbGsnKVxudmFyIGJveGVuID0gcmVxdWlyZSgnYm94ZW4nKVxuXG52YXIgY3Jvc3NHbG9iYWwgPVxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgID8gd2luZG93XG4gICAgOiB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IGdsb2JhbFRoaXNcbiAgICA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnXG4gICAgPyBnbG9iYWxcbiAgICA6IHNlbGZcblxuLyoqXG4gKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG4gKiBTb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9rYWVsemhhbmcvbm9kZS11dGlsLWluaGVyaXRzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gIGlmIChjdG9yID09PSB1bmRlZmluZWQgfHwgY3RvciA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAnVGhlIGNvbnN0cnVjdG9yIHRvIFwiaW5oZXJpdHNcIiBtdXN0IG5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCdcbiAgICApXG4gIH1cblxuICBpZiAoc3VwZXJDdG9yID09PSB1bmRlZmluZWQgfHwgc3VwZXJDdG9yID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdUaGUgc3VwZXIgY29uc3RydWN0b3IgdG8gXCJpbmhlcml0c1wiIG11c3Qgbm90IGJlIG51bGwgb3IgdW5kZWZpbmVkJ1xuICAgIClcbiAgfVxuXG4gIGlmIChzdXBlckN0b3IucHJvdG90eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1RoZSBzdXBlciBjb25zdHJ1Y3RvciB0byBcImluaGVyaXRzXCIgbXVzdCBoYXZlIGEgcHJvdG90eXBlJ1xuICAgIClcbiAgfVxuXG4gIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB9LFxuICB9KVxufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgaXMgYSBOb2RlSlMgZW52aXJvbm1lbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc05vZGVFbnYoKSB7XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICBwcm9jZXNzLnZlcnNpb25zICE9IG51bGwgJiZcbiAgICBwcm9jZXNzLnZlcnNpb25zLm5vZGUgIT0gbnVsbFxuICApXG59XG5cbi8qKlxuICogUmVzb2x2ZXMgZW52aXJvbm1lbnQgdmFyaWFibGUgaWYgYXZhaWxhYmxlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbnZLZXkgQSBuYW1lIG9mIGVudiB2YXJpYWJsZS5cbiAqIEByZXR1cm4ge3ZvaWR8c3RyaW5nfSBSZXR1cm5zIHJlcXVlc3RlZCBlbnYgdmFyaWFibGUgb3Igdm9pZC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldEVudlZhcmlhYmxlKGVudktleSkge1xuICB2YXIgYXJlRW52VmFyc0F2YWlsYWJsZSA9ICEhKFxuICAgIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHByb2Nlc3MgJiZcbiAgICBwcm9jZXNzLmVudlxuICApXG5cbiAgaWYgKGFyZUVudlZhcnNBdmFpbGFibGUgJiYgcHJvY2Vzcy5lbnZbZW52S2V5XSAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52W2VudktleV1cbiAgfVxufVxuXG4vKipcbiAqIEphdmFTY3JpcHQgQ2xpZW50IERldGVjdGlvblxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0QnJvd3NlckRldGFpbHMoKSB7XG4gIHZhciBicm93c2VyID0gbmF2aWdhdG9yLmFwcE5hbWVcbiAgdmFyIGJyb3dzZXJWZXJzaW9uID0gJycgKyBwYXJzZUZsb2F0KG5hdmlnYXRvci5hcHBWZXJzaW9uKVxuICB2YXIgbmFtZU9mZnNldCwgdmVyT2Zmc2V0LCBpeFxuXG4gIC8vIE9wZXJhXG4gIGlmICgodmVyT2Zmc2V0ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdPcGVyYScpKSAhPSAtMSkge1xuICAgIGJyb3dzZXIgPSAnT3BlcmEnXG4gICAgYnJvd3NlclZlcnNpb24gPSBuYXZpZ2F0b3IudXNlckFnZW50LnN1YnN0cmluZyh2ZXJPZmZzZXQgKyA2KVxuICAgIGlmICgodmVyT2Zmc2V0ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdWZXJzaW9uJykpICE9IC0xKSB7XG4gICAgICBicm93c2VyVmVyc2lvbiA9IG5hdmlnYXRvci51c2VyQWdlbnQuc3Vic3RyaW5nKHZlck9mZnNldCArIDgpXG4gICAgfVxuICB9XG4gIC8vIE1TSUVcbiAgZWxzZSBpZiAoKHZlck9mZnNldCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignTVNJRScpKSAhPSAtMSkge1xuICAgIGJyb3dzZXIgPSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJ1xuICAgIGJyb3dzZXJWZXJzaW9uID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5zdWJzdHJpbmcodmVyT2Zmc2V0ICsgNSlcbiAgfVxuXG4gIC8vSUUgMTEgbm8gbG9uZ2VyIGlkZW50aWZpZXMgaXRzZWxmIGFzIE1TIElFLCBzbyB0cmFwIGl0XG4gIC8vaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNzkwNzQ0NS9ob3ctdG8tZGV0ZWN0LWllMTFcbiAgZWxzZSBpZiAoXG4gICAgYnJvd3NlciA9PSAnTmV0c2NhcGUnICYmXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdUcmlkZW50LycpICE9IC0xXG4gICkge1xuICAgIGJyb3dzZXIgPSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJ1xuICAgIGJyb3dzZXJWZXJzaW9uID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5zdWJzdHJpbmcodmVyT2Zmc2V0ICsgNSlcbiAgICBpZiAoKHZlck9mZnNldCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigncnY6JykpICE9IC0xKSB7XG4gICAgICBicm93c2VyVmVyc2lvbiA9IG5hdmlnYXRvci51c2VyQWdlbnQuc3Vic3RyaW5nKHZlck9mZnNldCArIDMpXG4gICAgfVxuICB9XG5cbiAgLy8gQ2hyb21lXG4gIGVsc2UgaWYgKCh2ZXJPZmZzZXQgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0Nocm9tZScpKSAhPSAtMSkge1xuICAgIGJyb3dzZXIgPSAnQ2hyb21lJ1xuICAgIGJyb3dzZXJWZXJzaW9uID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5zdWJzdHJpbmcodmVyT2Zmc2V0ICsgNylcbiAgfVxuICAvLyBTYWZhcmlcbiAgZWxzZSBpZiAoKHZlck9mZnNldCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykpICE9IC0xKSB7XG4gICAgYnJvd3NlciA9ICdTYWZhcmknXG4gICAgYnJvd3NlclZlcnNpb24gPSBuYXZpZ2F0b3IudXNlckFnZW50LnN1YnN0cmluZyh2ZXJPZmZzZXQgKyA3KVxuICAgIGlmICgodmVyT2Zmc2V0ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdWZXJzaW9uJykpICE9IC0xKSB7XG4gICAgICBicm93c2VyVmVyc2lvbiA9IG5hdmlnYXRvci51c2VyQWdlbnQuc3Vic3RyaW5nKHZlck9mZnNldCArIDgpXG4gICAgfVxuXG4gICAgLy8gQ2hyb21lIG9uIGlQYWQgaWRlbnRpZmllcyBpdHNlbGYgYXMgU2FmYXJpLiBBY3R1YWwgcmVzdWx0cyBkbyBub3QgbWF0Y2ggd2hhdCBHb29nbGUgY2xhaW1zXG4gICAgLy8gIGF0OiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9jaHJvbWUvbW9iaWxlL2RvY3MvdXNlci1hZ2VudD9obD1qYVxuICAgIC8vICBObyBtZW50aW9uIG9mIGNocm9tZSBpbiB0aGUgdXNlciBhZ2VudCBzdHJpbmcuIEhvd2V2ZXIgaXQgZG9lcyBtZW50aW9uIENyaU9TLCB3aGljaCBwcmVzdW1hYmx5XG4gICAgLy8gIGNhbiBiZSBrZXllZCBvbiB0byBkZXRlY3QgaXQuXG4gICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ3JpT1MnKSAhPSAtMSkge1xuICAgICAgLy9DaHJvbWUgb24gaVBhZCBzcG9vZmluZyBTYWZhcmkuLi5jb3JyZWN0IGl0LlxuICAgICAgYnJvd3NlciA9ICdDaHJvbWUnXG4gICAgICAvL0Rvbid0IGJlbGlldmUgdGhlcmUgaXMgYSB3YXkgdG8gZ3JhYiB0aGUgYWNjdXJhdGUgdmVyc2lvbiBudW1iZXIsIHNvIGxlYXZpbmcgdGhhdCBmb3Igbm93LlxuICAgIH1cbiAgfVxuICAvLyBGaXJlZm94XG4gIGVsc2UgaWYgKCh2ZXJPZmZzZXQgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSkgIT0gLTEpIHtcbiAgICBicm93c2VyID0gJ0ZpcmVmb3gnXG4gICAgYnJvd3NlclZlcnNpb24gPSBuYXZpZ2F0b3IudXNlckFnZW50LnN1YnN0cmluZyh2ZXJPZmZzZXQgKyA4KVxuICB9XG4gIC8vIE90aGVyIGJyb3dzZXJzXG4gIGVsc2UgaWYgKFxuICAgIChuYW1lT2Zmc2V0ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5sYXN0SW5kZXhPZignICcpICsgMSkgPFxuICAgICh2ZXJPZmZzZXQgPSBuYXZpZ2F0b3IudXNlckFnZW50Lmxhc3RJbmRleE9mKCcvJykpXG4gICkge1xuICAgIGJyb3dzZXIgPSBuYXZpZ2F0b3IudXNlckFnZW50LnN1YnN0cmluZyhuYW1lT2Zmc2V0LCB2ZXJPZmZzZXQpXG4gICAgYnJvd3NlclZlcnNpb24gPSBuYXZpZ2F0b3IudXNlckFnZW50LnN1YnN0cmluZyh2ZXJPZmZzZXQgKyAxKVxuICAgIGlmIChicm93c2VyLnRvTG93ZXJDYXNlKCkgPT0gYnJvd3Nlci50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICBicm93c2VyID0gbmF2aWdhdG9yLmFwcE5hbWVcbiAgICB9XG4gIH1cbiAgLy8gdHJpbSB0aGUgYnJvd3NlciB2ZXJzaW9uIHN0cmluZ1xuICBpZiAoKGl4ID0gYnJvd3NlclZlcnNpb24uaW5kZXhPZignOycpKSAhPSAtMSlcbiAgICBicm93c2VyVmVyc2lvbiA9IGJyb3dzZXJWZXJzaW9uLnN1YnN0cmluZygwLCBpeClcbiAgaWYgKChpeCA9IGJyb3dzZXJWZXJzaW9uLmluZGV4T2YoJyAnKSkgIT0gLTEpXG4gICAgYnJvd3NlclZlcnNpb24gPSBicm93c2VyVmVyc2lvbi5zdWJzdHJpbmcoMCwgaXgpXG4gIGlmICgoaXggPSBicm93c2VyVmVyc2lvbi5pbmRleE9mKCcpJykpICE9IC0xKVxuICAgIGJyb3dzZXJWZXJzaW9uID0gYnJvd3NlclZlcnNpb24uc3Vic3RyaW5nKDAsIGl4KVxuXG4gIHJldHVybiBbYnJvd3NlciwgYnJvd3NlclZlcnNpb25dLmpvaW4oJy0nKVxufVxuXG5mdW5jdGlvbiBnZXRCcm93c2VyT3NEZXRhaWxzKCkge1xuICB2YXIgb3MgPSAndW5rbm93bidcbiAgdmFyIGNsaWVudFN0cmluZ3MgPSBbXG4gICAgeyBzOiAnV2luZG93cyAxMCcsIHI6IC8oV2luZG93cyAxMC4wfFdpbmRvd3MgTlQgMTAuMCkvIH0sXG4gICAgeyBzOiAnV2luZG93cyA4LjEnLCByOiAvKFdpbmRvd3MgOC4xfFdpbmRvd3MgTlQgNi4zKS8gfSxcbiAgICB7IHM6ICdXaW5kb3dzIDgnLCByOiAvKFdpbmRvd3MgOHxXaW5kb3dzIE5UIDYuMikvIH0sXG4gICAgeyBzOiAnV2luZG93cyA3JywgcjogLyhXaW5kb3dzIDd8V2luZG93cyBOVCA2LjEpLyB9LFxuICAgIHsgczogJ1dpbmRvd3MgVmlzdGEnLCByOiAvV2luZG93cyBOVCA2LjAvIH0sXG4gICAgeyBzOiAnV2luZG93cyBTZXJ2ZXIgMjAwMycsIHI6IC9XaW5kb3dzIE5UIDUuMi8gfSxcbiAgICB7IHM6ICdXaW5kb3dzIFhQJywgcjogLyhXaW5kb3dzIE5UIDUuMXxXaW5kb3dzIFhQKS8gfSxcbiAgICB7IHM6ICdXaW5kb3dzIDIwMDAnLCByOiAvKFdpbmRvd3MgTlQgNS4wfFdpbmRvd3MgMjAwMCkvIH0sXG4gICAgeyBzOiAnV2luZG93cyBNRScsIHI6IC8oV2luIDl4IDQuOTB8V2luZG93cyBNRSkvIH0sXG4gICAgeyBzOiAnV2luZG93cyA5OCcsIHI6IC8oV2luZG93cyA5OHxXaW45OCkvIH0sXG4gICAgeyBzOiAnV2luZG93cyA5NScsIHI6IC8oV2luZG93cyA5NXxXaW45NXxXaW5kb3dzXzk1KS8gfSxcbiAgICB7IHM6ICdXaW5kb3dzIE5UIDQuMCcsIHI6IC8oV2luZG93cyBOVCA0LjB8V2luTlQ0LjB8V2luTlR8V2luZG93cyBOVCkvIH0sXG4gICAgeyBzOiAnV2luZG93cyBDRScsIHI6IC9XaW5kb3dzIENFLyB9LFxuICAgIHsgczogJ1dpbmRvd3MgMy4xMScsIHI6IC9XaW4xNi8gfSxcbiAgICB7IHM6ICdBbmRyb2lkJywgcjogL0FuZHJvaWQvIH0sXG4gICAgeyBzOiAnT3BlbiBCU0QnLCByOiAvT3BlbkJTRC8gfSxcbiAgICB7IHM6ICdTdW4gT1MnLCByOiAvU3VuT1MvIH0sXG4gICAgeyBzOiAnQ2hyb21lIE9TJywgcjogL0NyT1MvIH0sXG4gICAgeyBzOiAnTGludXgnLCByOiAvKExpbnV4fFgxMSg/IS4qQ3JPUykpLyB9LFxuICAgIHsgczogJ2lPUycsIHI6IC8oaVBob25lfGlQYWR8aVBvZCkvIH0sXG4gICAgeyBzOiAnTWFjIE9TIFgnLCByOiAvTWFjIE9TIFgvIH0sXG4gICAgeyBzOiAnTWFjIE9TJywgcjogLyhNYWMgT1N8TWFjUFBDfE1hY0ludGVsfE1hY19Qb3dlclBDfE1hY2ludG9zaCkvIH0sXG4gICAgeyBzOiAnUU5YJywgcjogL1FOWC8gfSxcbiAgICB7IHM6ICdVTklYJywgcjogL1VOSVgvIH0sXG4gICAgeyBzOiAnQmVPUycsIHI6IC9CZU9TLyB9LFxuICAgIHsgczogJ09TLzInLCByOiAvT1NcXC8yLyB9LFxuICAgIHtcbiAgICAgIHM6ICdTZWFyY2ggQm90JyxcbiAgICAgIHI6IC8obnVoa3xHb29nbGVib3R8WWFtbXlib3R8T3BlbmJvdHxTbHVycHxNU05Cb3R8QXNrIEplZXZlc1xcL1Rlb21hfGlhX2FyY2hpdmVyKS8sXG4gICAgfSxcbiAgXVxuICBmb3IgKHZhciBpZCBpbiBjbGllbnRTdHJpbmdzKSB7XG4gICAgdmFyIGNzID0gY2xpZW50U3RyaW5nc1tpZF1cbiAgICBpZiAoY3Muci50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgICBvcyA9IGNzLnNcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgdmFyIG9zVmVyc2lvbiA9ICd1bmtub3duJ1xuXG4gIGlmICgvV2luZG93cy8udGVzdChvcykpIHtcbiAgICBvc1ZlcnNpb24gPSAvV2luZG93cyAoLiopLy5leGVjKG9zKVsxXVxuICAgIG9zID0gJ1dpbmRvd3MnXG4gIH1cblxuICBzd2l0Y2ggKG9zKSB7XG4gICAgY2FzZSAnTWFjIE9TJzpcbiAgICBjYXNlICdNYWMgT1MgWCc6XG4gICAgY2FzZSAnQW5kcm9pZCc6XG4gICAgICBvc1ZlcnNpb24gPSAvKD86QW5kcm9pZHxNYWMgT1N8TWFjIE9TIFh8TWFjUFBDfE1hY0ludGVsfE1hY19Qb3dlclBDfE1hY2ludG9zaCkgKFtcXC5cXF9cXGRdKykvLmV4ZWMoXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnRcbiAgICAgIClbMV1cbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlICdpT1MnOlxuICAgICAgb3NWZXJzaW9uID0gL09TIChcXGQrKV8oXFxkKylfPyhcXGQrKT8vLmV4ZWMobmF2aWdhdG9yLmFwcFZlcnNpb24pXG4gICAgICBvc1ZlcnNpb24gPSBvc1ZlcnNpb25bMV0gKyAnLicgKyBvc1ZlcnNpb25bMl0gKyAnLicgKyAob3NWZXJzaW9uWzNdIHwgMClcbiAgICAgIGJyZWFrXG4gIH1cbiAgcmV0dXJuIFtvcywgb3NWZXJzaW9uXS5qb2luKCctJylcbn1cblxuLyoqXG4gKiBGb3IgY2hlY2tpbmcgcHJvY2Vzcy5lbnYgYWx3YXlzIHVzZSBgaGFzT3duUHJvcGVydHlgXG4gKiBTb21lIHByb3ZpZGVycyBjb3VsZCB0aHJvdyBhbiBlcnJvciB3aGVuIHRyeWluZyB0byBhY2Nlc3MgZW52IHZhcmlhYmxlcyB0aGF0IGRvZXMgbm90IGV4aXN0c1xuICogQHByaXZhdGUgKi9cbmZ1bmN0aW9uIGdldE5vZGVSdW50aW1lRW52KCkge1xuICB2YXIgcnVudGltZUVudnMgPSBbXG4gICAge1xuICAgICAgbmFtZTogJ05ldGxpZnknLFxuICAgICAgY2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuaGFzT3duUHJvcGVydHkoJ05FVExJRllfSU1BR0VTX0NETl9ET01BSU4nKVxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdWZXJjZWwnLFxuICAgICAgY2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuaGFzT3duUHJvcGVydHkoJ1ZFUkNFTCcpXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0hlcm9rdScsXG4gICAgICBjaGVjazogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuaGFzT3duUHJvcGVydHkoJ1BBVEgnKSAmJlxuICAgICAgICAgIHByb2Nlc3MuZW52LlBBVEguaW5kZXhPZignLmhlcm9rdScpICE9PSAtMVxuICAgICAgICApXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0FXUyBMYW1iZGEnLFxuICAgICAgY2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuaGFzT3duUHJvcGVydHkoJ0FXU19MQU1CREFfRlVOQ1RJT05fVkVSU0lPTicpXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0dDUCBDbG91ZCBGdW5jdGlvbnMnLFxuICAgICAgY2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHByb2Nlc3MuZW52Lmhhc093blByb3BlcnR5KCdfJykgJiZcbiAgICAgICAgICBwcm9jZXNzLmVudi5fLmluZGV4T2YoJ2dvb2dsZScpICE9PSAtMVxuICAgICAgICApXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0dDUCBDb21wdXRlIEluc3RhbmNlcycsXG4gICAgICBjaGVjazogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwcm9jZXNzLmVudi5oYXNPd25Qcm9wZXJ0eSgnR09PR0xFX0NMT1VEX1BST0pFQ1QnKVxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdBenVyZSBDbG91ZCBGdW5jdGlvbnMnLFxuICAgICAgY2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuaGFzT3duUHJvcGVydHkoXG4gICAgICAgICAgJ1dFQlNJVEVfRlVOQ1RJT05TX0FaVVJFTU9OSVRPUl9DQVRFR09SSUVTJ1xuICAgICAgICApXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0F6dXJlIENvbXB1dGUnLFxuICAgICAgY2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHByb2Nlc3MuZW52Lmhhc093blByb3BlcnR5KCdPUllYX0VOVl9UWVBFJykgJiZcbiAgICAgICAgICBwcm9jZXNzLmVudi5oYXNPd25Qcm9wZXJ0eSgnV0VCU0lURV9JTlNUQU5DRV9JRCcpICYmXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuT1JZWF9FTlZfVFlQRSA9PT0gJ0FwcFNlcnZpY2UnXG4gICAgICAgIClcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnTW9uZ28gU3RpdGNoJyxcbiAgICAgIGNoZWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBjcm9zc0dsb2JhbC5TdGl0Y2hFcnJvciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdSZW5kZXInLFxuICAgICAgY2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuaGFzT3duUHJvcGVydHkoJ1JFTkRFUl9TRVJWSUNFX0lEJylcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnQmVnaW4nLFxuICAgICAgY2hlY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuaGFzT3duUHJvcGVydHkoJ0JFR0lOX0RBVEFfU0NPUEVfSUQnKVxuICAgICAgfSxcbiAgICB9LFxuICBdXG4gIHZhciBkZXRlY3RlZEVudiA9IHJ1bnRpbWVFbnZzLmZpbmQoZW52ID0+IGVudi5jaGVjaygpKVxuXG4gIHJldHVybiBkZXRlY3RlZEVudiA/IGRldGVjdGVkRW52Lm5hbWUgOiAndW5rbm93bidcbn1cblxuLyoqXG4gKiBJZiBkZWZpbmVkLCByZXR1cm5zIHRoZSBnaXZlbiB2YWx1ZS4gT3RoZXJ3aXNlLCByZXR1cm5zIHRoZSBkZWZhdWx0IHZhbHVlLlxuICogQHBhcmFtIHthbnl9IG9iaiBUaGUgZ2l2ZW4gdmFsdWUuXG4gKiBAcGFyYW0ge2FueX0gZGVmIFRoZSBkZWZhdWx0IHZhbHVlLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdHMob2JqLCBkZWYpIHtcbiAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGRlZlxuICB9IGVsc2Uge1xuICAgIHJldHVybiBvYmpcbiAgfVxufVxuXG4vKipcbiAqIFVzZWQgZm9yIGZ1bmN0aW9ucyB0aGF0IHRha2UgYW4gb3B0aW9ucyBvYmplY3RzLlxuICogRmlsbHMgaW4gZGVmYXVsdHMgZm9yIG9wdGlvbnMgbm90IHByb3ZpZGVkLlxuICogVGhyb3dzIGVycm9ycyBmb3IgcHJvdmlkZWQgb3B0aW9ucyB0aGF0IGFyZW4ndCByZWNvZ25pemVkLlxuICogQSBkZWZhdWx0IHZhbHVlIG9mIGB1bmRlZmluZWRgIGlzIHVzZWQgdG8gaW5kaWNhdGUgdGhhdCB0aGUgb3B0aW9uIG11c3QgYmUgcHJvdmlkZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhcHBseURlZmF1bHRzKHByb3ZpZGVkLCBkZWZhdWx0cykge1xuICB2YXIgb3V0ID0ge31cblxuICBmb3IgKHZhciBwcm92aWRlZEtleSBpbiBwcm92aWRlZCkge1xuICAgIGlmICghKHByb3ZpZGVkS2V5IGluIGRlZmF1bHRzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzdWNoIG9wdGlvbiAnICsgcHJvdmlkZWRLZXkpXG4gICAgfVxuICAgIG91dFtwcm92aWRlZEtleV0gPSBwcm92aWRlZFtwcm92aWRlZEtleV1cbiAgfVxuXG4gIGZvciAodmFyIGRlZmF1bHRzS2V5IGluIGRlZmF1bHRzKSB7XG4gICAgaWYgKCEoZGVmYXVsdHNLZXkgaW4gb3V0KSkge1xuICAgICAgb3V0W2RlZmF1bHRzS2V5XSA9IGRlZmF1bHRzW2RlZmF1bHRzS2V5XVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvdXRcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRob3V0IGFueSBrZXlzIHdoZXJlIHRoZSB2YWx1ZSB3b3VsZCBiZSBudWxsIG9yIHVuZGVmaW5lZC5cbiAqIEBwcml2YXRlXG4gKiAqL1xuZnVuY3Rpb24gcmVtb3ZlTnVsbEFuZFVuZGVmaW5lZFZhbHVlcyhvYmplY3QpIHtcbiAgdmFyIHJlcyA9IHt9XG4gIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICB2YXIgdmFsID0gb2JqZWN0W2tleV1cbiAgICBpZiAodmFsICE9PSBudWxsICYmIHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXNba2V5XSA9IHZhbFxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aG91dCBhbnkga2V5cyB3aGVyZSB0aGUgdmFsdWUgd291bGQgYmUgdW5kZWZpbmVkLlxuICogQHByaXZhdGVcbiAqICovXG5mdW5jdGlvbiByZW1vdmVVbmRlZmluZWRWYWx1ZXMob2JqZWN0KSB7XG4gIHZhciByZXMgPSB7fVxuICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgdmFyIHZhbCA9IG9iamVjdFtrZXldXG4gICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXNba2V5XSA9IHZhbFxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbi8qKlxuICogUmV0dXJucyBhIGJvb2xlYW4gc3RhdGluZyBpZiB0aGUgZ2l2ZW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5XG4gKiBAcHJpdmF0ZVxuICogKi9cbmZ1bmN0aW9uIGNoZWNrSW5zdGFuY2VIYXNQcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbCAmJiBCb29sZWFuKG9ialtwcm9wXSlcbn1cblxuZnVuY3Rpb24gZm9ybWF0VXJsKGJhc2UsIHBhdGgsIHF1ZXJ5KSB7XG4gIHF1ZXJ5ID0gdHlwZW9mIHF1ZXJ5ID09PSAnb2JqZWN0JyA/IHF1ZXJ5c3RyaW5naWZ5KHF1ZXJ5KSA6IHF1ZXJ5XG4gIHJldHVybiBbXG4gICAgYmFzZSxcbiAgICBwYXRoID8gKHBhdGguY2hhckF0KDApID09PSAnLycgPyAnJyA6ICcvJyArIHBhdGgpIDogJycsXG4gICAgcXVlcnkgPyAocXVlcnkuY2hhckF0KDApID09PSAnPycgPyAnJyA6ICc/JyArIHF1ZXJ5KSA6ICcnLFxuICBdLmpvaW4oJycpXG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGEgcXVlcnkgc3RyaW5nIHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIE9iamVjdCB0aGF0IHNob3VsZCBiZSB0cmFuc2Zvcm1lZC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcmVmaXggT3B0aW9uYWwgcHJlZml4LlxuICogQHJldHVybnMge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5naWZ5KG9iaiwgcHJlZml4KSB7XG4gIHByZWZpeCA9IHByZWZpeCB8fCAnJ1xuXG4gIHZhciBwYWlycyA9IFtdLFxuICAgIHZhbHVlLFxuICAgIGtleVxuXG4gIC8vXG4gIC8vIE9wdGlvbmFsbHkgcHJlZml4IHdpdGggYSAnPycgaWYgbmVlZGVkXG4gIC8vXG4gIGlmICgnc3RyaW5nJyAhPT0gdHlwZW9mIHByZWZpeCkgcHJlZml4ID0gJz8nXG5cbiAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGNoZWNrSW5zdGFuY2VIYXNQcm9wZXJ0eShvYmosIGtleSkpIHtcbiAgICAgIHZhbHVlID0gb2JqW2tleV1cblxuICAgICAgLy9cbiAgICAgIC8vIEVkZ2UgY2FzZXMgd2hlcmUgd2UgYWN0dWFsbHkgd2FudCB0byBlbmNvZGUgdGhlIHZhbHVlIHRvIGFuIGVtcHR5XG4gICAgICAvLyBzdHJpbmcgaW5zdGVhZCBvZiB0aGUgc3RyaW5naWZpZWQgdmFsdWUuXG4gICAgICAvL1xuICAgICAgaWYgKCF2YWx1ZSAmJiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCBpc05hTih2YWx1ZSkpKSB7XG4gICAgICAgIHZhbHVlID0gJydcbiAgICAgIH1cblxuICAgICAga2V5ID0gZW5jb2RlKGtleSlcbiAgICAgIHZhbHVlID0gZW5jb2RlKHZhbHVlKVxuXG4gICAgICAvL1xuICAgICAgLy8gSWYgd2UgZmFpbGVkIHRvIGVuY29kZSB0aGUgc3RyaW5ncywgd2Ugc2hvdWxkIGJhaWwgb3V0IGFzIHdlIGRvbid0XG4gICAgICAvLyB3YW50IHRvIGFkZCBpbnZhbGlkIHN0cmluZ3MgdG8gdGhlIHF1ZXJ5LlxuICAgICAgLy9cbiAgICAgIGlmIChrZXkgPT09IG51bGwgfHwgdmFsdWUgPT09IG51bGwpIGNvbnRpbnVlXG4gICAgICBwYWlycy5wdXNoKGtleSArICc9JyArIHZhbHVlKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYWlycy5sZW5ndGggPyBwcmVmaXggKyBwYWlycy5qb2luKCcmJykgOiAnJ1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuY29kZSBhIGdpdmVuIGlucHV0LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIHRoYXQgbmVlZHMgdG8gYmUgZW5jb2RlZC5cbiAqIEByZXR1cm5zIHtTdHJpbmd8TnVsbH0gVGhlIGVuY29kZWQgc3RyaW5nLlxuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVuY29kZShpbnB1dCkge1xuICB0cnkge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoaW5wdXQpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9iamVjdHMgaW50byBvbmVcbiAqIEBwYXJhbSBvYmoxXG4gKiBAcGFyYW0gb2JqMlxuICogQHJldHVybnMgb2JqMyBhIG5ldyBvYmplY3QgYmFzZWQgb24gb2JqMSBhbmQgb2JqMlxuICovXG5mdW5jdGlvbiBtZXJnZU9iamVjdHMob2JqMSwgb2JqMikge1xuICB2YXIgb2JqMyA9IHt9XG4gIGZvciAodmFyIGF0dHJuYW1lIGluIG9iajEpIHtcbiAgICBvYmozW2F0dHJuYW1lXSA9IG9iajFbYXR0cm5hbWVdXG4gIH1cbiAgZm9yICh2YXIgYXR0cm5hbWUgaW4gb2JqMikge1xuICAgIG9iajNbYXR0cm5hbWVdID0gb2JqMlthdHRybmFtZV1cbiAgfVxuICByZXR1cm4gb2JqM1xufVxuXG4vKipcbiAqIFJlc29sdmVzIHdoaWNoIEZldGNoIEFQSSBjb21wYXRpYmxlIGZ1bmN0aW9uIHRvIHVzZS4gSWYgYW4gb3ZlcnJpZGUgaXNcbiAqIHByb3ZpZGVkLCByZXR1cm5zIHRoZSBvdmVycmlkZS4gSWYgbm8gb3ZlcnJpZGUgYW5kIHRoZSBnbG9iYWwgKHdpbmRvdykgaGFzXG4gKiBcImZldGNoXCIgcHJvcGVydHksIHJldHVybiB0aGUgbmF0aXZlIGZldGNoLiBPdGhlcndpc2UgcmV0dXJucyB0aGUgY3Jvc3MtZmV0Y2ggcG9seWZpbGwuXG4gKlxuICogQHBhcmFtIHs/ZnVuY3Rpb259IGZldGNoT3ZlcnJpZGUgQW4gRmV0Y2ggQVBJIGNvbXBhdGlibGUgZnVuY3Rpb24gdG8gdXNlLlxuICogQHJldHVybnMge2Z1bmN0aW9ufSBBIEZldGNoIEFQSSBjb21wYXRpYmxlIGZ1bmN0aW9uLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZUZldGNoKGZldGNoT3ZlcnJpZGUpIHtcbiAgaWYgKHR5cGVvZiBmZXRjaE92ZXJyaWRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZldGNoT3ZlcnJpZGVcbiAgfVxuXG4gIGlmICh0eXBlb2YgY3Jvc3NHbG9iYWwuZmV0Y2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBOQi4gUmViaW5kaW5nIHRvIGdsb2JhbCBpcyBuZWVkZWQgZm9yIFNhZmFyaVxuICAgIHJldHVybiBjcm9zc0dsb2JhbC5mZXRjaC5iaW5kKGNyb3NzR2xvYmFsKVxuICB9XG5cbiAgcmV0dXJuIHJlcXVpcmUoJ2Nyb3NzLWZldGNoJylcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyb3NzR2xvYmFsOiBjcm9zc0dsb2JhbCxcbiAgbWVyZ2VPYmplY3RzOiBtZXJnZU9iamVjdHMsXG4gIGZvcm1hdFVybDogZm9ybWF0VXJsLFxuICBxdWVyeXN0cmluZ2lmeTogcXVlcnlzdHJpbmdpZnksXG4gIGluaGVyaXRzOiBpbmhlcml0cyxcbiAgaXNOb2RlRW52OiBpc05vZGVFbnYsXG4gIGdldEVudlZhcmlhYmxlOiBnZXRFbnZWYXJpYWJsZSxcbiAgZGVmYXVsdHM6IGRlZmF1bHRzLFxuICBhcHBseURlZmF1bHRzOiBhcHBseURlZmF1bHRzLFxuICByZW1vdmVOdWxsQW5kVW5kZWZpbmVkVmFsdWVzOiByZW1vdmVOdWxsQW5kVW5kZWZpbmVkVmFsdWVzLFxuICByZW1vdmVVbmRlZmluZWRWYWx1ZXM6IHJlbW92ZVVuZGVmaW5lZFZhbHVlcyxcbiAgY2hlY2tJbnN0YW5jZUhhc1Byb3BlcnR5OiBjaGVja0luc3RhbmNlSGFzUHJvcGVydHksXG4gIGdldEJyb3dzZXJEZXRhaWxzOiBnZXRCcm93c2VyRGV0YWlscyxcbiAgZ2V0QnJvd3Nlck9zRGV0YWlsczogZ2V0QnJvd3Nlck9zRGV0YWlscyxcbiAgZ2V0Tm9kZVJ1bnRpbWVFbnY6IGdldE5vZGVSdW50aW1lRW52LFxuICByZXNvbHZlRmV0Y2g6IHJlc29sdmVGZXRjaCxcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/_util.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/clientLogger.js":
/*!**************************************************!*\
  !*** ./node_modules/faunadb/src/clientLogger.js ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar json = __webpack_require__(/*! ./_json */ \"(ssr)/./node_modules/faunadb/src/_json.js\")\n\n/**\n * Functions to assist with debug logging.\n * @module clientLogger\n */\n\n/**\n * A user provided log line handler.\n *\n * @callback loggerCallback\n * @param {string} logged\n */\n\n/**\n * Function that can be the `observer` for a {@link Client}.\n * Will call `loggerFunction` with a string representation of each {@link RequestResult}.\n *\n * An example logging string:\n * ```plain\n * Fauna POST /\n * Request JSON: {\n *   \"data\": ...\n * }\n * Response headers: {\n *    \"x-faunadb-host\": ...,\n *    \"x-faunadb-build\": ...,\n *    \"connection\": \"close\",\n *    \"content-length\": ...,\n *    \"content-type\": \"application/json;charset=utf-8\"\n *  }\n * Response JSON: {\n *    \"resource\": {\n *      \"ref\": { ... },\n *      \"class\": { ... },\n *      \"ts\": ...\n *    }\n *  }\n * Response (201): Network latency 13ms\n * ```\n *\n * @param {loggerCallback} loggerFunction\n * @return {Client~observerCallback}\n * @example\n * var client = new Client({\n *   ... other options ...\n *   observer: logger(console.log)\n * })\n * client.ping() // Logs the request and response.\n */\nfunction logger(loggerFunction) {\n  return function(requestResult, client) {\n    return loggerFunction(showRequestResult(requestResult), client)\n  }\n}\n\n/**\n * Convenience function used by {@link logger} to transform a {@link RequestResult}\n * to a string for logging.\n * @param {RequestResult} requestResult\n * @returns {string} string to be logged.\n */\nfunction showRequestResult(requestResult) {\n  var query = requestResult.query,\n    method = requestResult.method,\n    path = requestResult.path,\n    requestContent = requestResult.requestContent,\n    responseHeaders = requestResult.responseHeaders,\n    responseContent = requestResult.responseContent,\n    statusCode = requestResult.statusCode,\n    timeTaken = requestResult.timeTaken\n\n  var out = ''\n\n  function log(str) {\n    out = out + str\n  }\n\n  log('Fauna ' + method + ' /' + path + _queryString(query) + '\\n')\n  if (requestContent != null) {\n    log('  Request JSON: ' + _showJSON(requestContent) + '\\n')\n  }\n  log('  Response headers: ' + _showJSON(responseHeaders) + '\\n')\n  log('  Response JSON: ' + _showJSON(responseContent) + '\\n')\n  log('  Response (' + statusCode + '): Network latency ' + timeTaken + 'ms\\n')\n\n  return out\n}\n\nfunction _indent(str) {\n  var indentStr = '  '\n  return str.split('\\n').join('\\n' + indentStr)\n}\n\nfunction _showJSON(object) {\n  return _indent(json.toJSON(object, true))\n}\n\nfunction _queryString(query) {\n  if (query == null) {\n    return ''\n  }\n\n  var keys = Object.keys(query)\n  if (keys.length === 0) {\n    return ''\n  }\n\n  var pairs = keys.map(function(key) {\n    return key + '=' + query[key]\n  })\n  return '?' + pairs.join('&')\n}\n\nmodule.exports = {\n  logger: logger,\n  showRequestResult: showRequestResult,\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvY2xpZW50TG9nZ2VyLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLFdBQVcsbUJBQU8sQ0FBQywwREFBUzs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7O0FBRUE7QUFDQSw4Q0FBOEMsYUFBYTtBQUMzRCxvRUFBb0Usb0JBQW9CO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsS0FBSztBQUN0QixtQkFBbUIsS0FBSztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMsY0FBYyxnQkFBZ0I7QUFDL0Q7QUFDQSxXQUFXLGVBQWU7QUFDMUIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9va2Jvb2tzaG9wbmcvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvY2xpZW50TG9nZ2VyLmpzPzZlZDAiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbnZhciBqc29uID0gcmVxdWlyZSgnLi9fanNvbicpXG5cbi8qKlxuICogRnVuY3Rpb25zIHRvIGFzc2lzdCB3aXRoIGRlYnVnIGxvZ2dpbmcuXG4gKiBAbW9kdWxlIGNsaWVudExvZ2dlclxuICovXG5cbi8qKlxuICogQSB1c2VyIHByb3ZpZGVkIGxvZyBsaW5lIGhhbmRsZXIuXG4gKlxuICogQGNhbGxiYWNrIGxvZ2dlckNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9nZ2VkXG4gKi9cblxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IGNhbiBiZSB0aGUgYG9ic2VydmVyYCBmb3IgYSB7QGxpbmsgQ2xpZW50fS5cbiAqIFdpbGwgY2FsbCBgbG9nZ2VyRnVuY3Rpb25gIHdpdGggYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZWFjaCB7QGxpbmsgUmVxdWVzdFJlc3VsdH0uXG4gKlxuICogQW4gZXhhbXBsZSBsb2dnaW5nIHN0cmluZzpcbiAqIGBgYHBsYWluXG4gKiBGYXVuYSBQT1NUIC9cbiAqIFJlcXVlc3QgSlNPTjoge1xuICogICBcImRhdGFcIjogLi4uXG4gKiB9XG4gKiBSZXNwb25zZSBoZWFkZXJzOiB7XG4gKiAgICBcIngtZmF1bmFkYi1ob3N0XCI6IC4uLixcbiAqICAgIFwieC1mYXVuYWRiLWJ1aWxkXCI6IC4uLixcbiAqICAgIFwiY29ubmVjdGlvblwiOiBcImNsb3NlXCIsXG4gKiAgICBcImNvbnRlbnQtbGVuZ3RoXCI6IC4uLixcbiAqICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04XCJcbiAqICB9XG4gKiBSZXNwb25zZSBKU09OOiB7XG4gKiAgICBcInJlc291cmNlXCI6IHtcbiAqICAgICAgXCJyZWZcIjogeyAuLi4gfSxcbiAqICAgICAgXCJjbGFzc1wiOiB7IC4uLiB9LFxuICogICAgICBcInRzXCI6IC4uLlxuICogICAgfVxuICogIH1cbiAqIFJlc3BvbnNlICgyMDEpOiBOZXR3b3JrIGxhdGVuY3kgMTNtc1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtsb2dnZXJDYWxsYmFja30gbG9nZ2VyRnVuY3Rpb25cbiAqIEByZXR1cm4ge0NsaWVudH5vYnNlcnZlckNhbGxiYWNrfVxuICogQGV4YW1wbGVcbiAqIHZhciBjbGllbnQgPSBuZXcgQ2xpZW50KHtcbiAqICAgLi4uIG90aGVyIG9wdGlvbnMgLi4uXG4gKiAgIG9ic2VydmVyOiBsb2dnZXIoY29uc29sZS5sb2cpXG4gKiB9KVxuICogY2xpZW50LnBpbmcoKSAvLyBMb2dzIHRoZSByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqL1xuZnVuY3Rpb24gbG9nZ2VyKGxvZ2dlckZ1bmN0aW9uKSB7XG4gIHJldHVybiBmdW5jdGlvbihyZXF1ZXN0UmVzdWx0LCBjbGllbnQpIHtcbiAgICByZXR1cm4gbG9nZ2VyRnVuY3Rpb24oc2hvd1JlcXVlc3RSZXN1bHQocmVxdWVzdFJlc3VsdCksIGNsaWVudClcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHVzZWQgYnkge0BsaW5rIGxvZ2dlcn0gdG8gdHJhbnNmb3JtIGEge0BsaW5rIFJlcXVlc3RSZXN1bHR9XG4gKiB0byBhIHN0cmluZyBmb3IgbG9nZ2luZy5cbiAqIEBwYXJhbSB7UmVxdWVzdFJlc3VsdH0gcmVxdWVzdFJlc3VsdFxuICogQHJldHVybnMge3N0cmluZ30gc3RyaW5nIHRvIGJlIGxvZ2dlZC5cbiAqL1xuZnVuY3Rpb24gc2hvd1JlcXVlc3RSZXN1bHQocmVxdWVzdFJlc3VsdCkge1xuICB2YXIgcXVlcnkgPSByZXF1ZXN0UmVzdWx0LnF1ZXJ5LFxuICAgIG1ldGhvZCA9IHJlcXVlc3RSZXN1bHQubWV0aG9kLFxuICAgIHBhdGggPSByZXF1ZXN0UmVzdWx0LnBhdGgsXG4gICAgcmVxdWVzdENvbnRlbnQgPSByZXF1ZXN0UmVzdWx0LnJlcXVlc3RDb250ZW50LFxuICAgIHJlc3BvbnNlSGVhZGVycyA9IHJlcXVlc3RSZXN1bHQucmVzcG9uc2VIZWFkZXJzLFxuICAgIHJlc3BvbnNlQ29udGVudCA9IHJlcXVlc3RSZXN1bHQucmVzcG9uc2VDb250ZW50LFxuICAgIHN0YXR1c0NvZGUgPSByZXF1ZXN0UmVzdWx0LnN0YXR1c0NvZGUsXG4gICAgdGltZVRha2VuID0gcmVxdWVzdFJlc3VsdC50aW1lVGFrZW5cblxuICB2YXIgb3V0ID0gJydcblxuICBmdW5jdGlvbiBsb2coc3RyKSB7XG4gICAgb3V0ID0gb3V0ICsgc3RyXG4gIH1cblxuICBsb2coJ0ZhdW5hICcgKyBtZXRob2QgKyAnIC8nICsgcGF0aCArIF9xdWVyeVN0cmluZyhxdWVyeSkgKyAnXFxuJylcbiAgaWYgKHJlcXVlc3RDb250ZW50ICE9IG51bGwpIHtcbiAgICBsb2coJyAgUmVxdWVzdCBKU09OOiAnICsgX3Nob3dKU09OKHJlcXVlc3RDb250ZW50KSArICdcXG4nKVxuICB9XG4gIGxvZygnICBSZXNwb25zZSBoZWFkZXJzOiAnICsgX3Nob3dKU09OKHJlc3BvbnNlSGVhZGVycykgKyAnXFxuJylcbiAgbG9nKCcgIFJlc3BvbnNlIEpTT046ICcgKyBfc2hvd0pTT04ocmVzcG9uc2VDb250ZW50KSArICdcXG4nKVxuICBsb2coJyAgUmVzcG9uc2UgKCcgKyBzdGF0dXNDb2RlICsgJyk6IE5ldHdvcmsgbGF0ZW5jeSAnICsgdGltZVRha2VuICsgJ21zXFxuJylcblxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIF9pbmRlbnQoc3RyKSB7XG4gIHZhciBpbmRlbnRTdHIgPSAnICAnXG4gIHJldHVybiBzdHIuc3BsaXQoJ1xcbicpLmpvaW4oJ1xcbicgKyBpbmRlbnRTdHIpXG59XG5cbmZ1bmN0aW9uIF9zaG93SlNPTihvYmplY3QpIHtcbiAgcmV0dXJuIF9pbmRlbnQoanNvbi50b0pTT04ob2JqZWN0LCB0cnVlKSlcbn1cblxuZnVuY3Rpb24gX3F1ZXJ5U3RyaW5nKHF1ZXJ5KSB7XG4gIGlmIChxdWVyeSA9PSBudWxsKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHF1ZXJ5KVxuICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIHZhciBwYWlycyA9IGtleXMubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBrZXkgKyAnPScgKyBxdWVyeVtrZXldXG4gIH0pXG4gIHJldHVybiAnPycgKyBwYWlycy5qb2luKCcmJylcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGxvZ2dlcjogbG9nZ2VyLFxuICBzaG93UmVxdWVzdFJlc3VsdDogc2hvd1JlcXVlc3RSZXN1bHQsXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/clientLogger.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/errors.js":
/*!********************************************!*\
  !*** ./node_modules/faunadb/src/errors.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar util = __webpack_require__(/*! ./_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\n\n/**\n * FaunaDB error types. Request errors can originate from the client (e.g. bad\n * method parameters) or from the FaunaDB Server (e.g. invalid queries,\n * timeouts.) Server errors will subclass {@link module:errors~FaunaHTTPError}.\n * Stream errors will subclass {@link module:errors~StreamError}.\n *\n * @module errors\n */\n\n/**\n * The base exception type for all FaunaDB errors.\n *\n * @param {string} message\n * @extends Error\n * @constructor\n */\nfunction FaunaError(name, message, description) {\n  Error.call(this)\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor)\n  } else this.stack = new Error().stack\n\n  /**\n   * Name of this exception.\n   * @type {string}\n   */\n  this.name = name\n\n  /**\n   * Message for this exception.\n   * @type {string}\n   */\n  this.message = message\n\n  /**\n   * Description for this exception.\n   * @type {string}\n   */\n  this.description = description\n}\n\nutil.inherits(FaunaError, Error)\n\n/**\n * Exception thrown by this client library when an invalid\n * value is provided as a function argument.\n *\n * @extends module:errors~FaunaError\n * @constructor\n */\nfunction InvalidValue(message) {\n  FaunaError.call(this, 'InvalidValue', message)\n}\n\nutil.inherits(InvalidValue, FaunaError)\n\n/**\n * Exception thrown by this client library when an invalid\n * value is provided as a function argument.\n *\n * @extends module:errors~FaunaError\n * @constructor\n */\nfunction InvalidArity(min, max, actual, callerFunc) {\n  var arityInfo = `${callerFunc} function requires ${messageForArity(\n    min,\n    max\n  )} argument(s) but ${actual} were given`\n  var documentationLink = logDocumentationLink(callerFunc)\n\n  FaunaError.call(this, 'InvalidArity', `${arityInfo}\\n${documentationLink}`)\n\n  /**\n   * Minimum number of arguments.\n   * @type {number}\n   */\n  this.min = min\n\n  /**\n   * Maximum number of arguments.\n   * @type {number}\n   */\n  this.max = max\n\n  /**\n   * Actual number of arguments called with.\n   * @type {number}\n   */\n  this.actual = actual\n\n  function messageForArity(min, max) {\n    if (max === null) return 'at least ' + min\n    if (min === null) return 'up to ' + max\n    if (min === max) return min\n    return 'from ' + min + ' to ' + max\n  }\n\n  function logDocumentationLink(functionName) {\n    var docsURL = 'https://docs.fauna.com/fauna/current/api/fql/functions/'\n    return `For more info, see the docs: ${docsURL}${functionName.toLowerCase()}`\n  }\n}\n\nutil.inherits(InvalidArity, FaunaError)\n\n/**\n * Base exception type for errors returned by the FaunaDB server.\n *\n * @param {RequestResult} requestResult\n *\n * @extends module:errors~FaunaError\n * @constructor\n */\nfunction FaunaHTTPError(name, requestResult) {\n  var response = requestResult.responseContent\n  var errors = response.errors\n  var message = errors.length === 0 ? '(empty \"errors\")' : errors[0].code\n  var description =\n    errors.length === 0 ? '(empty \"errors\")' : errors[0].description\n  FaunaError.call(this, name, message, description)\n\n  /**\n   * A wrapped {@link RequestResult} object, containing the request and response\n   * context of the failed request.\n   *\n   * @type {RequestResult}\n   */\n  this.requestResult = requestResult\n}\n\nutil.inherits(FaunaHTTPError, FaunaError)\n\n/**\n * Convenience method to return the errors from the response object.\n *\n * @returns {Object}\n */\nFaunaHTTPError.prototype.errors = function() {\n  return this.requestResult.responseContent.errors\n}\n\n/**\n * Takes a {@link RequestResult} and throws an appropriate exception if\n * it contains a failed request.\n *\n * @param requestResult {RequestResult}\n */\nFaunaHTTPError.raiseForStatusCode = function(requestResult) {\n  var code = requestResult.statusCode\n  if (code < 200 || code >= 300) {\n    switch (code) {\n      case 400:\n        throw new BadRequest(requestResult)\n      case 401:\n        throw new Unauthorized(requestResult)\n      case 403:\n        throw new PermissionDenied(requestResult)\n      case 404:\n        throw new NotFound(requestResult)\n      case 405:\n        throw new MethodNotAllowed(requestResult)\n      case 429:\n        throw new TooManyRequests(requestResult)\n      case 500:\n        throw new InternalError(requestResult)\n      case 503:\n        throw new UnavailableError(requestResult)\n      default:\n        throw new FaunaHTTPError('UnknownError', requestResult)\n    }\n  }\n}\n\n/**\n * A HTTP 400 error.\n *\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction BadRequest(requestResult) {\n  FaunaHTTPError.call(this, 'BadRequest', requestResult)\n}\n\nutil.inherits(BadRequest, FaunaHTTPError)\n\n/**\n * A HTTP 401 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction Unauthorized(requestResult) {\n  FaunaHTTPError.call(this, 'Unauthorized', requestResult)\n  this.message = this.message +=\n    '. Check that endpoint, schema, port and secret are correct during client’s instantiation'\n}\n\nutil.inherits(Unauthorized, FaunaHTTPError)\n\n/**\n * A HTTP 403 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction PermissionDenied(requestResult) {\n  FaunaHTTPError.call(this, 'PermissionDenied', requestResult)\n}\n\nutil.inherits(PermissionDenied, FaunaHTTPError)\n\n/**\n * A HTTP 404 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction NotFound(requestResult) {\n  FaunaHTTPError.call(this, 'NotFound', requestResult)\n}\n\nutil.inherits(NotFound, FaunaHTTPError)\n\n/**\n * A HTTP 405 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction MethodNotAllowed(requestResult) {\n  FaunaHTTPError.call(this, 'MethodNotAllowed', requestResult)\n}\n\nutil.inherits(MethodNotAllowed, FaunaHTTPError)\n\n/**\n * A HTTP 429 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction TooManyRequests(requestResult) {\n  FaunaHTTPError.call(this, 'TooManyRequests', requestResult)\n}\n\nutil.inherits(TooManyRequests, FaunaHTTPError)\n\n/**\n * A HTTP 500 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction InternalError(requestResult) {\n  FaunaHTTPError.call(this, 'InternalError', requestResult)\n}\n\nutil.inherits(InternalError, FaunaHTTPError)\n\n/**\n * A HTTP 503 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction UnavailableError(requestResult) {\n  FaunaHTTPError.call(this, 'UnavailableError', requestResult)\n}\n\nutil.inherits(UnavailableError, FaunaHTTPError)\n\n/**\n * The base exception type for all stream related errors.\n *\n * @constructor\n * @param {string} name The error class name.\n * @param {string} message The error message.\n * @param {string} description The error detailed description.\n * @extends module:errors~FaunaError\n */\nfunction StreamError(name, message, description) {\n  FaunaError.call(this, name, message, description)\n}\n\nutil.inherits(StreamError, FaunaError)\n\n/**\n * An error thrown by the client when streams are not supported by the current\n * platform.\n *\n * @constructor\n * @param {string} description The error description.\n * @extends module:errors~StreamError\n */\nfunction StreamsNotSupported(description) {\n  FaunaError.call(\n    this,\n    'StreamsNotSupported',\n    'streams not supported',\n    description\n  )\n}\n\nutil.inherits(StreamsNotSupported, StreamError)\n\n/**\n * An Error thrown by the server when something wrong happened with the\n * subscribed stream.\n * @constructor\n * @param {Object} event The error event.\n * @property {Object} event The error event.\n * @extends module:errors~StreamError\n */\nfunction StreamErrorEvent(event) {\n  var error = event.data || {}\n  FaunaError.call(this, 'StreamErrorEvent', error.code, error.description)\n  this.event = event\n}\n\nutil.inherits(StreamErrorEvent, StreamError)\n\n/**\n * An error thrown when attempting to operate on a closed Client instance.\n *\n * @param {string} message The error message.\n * @param {?string} description The error description.\n * @extends module:errors~FaunaError\n * @constructor\n */\nfunction ClientClosed(message, description) {\n  FaunaError.call(this, 'ClientClosed', message, description)\n}\n\nutil.inherits(ClientClosed, FaunaError)\n\nmodule.exports = {\n  FaunaError: FaunaError,\n  ClientClosed: ClientClosed,\n  FaunaHTTPError: FaunaHTTPError,\n  InvalidValue: InvalidValue,\n  InvalidArity: InvalidArity,\n  BadRequest: BadRequest,\n  Unauthorized: Unauthorized,\n  PermissionDenied: PermissionDenied,\n  NotFound: NotFound,\n  MethodNotAllowed: MethodNotAllowed,\n  TooManyRequests: TooManyRequests,\n  InternalError: InternalError,\n  UnavailableError: UnavailableError,\n  StreamError: StreamError,\n  StreamsNotSupported: StreamsNotSupported,\n  StreamErrorEvent: StreamErrorEvent,\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvZXJyb3JzLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLFdBQVcsbUJBQU8sQ0FBQywwREFBUzs7QUFFNUI7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLG1DQUFtQztBQUM5RSxnQ0FBZ0MsZ0NBQWdDO0FBQ2hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsWUFBWSxvQkFBb0I7QUFDckQ7QUFDQTtBQUNBLEtBQUssa0JBQWtCLFFBQVE7QUFDL0I7O0FBRUEsMkNBQTJDLFVBQVUsSUFBSSxrQkFBa0I7O0FBRTNFO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkNBQTJDLFFBQVEsRUFBRSwyQkFBMkI7QUFDaEY7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBWSxxQkFBcUI7QUFDakM7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLGNBQWMsUUFBUTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9va2Jvb2tzaG9wbmcvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvZXJyb3JzLmpzPzdkYzIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbnZhciB1dGlsID0gcmVxdWlyZSgnLi9fdXRpbCcpXG5cbi8qKlxuICogRmF1bmFEQiBlcnJvciB0eXBlcy4gUmVxdWVzdCBlcnJvcnMgY2FuIG9yaWdpbmF0ZSBmcm9tIHRoZSBjbGllbnQgKGUuZy4gYmFkXG4gKiBtZXRob2QgcGFyYW1ldGVycykgb3IgZnJvbSB0aGUgRmF1bmFEQiBTZXJ2ZXIgKGUuZy4gaW52YWxpZCBxdWVyaWVzLFxuICogdGltZW91dHMuKSBTZXJ2ZXIgZXJyb3JzIHdpbGwgc3ViY2xhc3Mge0BsaW5rIG1vZHVsZTplcnJvcnN+RmF1bmFIVFRQRXJyb3J9LlxuICogU3RyZWFtIGVycm9ycyB3aWxsIHN1YmNsYXNzIHtAbGluayBtb2R1bGU6ZXJyb3JzflN0cmVhbUVycm9yfS5cbiAqXG4gKiBAbW9kdWxlIGVycm9yc1xuICovXG5cbi8qKlxuICogVGhlIGJhc2UgZXhjZXB0aW9uIHR5cGUgZm9yIGFsbCBGYXVuYURCIGVycm9ycy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZVxuICogQGV4dGVuZHMgRXJyb3JcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBGYXVuYUVycm9yKG5hbWUsIG1lc3NhZ2UsIGRlc2NyaXB0aW9uKSB7XG4gIEVycm9yLmNhbGwodGhpcylcblxuICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKVxuICB9IGVsc2UgdGhpcy5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrXG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhpcyBleGNlcHRpb24uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICB0aGlzLm5hbWUgPSBuYW1lXG5cbiAgLyoqXG4gICAqIE1lc3NhZ2UgZm9yIHRoaXMgZXhjZXB0aW9uLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZVxuXG4gIC8qKlxuICAgKiBEZXNjcmlwdGlvbiBmb3IgdGhpcyBleGNlcHRpb24uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25cbn1cblxudXRpbC5pbmhlcml0cyhGYXVuYUVycm9yLCBFcnJvcilcblxuLyoqXG4gKiBFeGNlcHRpb24gdGhyb3duIGJ5IHRoaXMgY2xpZW50IGxpYnJhcnkgd2hlbiBhbiBpbnZhbGlkXG4gKiB2YWx1ZSBpcyBwcm92aWRlZCBhcyBhIGZ1bmN0aW9uIGFyZ3VtZW50LlxuICpcbiAqIEBleHRlbmRzIG1vZHVsZTplcnJvcnN+RmF1bmFFcnJvclxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEludmFsaWRWYWx1ZShtZXNzYWdlKSB7XG4gIEZhdW5hRXJyb3IuY2FsbCh0aGlzLCAnSW52YWxpZFZhbHVlJywgbWVzc2FnZSlcbn1cblxudXRpbC5pbmhlcml0cyhJbnZhbGlkVmFsdWUsIEZhdW5hRXJyb3IpXG5cbi8qKlxuICogRXhjZXB0aW9uIHRocm93biBieSB0aGlzIGNsaWVudCBsaWJyYXJ5IHdoZW4gYW4gaW52YWxpZFxuICogdmFsdWUgaXMgcHJvdmlkZWQgYXMgYSBmdW5jdGlvbiBhcmd1bWVudC5cbiAqXG4gKiBAZXh0ZW5kcyBtb2R1bGU6ZXJyb3JzfkZhdW5hRXJyb3JcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBJbnZhbGlkQXJpdHkobWluLCBtYXgsIGFjdHVhbCwgY2FsbGVyRnVuYykge1xuICB2YXIgYXJpdHlJbmZvID0gYCR7Y2FsbGVyRnVuY30gZnVuY3Rpb24gcmVxdWlyZXMgJHttZXNzYWdlRm9yQXJpdHkoXG4gICAgbWluLFxuICAgIG1heFxuICApfSBhcmd1bWVudChzKSBidXQgJHthY3R1YWx9IHdlcmUgZ2l2ZW5gXG4gIHZhciBkb2N1bWVudGF0aW9uTGluayA9IGxvZ0RvY3VtZW50YXRpb25MaW5rKGNhbGxlckZ1bmMpXG5cbiAgRmF1bmFFcnJvci5jYWxsKHRoaXMsICdJbnZhbGlkQXJpdHknLCBgJHthcml0eUluZm99XFxuJHtkb2N1bWVudGF0aW9uTGlua31gKVxuXG4gIC8qKlxuICAgKiBNaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLm1pbiA9IG1pblxuXG4gIC8qKlxuICAgKiBNYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudHMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLm1heCA9IG1heFxuXG4gIC8qKlxuICAgKiBBY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBjYWxsZWQgd2l0aC5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuYWN0dWFsID0gYWN0dWFsXG5cbiAgZnVuY3Rpb24gbWVzc2FnZUZvckFyaXR5KG1pbiwgbWF4KSB7XG4gICAgaWYgKG1heCA9PT0gbnVsbCkgcmV0dXJuICdhdCBsZWFzdCAnICsgbWluXG4gICAgaWYgKG1pbiA9PT0gbnVsbCkgcmV0dXJuICd1cCB0byAnICsgbWF4XG4gICAgaWYgKG1pbiA9PT0gbWF4KSByZXR1cm4gbWluXG4gICAgcmV0dXJuICdmcm9tICcgKyBtaW4gKyAnIHRvICcgKyBtYXhcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0RvY3VtZW50YXRpb25MaW5rKGZ1bmN0aW9uTmFtZSkge1xuICAgIHZhciBkb2NzVVJMID0gJ2h0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy8nXG4gICAgcmV0dXJuIGBGb3IgbW9yZSBpbmZvLCBzZWUgdGhlIGRvY3M6ICR7ZG9jc1VSTH0ke2Z1bmN0aW9uTmFtZS50b0xvd2VyQ2FzZSgpfWBcbiAgfVxufVxuXG51dGlsLmluaGVyaXRzKEludmFsaWRBcml0eSwgRmF1bmFFcnJvcilcblxuLyoqXG4gKiBCYXNlIGV4Y2VwdGlvbiB0eXBlIGZvciBlcnJvcnMgcmV0dXJuZWQgYnkgdGhlIEZhdW5hREIgc2VydmVyLlxuICpcbiAqIEBwYXJhbSB7UmVxdWVzdFJlc3VsdH0gcmVxdWVzdFJlc3VsdFxuICpcbiAqIEBleHRlbmRzIG1vZHVsZTplcnJvcnN+RmF1bmFFcnJvclxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEZhdW5hSFRUUEVycm9yKG5hbWUsIHJlcXVlc3RSZXN1bHQpIHtcbiAgdmFyIHJlc3BvbnNlID0gcmVxdWVzdFJlc3VsdC5yZXNwb25zZUNvbnRlbnRcbiAgdmFyIGVycm9ycyA9IHJlc3BvbnNlLmVycm9yc1xuICB2YXIgbWVzc2FnZSA9IGVycm9ycy5sZW5ndGggPT09IDAgPyAnKGVtcHR5IFwiZXJyb3JzXCIpJyA6IGVycm9yc1swXS5jb2RlXG4gIHZhciBkZXNjcmlwdGlvbiA9XG4gICAgZXJyb3JzLmxlbmd0aCA9PT0gMCA/ICcoZW1wdHkgXCJlcnJvcnNcIiknIDogZXJyb3JzWzBdLmRlc2NyaXB0aW9uXG4gIEZhdW5hRXJyb3IuY2FsbCh0aGlzLCBuYW1lLCBtZXNzYWdlLCBkZXNjcmlwdGlvbilcblxuICAvKipcbiAgICogQSB3cmFwcGVkIHtAbGluayBSZXF1ZXN0UmVzdWx0fSBvYmplY3QsIGNvbnRhaW5pbmcgdGhlIHJlcXVlc3QgYW5kIHJlc3BvbnNlXG4gICAqIGNvbnRleHQgb2YgdGhlIGZhaWxlZCByZXF1ZXN0LlxuICAgKlxuICAgKiBAdHlwZSB7UmVxdWVzdFJlc3VsdH1cbiAgICovXG4gIHRoaXMucmVxdWVzdFJlc3VsdCA9IHJlcXVlc3RSZXN1bHRcbn1cblxudXRpbC5pbmhlcml0cyhGYXVuYUhUVFBFcnJvciwgRmF1bmFFcnJvcilcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmV0dXJuIHRoZSBlcnJvcnMgZnJvbSB0aGUgcmVzcG9uc2Ugb2JqZWN0LlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbkZhdW5hSFRUUEVycm9yLnByb3RvdHlwZS5lcnJvcnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMucmVxdWVzdFJlc3VsdC5yZXNwb25zZUNvbnRlbnQuZXJyb3JzXG59XG5cbi8qKlxuICogVGFrZXMgYSB7QGxpbmsgUmVxdWVzdFJlc3VsdH0gYW5kIHRocm93cyBhbiBhcHByb3ByaWF0ZSBleGNlcHRpb24gaWZcbiAqIGl0IGNvbnRhaW5zIGEgZmFpbGVkIHJlcXVlc3QuXG4gKlxuICogQHBhcmFtIHJlcXVlc3RSZXN1bHQge1JlcXVlc3RSZXN1bHR9XG4gKi9cbkZhdW5hSFRUUEVycm9yLnJhaXNlRm9yU3RhdHVzQ29kZSA9IGZ1bmN0aW9uKHJlcXVlc3RSZXN1bHQpIHtcbiAgdmFyIGNvZGUgPSByZXF1ZXN0UmVzdWx0LnN0YXR1c0NvZGVcbiAgaWYgKGNvZGUgPCAyMDAgfHwgY29kZSA+PSAzMDApIHtcbiAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgIGNhc2UgNDAwOlxuICAgICAgICB0aHJvdyBuZXcgQmFkUmVxdWVzdChyZXF1ZXN0UmVzdWx0KVxuICAgICAgY2FzZSA0MDE6XG4gICAgICAgIHRocm93IG5ldyBVbmF1dGhvcml6ZWQocmVxdWVzdFJlc3VsdClcbiAgICAgIGNhc2UgNDAzOlxuICAgICAgICB0aHJvdyBuZXcgUGVybWlzc2lvbkRlbmllZChyZXF1ZXN0UmVzdWx0KVxuICAgICAgY2FzZSA0MDQ6XG4gICAgICAgIHRocm93IG5ldyBOb3RGb3VuZChyZXF1ZXN0UmVzdWx0KVxuICAgICAgY2FzZSA0MDU6XG4gICAgICAgIHRocm93IG5ldyBNZXRob2ROb3RBbGxvd2VkKHJlcXVlc3RSZXN1bHQpXG4gICAgICBjYXNlIDQyOTpcbiAgICAgICAgdGhyb3cgbmV3IFRvb01hbnlSZXF1ZXN0cyhyZXF1ZXN0UmVzdWx0KVxuICAgICAgY2FzZSA1MDA6XG4gICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEVycm9yKHJlcXVlc3RSZXN1bHQpXG4gICAgICBjYXNlIDUwMzpcbiAgICAgICAgdGhyb3cgbmV3IFVuYXZhaWxhYmxlRXJyb3IocmVxdWVzdFJlc3VsdClcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBGYXVuYUhUVFBFcnJvcignVW5rbm93bkVycm9yJywgcmVxdWVzdFJlc3VsdClcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBIEhUVFAgNDAwIGVycm9yLlxuICpcbiAqIEBwYXJhbSB7UmVxdWVzdFJlc3VsdH0gcmVxdWVzdFJlc3VsdFxuICogQGV4dGVuZHMgbW9kdWxlOmVycm9yc35GYXVuYUhUVFBFcnJvclxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEJhZFJlcXVlc3QocmVxdWVzdFJlc3VsdCkge1xuICBGYXVuYUhUVFBFcnJvci5jYWxsKHRoaXMsICdCYWRSZXF1ZXN0JywgcmVxdWVzdFJlc3VsdClcbn1cblxudXRpbC5pbmhlcml0cyhCYWRSZXF1ZXN0LCBGYXVuYUhUVFBFcnJvcilcblxuLyoqXG4gKiBBIEhUVFAgNDAxIGVycm9yLlxuICogQHBhcmFtIHtSZXF1ZXN0UmVzdWx0fSByZXF1ZXN0UmVzdWx0XG4gKiBAZXh0ZW5kcyBtb2R1bGU6ZXJyb3JzfkZhdW5hSFRUUEVycm9yXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gVW5hdXRob3JpemVkKHJlcXVlc3RSZXN1bHQpIHtcbiAgRmF1bmFIVFRQRXJyb3IuY2FsbCh0aGlzLCAnVW5hdXRob3JpemVkJywgcmVxdWVzdFJlc3VsdClcbiAgdGhpcy5tZXNzYWdlID0gdGhpcy5tZXNzYWdlICs9XG4gICAgJy4gQ2hlY2sgdGhhdCBlbmRwb2ludCwgc2NoZW1hLCBwb3J0IGFuZCBzZWNyZXQgYXJlIGNvcnJlY3QgZHVyaW5nIGNsaWVudOKAmXMgaW5zdGFudGlhdGlvbidcbn1cblxudXRpbC5pbmhlcml0cyhVbmF1dGhvcml6ZWQsIEZhdW5hSFRUUEVycm9yKVxuXG4vKipcbiAqIEEgSFRUUCA0MDMgZXJyb3IuXG4gKiBAcGFyYW0ge1JlcXVlc3RSZXN1bHR9IHJlcXVlc3RSZXN1bHRcbiAqIEBleHRlbmRzIG1vZHVsZTplcnJvcnN+RmF1bmFIVFRQRXJyb3JcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBQZXJtaXNzaW9uRGVuaWVkKHJlcXVlc3RSZXN1bHQpIHtcbiAgRmF1bmFIVFRQRXJyb3IuY2FsbCh0aGlzLCAnUGVybWlzc2lvbkRlbmllZCcsIHJlcXVlc3RSZXN1bHQpXG59XG5cbnV0aWwuaW5oZXJpdHMoUGVybWlzc2lvbkRlbmllZCwgRmF1bmFIVFRQRXJyb3IpXG5cbi8qKlxuICogQSBIVFRQIDQwNCBlcnJvci5cbiAqIEBwYXJhbSB7UmVxdWVzdFJlc3VsdH0gcmVxdWVzdFJlc3VsdFxuICogQGV4dGVuZHMgbW9kdWxlOmVycm9yc35GYXVuYUhUVFBFcnJvclxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIE5vdEZvdW5kKHJlcXVlc3RSZXN1bHQpIHtcbiAgRmF1bmFIVFRQRXJyb3IuY2FsbCh0aGlzLCAnTm90Rm91bmQnLCByZXF1ZXN0UmVzdWx0KVxufVxuXG51dGlsLmluaGVyaXRzKE5vdEZvdW5kLCBGYXVuYUhUVFBFcnJvcilcblxuLyoqXG4gKiBBIEhUVFAgNDA1IGVycm9yLlxuICogQHBhcmFtIHtSZXF1ZXN0UmVzdWx0fSByZXF1ZXN0UmVzdWx0XG4gKiBAZXh0ZW5kcyBtb2R1bGU6ZXJyb3JzfkZhdW5hSFRUUEVycm9yXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gTWV0aG9kTm90QWxsb3dlZChyZXF1ZXN0UmVzdWx0KSB7XG4gIEZhdW5hSFRUUEVycm9yLmNhbGwodGhpcywgJ01ldGhvZE5vdEFsbG93ZWQnLCByZXF1ZXN0UmVzdWx0KVxufVxuXG51dGlsLmluaGVyaXRzKE1ldGhvZE5vdEFsbG93ZWQsIEZhdW5hSFRUUEVycm9yKVxuXG4vKipcbiAqIEEgSFRUUCA0MjkgZXJyb3IuXG4gKiBAcGFyYW0ge1JlcXVlc3RSZXN1bHR9IHJlcXVlc3RSZXN1bHRcbiAqIEBleHRlbmRzIG1vZHVsZTplcnJvcnN+RmF1bmFIVFRQRXJyb3JcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBUb29NYW55UmVxdWVzdHMocmVxdWVzdFJlc3VsdCkge1xuICBGYXVuYUhUVFBFcnJvci5jYWxsKHRoaXMsICdUb29NYW55UmVxdWVzdHMnLCByZXF1ZXN0UmVzdWx0KVxufVxuXG51dGlsLmluaGVyaXRzKFRvb01hbnlSZXF1ZXN0cywgRmF1bmFIVFRQRXJyb3IpXG5cbi8qKlxuICogQSBIVFRQIDUwMCBlcnJvci5cbiAqIEBwYXJhbSB7UmVxdWVzdFJlc3VsdH0gcmVxdWVzdFJlc3VsdFxuICogQGV4dGVuZHMgbW9kdWxlOmVycm9yc35GYXVuYUhUVFBFcnJvclxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEludGVybmFsRXJyb3IocmVxdWVzdFJlc3VsdCkge1xuICBGYXVuYUhUVFBFcnJvci5jYWxsKHRoaXMsICdJbnRlcm5hbEVycm9yJywgcmVxdWVzdFJlc3VsdClcbn1cblxudXRpbC5pbmhlcml0cyhJbnRlcm5hbEVycm9yLCBGYXVuYUhUVFBFcnJvcilcblxuLyoqXG4gKiBBIEhUVFAgNTAzIGVycm9yLlxuICogQHBhcmFtIHtSZXF1ZXN0UmVzdWx0fSByZXF1ZXN0UmVzdWx0XG4gKiBAZXh0ZW5kcyBtb2R1bGU6ZXJyb3JzfkZhdW5hSFRUUEVycm9yXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gVW5hdmFpbGFibGVFcnJvcihyZXF1ZXN0UmVzdWx0KSB7XG4gIEZhdW5hSFRUUEVycm9yLmNhbGwodGhpcywgJ1VuYXZhaWxhYmxlRXJyb3InLCByZXF1ZXN0UmVzdWx0KVxufVxuXG51dGlsLmluaGVyaXRzKFVuYXZhaWxhYmxlRXJyb3IsIEZhdW5hSFRUUEVycm9yKVxuXG4vKipcbiAqIFRoZSBiYXNlIGV4Y2VwdGlvbiB0eXBlIGZvciBhbGwgc3RyZWFtIHJlbGF0ZWQgZXJyb3JzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIGVycm9yIGNsYXNzIG5hbWUuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXNjcmlwdGlvbiBUaGUgZXJyb3IgZGV0YWlsZWQgZGVzY3JpcHRpb24uXG4gKiBAZXh0ZW5kcyBtb2R1bGU6ZXJyb3JzfkZhdW5hRXJyb3JcbiAqL1xuZnVuY3Rpb24gU3RyZWFtRXJyb3IobmFtZSwgbWVzc2FnZSwgZGVzY3JpcHRpb24pIHtcbiAgRmF1bmFFcnJvci5jYWxsKHRoaXMsIG5hbWUsIG1lc3NhZ2UsIGRlc2NyaXB0aW9uKVxufVxuXG51dGlsLmluaGVyaXRzKFN0cmVhbUVycm9yLCBGYXVuYUVycm9yKVxuXG4vKipcbiAqIEFuIGVycm9yIHRocm93biBieSB0aGUgY2xpZW50IHdoZW4gc3RyZWFtcyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGUgY3VycmVudFxuICogcGxhdGZvcm0uXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzY3JpcHRpb24gVGhlIGVycm9yIGRlc2NyaXB0aW9uLlxuICogQGV4dGVuZHMgbW9kdWxlOmVycm9yc35TdHJlYW1FcnJvclxuICovXG5mdW5jdGlvbiBTdHJlYW1zTm90U3VwcG9ydGVkKGRlc2NyaXB0aW9uKSB7XG4gIEZhdW5hRXJyb3IuY2FsbChcbiAgICB0aGlzLFxuICAgICdTdHJlYW1zTm90U3VwcG9ydGVkJyxcbiAgICAnc3RyZWFtcyBub3Qgc3VwcG9ydGVkJyxcbiAgICBkZXNjcmlwdGlvblxuICApXG59XG5cbnV0aWwuaW5oZXJpdHMoU3RyZWFtc05vdFN1cHBvcnRlZCwgU3RyZWFtRXJyb3IpXG5cbi8qKlxuICogQW4gRXJyb3IgdGhyb3duIGJ5IHRoZSBzZXJ2ZXIgd2hlbiBzb21ldGhpbmcgd3JvbmcgaGFwcGVuZWQgd2l0aCB0aGVcbiAqIHN1YnNjcmliZWQgc3RyZWFtLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgVGhlIGVycm9yIGV2ZW50LlxuICogQHByb3BlcnR5IHtPYmplY3R9IGV2ZW50IFRoZSBlcnJvciBldmVudC5cbiAqIEBleHRlbmRzIG1vZHVsZTplcnJvcnN+U3RyZWFtRXJyb3JcbiAqL1xuZnVuY3Rpb24gU3RyZWFtRXJyb3JFdmVudChldmVudCkge1xuICB2YXIgZXJyb3IgPSBldmVudC5kYXRhIHx8IHt9XG4gIEZhdW5hRXJyb3IuY2FsbCh0aGlzLCAnU3RyZWFtRXJyb3JFdmVudCcsIGVycm9yLmNvZGUsIGVycm9yLmRlc2NyaXB0aW9uKVxuICB0aGlzLmV2ZW50ID0gZXZlbnRcbn1cblxudXRpbC5pbmhlcml0cyhTdHJlYW1FcnJvckV2ZW50LCBTdHJlYW1FcnJvcilcblxuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhdHRlbXB0aW5nIHRvIG9wZXJhdGUgb24gYSBjbG9zZWQgQ2xpZW50IGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHs/c3RyaW5nfSBkZXNjcmlwdGlvbiBUaGUgZXJyb3IgZGVzY3JpcHRpb24uXG4gKiBAZXh0ZW5kcyBtb2R1bGU6ZXJyb3JzfkZhdW5hRXJyb3JcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBDbGllbnRDbG9zZWQobWVzc2FnZSwgZGVzY3JpcHRpb24pIHtcbiAgRmF1bmFFcnJvci5jYWxsKHRoaXMsICdDbGllbnRDbG9zZWQnLCBtZXNzYWdlLCBkZXNjcmlwdGlvbilcbn1cblxudXRpbC5pbmhlcml0cyhDbGllbnRDbG9zZWQsIEZhdW5hRXJyb3IpXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBGYXVuYUVycm9yOiBGYXVuYUVycm9yLFxuICBDbGllbnRDbG9zZWQ6IENsaWVudENsb3NlZCxcbiAgRmF1bmFIVFRQRXJyb3I6IEZhdW5hSFRUUEVycm9yLFxuICBJbnZhbGlkVmFsdWU6IEludmFsaWRWYWx1ZSxcbiAgSW52YWxpZEFyaXR5OiBJbnZhbGlkQXJpdHksXG4gIEJhZFJlcXVlc3Q6IEJhZFJlcXVlc3QsXG4gIFVuYXV0aG9yaXplZDogVW5hdXRob3JpemVkLFxuICBQZXJtaXNzaW9uRGVuaWVkOiBQZXJtaXNzaW9uRGVuaWVkLFxuICBOb3RGb3VuZDogTm90Rm91bmQsXG4gIE1ldGhvZE5vdEFsbG93ZWQ6IE1ldGhvZE5vdEFsbG93ZWQsXG4gIFRvb01hbnlSZXF1ZXN0czogVG9vTWFueVJlcXVlc3RzLFxuICBJbnRlcm5hbEVycm9yOiBJbnRlcm5hbEVycm9yLFxuICBVbmF2YWlsYWJsZUVycm9yOiBVbmF2YWlsYWJsZUVycm9yLFxuICBTdHJlYW1FcnJvcjogU3RyZWFtRXJyb3IsXG4gIFN0cmVhbXNOb3RTdXBwb3J0ZWQ6IFN0cmVhbXNOb3RTdXBwb3J0ZWQsXG4gIFN0cmVhbUVycm9yRXZlbnQ6IFN0cmVhbUVycm9yRXZlbnQsXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/query.js":
/*!*******************************************!*\
  !*** ./node_modules/faunadb/src/query.js ***!
  \*******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar annotate = __webpack_require__(/*! fn-annotate */ \"(ssr)/./node_modules/fn-annotate/index.js\")\nvar deprecate = __webpack_require__(/*! util-deprecate */ \"(ssr)/./node_modules/util-deprecate/node.js\")\nvar Expr = __webpack_require__(/*! ./Expr */ \"(ssr)/./node_modules/faunadb/src/Expr.js\")\nvar errors = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/faunadb/src/errors.js\")\nvar values = __webpack_require__(/*! ./values */ \"(ssr)/./node_modules/faunadb/src/values.js\")\nvar objectAssign = __webpack_require__(/*! object-assign */ \"(ssr)/./node_modules/object-assign/index.js\")\nvar util = __webpack_require__(/*! ./_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\n\n/**\n * This module contains functions used to construct FaunaDB Queries.\n *\n * See the [FaunaDB Query API Documentation](https://app.fauna.com/documentation/reference/queryapi)\n * for per-function documentation.\n *\n * @module query\n */\n\n/**\n * @typedef {(Expr|string|number|boolean|Object)} module:query~ExprTerm\n */\n\n/**\n * @typedef {(module:query~ExprTerm|Array<module:query~ExprTerm>)} module:query~ExprArg\n */\n\n// Type helpers\n\n/**\n * If one parameter is provided, constructs a literal Ref value.\n * The string `collections/widget/123` will be equivalent to `new values.Ref('123', new values.Ref('widget', values.Native.COLLECTIONS))`\n *\n * If two are provided, constructs a Ref() function that, when evaluated, returns a Ref value.\n *\n * @param {string|module:query~ExprArg} ref|cls\n *   Alone, the ref in path form. Combined with `id`, must be a collection ref.\n * @param {module:query~ExprArg} [id]\n *   A numeric id of the given collection.\n * @return {Expr}\n */\nfunction Ref() {\n  arity.between(1, 2, arguments, Ref.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ '@ref': wrap(arguments[0]) })\n    case 2:\n      return new Expr({ ref: wrap(arguments[0]), id: wrap(arguments[1]) })\n  }\n}\n\n/**\n * @param {Uint8Array|ArrayBuffer|module:query~ExprArg} bytes\n *   A base64 encoded string or a byte array\n * @return {Expr}\n */\nfunction Bytes(bytes) {\n  arity.exact(1, arguments, Bytes.name)\n  return new values.Bytes(bytes)\n}\n\n// Basic forms\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} msg\n *   The message to send back to the client.\n * @return {Expr}\n * */\nfunction Abort(msg) {\n  arity.exact(1, arguments, Abort.name)\n  return new Expr({ abort: wrap(msg) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} timestamp\n *   An Expr that will evaluate to a Time.\n * @param {module:query~ExprArg} expr\n *   The Expr to run at the given snapshot time.\n * @return {Expr}\n * */\nfunction At(timestamp, expr) {\n  arity.exact(2, arguments, At.name)\n  return new Expr({ at: wrap(timestamp), expr: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} bindings\n *   A set of bindings to use within the given expression.\n * @param {module:query~ExprArg} in\n *   The expression to run with the given bindings.\n * @return {Expr}\n * */\nfunction Let(vars, expr) {\n  arity.exact(2, arguments, Let.name)\n  var bindings = []\n\n  if (Array.isArray(vars)) {\n    bindings = vars.map(function(item) {\n      return wrapValues(item)\n    })\n  } else {\n    bindings = Object.keys(vars)\n      .filter(function(k) {\n        return vars[k] !== undefined\n      })\n      .map(function(k) {\n        var b = {}\n        b[k] = wrap(vars[k])\n        return b\n      })\n  }\n\n  if (typeof expr === 'function') {\n    if (Array.isArray(vars)) {\n      var expr_vars = []\n\n      vars.forEach(function(item) {\n        Object.keys(item).forEach(function(name) {\n          expr_vars.push(Var(name))\n        })\n      })\n\n      expr = expr.apply(null, expr_vars)\n    } else {\n      expr = expr.apply(\n        null,\n        Object.keys(vars).map(function(name) {\n          return Var(name)\n        })\n      )\n    }\n  }\n\n  return new Expr({ let: bindings, in: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} varName\n *   The name of the bound var.\n * @return {Expr}\n * */\nfunction Var(varName) {\n  arity.exact(1, arguments, Var.name)\n  return new Expr({ var: wrap(varName) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} condition\n *   An expression that returns a boolean.\n * @param {module:query~ExprArg} then\n *   The expression to run if condition is true.\n * @param {module:query~ExprArg} else\n *   The expression to run if the condition is false.\n * @return {Expr}\n * */\nfunction If(condition, then, _else) {\n  arity.exact(3, arguments, If.name)\n  return new Expr({ if: wrap(condition), then: wrap(then), else: wrap(_else) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {...module:query~ExprArg} args\n *   A series of expressions to run.\n * @return {Expr}\n * */\nfunction Do() {\n  arity.min(1, arguments, Do.name)\n  var args = argsToArray(arguments)\n  return new Expr({ do: wrap(args) })\n}\n\n/** See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {...module:query~ExprArg} fields\n *   The object to be escaped.\n * @return {Expr}\n * */\nvar objectFunction = function(fields) {\n  arity.exact(1, arguments, objectFunction.name)\n  return new Expr({ object: wrapValues(fields) })\n}\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * Directly produces a FaunaDB Lambda expression as described in the FaunaDB reference\n * documentation.\n *\n * @param {module:query~ExprArg} var\n *   The names of the variables to be bound in this lambda expression.\n * @param {module:query~ExprArg} expr\n *   The lambda expression.\n * @return {Expr}\n */\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * Takes a Javascript function, and will transform it\n * into the appropriate FaunaDB query. For example:\n *\n * ```\n * Lambda(function(a) { return Add(a, a); });\n * // Returns { lambda: 'a', expr: { add: [{ var: a }, { var: a }] } }\n * ```\n * Note that the driver will handle wrapping all usages of the lambda's bound\n * variables with the {@link modules:query~Var} function.\n *\n * @param {function} func\n *   Takes the provided function and produces the appropriate FaunaDB query expression.\n * @return {Expr}\n *\n */ function Lambda() {\n  arity.between(1, 2, arguments, Lambda.name)\n  switch (arguments.length) {\n    case 1:\n      var value = arguments[0]\n      if (typeof value === 'function') {\n        return _lambdaFunc(value)\n      } else if (\n        value instanceof Expr ||\n        util.checkInstanceHasProperty(value, '_isFaunaExpr')\n      ) {\n        return value\n      } else {\n        throw new errors.InvalidValue(\n          'Lambda function takes either a Function or an Expr.'\n        )\n      }\n    case 2:\n      var var_name = arguments[0]\n      var expr = arguments[1]\n\n      return _lambdaExpr(var_name, expr)\n  }\n}\n\n/**\n * @private\n */\nfunction _lambdaFunc(func) {\n  var vars = annotate(func)\n  switch (vars.length) {\n    case 0:\n      throw new errors.InvalidValue(\n        'Provided Function must take at least 1 argument.'\n      )\n    case 1:\n      return _lambdaExpr(vars[0], func(Var(vars[0])))\n    default:\n      return _lambdaExpr(\n        vars,\n        func.apply(\n          null,\n          vars.map(function(name) {\n            return Var(name)\n          })\n        )\n      )\n  }\n}\n\n/**\n * @private\n */\nfunction _lambdaExpr(var_name, expr) {\n  return new Expr({ lambda: wrap(var_name), expr: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * Invokes a given function passing in the provided arguments\n *\n * ```\n * Call(Ref(\"functions/a_function\"), 1, 2)\n * ```\n *\n * @param {module:query~ExprArg} ref\n *   The ref of the UserDefinedFunction to call\n * @param {...module:query~ExprArg} args\n *   A series of values to pass as arguments to the UDF.\n * @return {Expr}\n * */\nfunction Call(ref) {\n  arity.min(1, arguments, Call.name)\n  var args = argsToArray(arguments)\n  args.shift()\n  return new Expr({ call: wrap(ref), arguments: wrap(varargs(args)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * Constructs a `@query` type using the Lambda() or a function.\n *\n * ```\n * Query(Lambda(['a', 'b'], Add(Var('a'), Var('b'))))\n * Query(function (a, b) { return Add(a, b) })\n * ```\n *\n * @param {module:query~ExprArg|function} lambda\n *   A function to escape as a query.\n * @return {Expr}\n * */\nfunction Query(lambda) {\n  arity.exact(1, arguments, Query.name)\n  return new Expr({ query: wrap(lambda) })\n}\n\n// Collection functions\n\n/** See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection to be mapped over.\n * @param {module:query~ExprArg|function} lambda\n *   A function to be called for each element of the collection.\n * @return {Expr}\n * */\nfunction Map(collection, lambda_expr) {\n  arity.exact(2, arguments, Map.name)\n  return new Expr({ map: wrap(lambda_expr), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection to be iterated over.\n * @param {module:query~ExprArg|function} lambda\n *   A function to be called for each element of the collection.\n * @return {Expr}\n * */\nfunction Foreach(collection, lambda_expr) {\n  arity.exact(2, arguments, Foreach.name)\n  return new Expr({ foreach: wrap(lambda_expr), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection to be filtered.\n * @param {module:query~ExprArg|function} lambda\n *   A function that returns a boolean used to filter unwanted values.\n * @return {Expr}\n * */\nfunction Filter(collection, lambda_expr) {\n  arity.exact(2, arguments, Filter.name)\n  return new Expr({ filter: wrap(lambda_expr), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} number\n *   An expression resulting in the number of elements to take from the collection.\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n * */\nfunction Take(number, collection) {\n  arity.exact(2, arguments, Take.name)\n  return new Expr({ take: wrap(number), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} number\n *   An expression resulting in the number of elements to drop from the collection.\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n * */\nfunction Drop(number, collection) {\n  arity.exact(2, arguments, Drop.name)\n  return new Expr({ drop: wrap(number), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} elements\n *   An expression resulting in a collection of elements to prepend to the given collection.\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n */\nfunction Prepend(elements, collection) {\n  arity.exact(2, arguments, Prepend.name)\n  return new Expr({ prepend: wrap(elements), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} elements\n *   An expression resulting in a collection of elements to append to the given collection.\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n */\nfunction Append(elements, collection) {\n  arity.exact(2, arguments, Append.name)\n  return new Expr({ append: wrap(elements), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n */\nfunction IsEmpty(collection) {\n  arity.exact(1, arguments, IsEmpty.name)\n  return new Expr({ is_empty: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n */\nfunction IsNonEmpty(collection) {\n  arity.exact(1, arguments, IsNonEmpty.name)\n  return new Expr({ is_nonempty: wrap(collection) })\n}\n\n// Type check functions\n\n/**\n * Check if the expression is a number.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isnumber\">IsNumber</a>\n */\nfunction IsNumber(expr) {\n  arity.exact(1, arguments, IsNumber.name)\n  return new Expr({ is_number: wrap(expr) })\n}\n\n/**\n * Check if the expression is a double.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isdouble\">IsDouble</a>\n */\nfunction IsDouble(expr) {\n  arity.exact(1, arguments, IsDouble.name)\n  return new Expr({ is_double: wrap(expr) })\n}\n\n/**\n * Check if the expression is an integer.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isinteger\">IsInteger</a>\n */\nfunction IsInteger(expr) {\n  arity.exact(1, arguments, IsInteger.name)\n  return new Expr({ is_integer: wrap(expr) })\n}\n\n/**\n * Check if the expression is a boolean.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isboolean\">IsBoolean</a>\n */\nfunction IsBoolean(expr) {\n  arity.exact(1, arguments, IsBoolean.name)\n  return new Expr({ is_boolean: wrap(expr) })\n}\n\n/**\n * Check if the expression is null.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isnull\">IsNull</a>\n */\nfunction IsNull(expr) {\n  arity.exact(1, arguments, IsNull.name)\n  return new Expr({ is_null: wrap(expr) })\n}\n\n/**\n * Check if the expression is a byte array.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isbytes\">IsBytes</a>\n */\nfunction IsBytes(expr) {\n  arity.exact(1, arguments, IsBytes.name)\n  return new Expr({ is_bytes: wrap(expr) })\n}\n\n/**\n * Check if the expression is a timestamp.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/istimestamp\">IsTimestamp</a>\n */\nfunction IsTimestamp(expr) {\n  arity.exact(1, arguments, IsTimestamp.name)\n  return new Expr({ is_timestamp: wrap(expr) })\n}\n\n/**\n * Check if the expression is a date.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isdate\">IsDate</a>\n */\nfunction IsDate(expr) {\n  arity.exact(1, arguments, IsDate.name)\n  return new Expr({ is_date: wrap(expr) })\n}\n\n/**\n * Check if the expression is a string.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isstring\">IsString</a>\n */\nfunction IsString(expr) {\n  arity.exact(1, arguments, IsString.name)\n  return new Expr({ is_string: wrap(expr) })\n}\n\n/**\n * Check if the expression is an array.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isarray\">IsArray</a>\n */\nfunction IsArray(expr) {\n  arity.exact(1, arguments, IsArray.name)\n  return new Expr({ is_array: wrap(expr) })\n}\n\n/**\n * Check if the expression is an object.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isobject\">IsObject</a>\n */\nfunction IsObject(expr) {\n  arity.exact(1, arguments, IsObject.name)\n  return new Expr({ is_object: wrap(expr) })\n}\n\n/**\n * Check if the expression is a reference.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isref\">IsRef</a>\n */\nfunction IsRef(expr) {\n  arity.exact(1, arguments, IsRef.name)\n  return new Expr({ is_ref: wrap(expr) })\n}\n\n/**\n * Check if the expression is a set.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isset\">IsSet</a>\n */\nfunction IsSet(expr) {\n  arity.exact(1, arguments, IsSet.name)\n  return new Expr({ is_set: wrap(expr) })\n}\n\n/**\n * Check if the expression is a document (either a reference or an instance).\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isdoc\">IsDoc</a>\n */\nfunction IsDoc(expr) {\n  arity.exact(1, arguments, IsDoc.name)\n  return new Expr({ is_doc: wrap(expr) })\n}\n\n/**\n * Check if the expression is a lambda.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/islambda\">IsLambda</a>\n */\nfunction IsLambda(expr) {\n  arity.exact(1, arguments, IsLambda.name)\n  return new Expr({ is_lambda: wrap(expr) })\n}\n\n/**\n * Check if the expression is a collection.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/iscollection\">IsCollection</a>\n */\nfunction IsCollection(expr) {\n  arity.exact(1, arguments, IsCollection.name)\n  return new Expr({ is_collection: wrap(expr) })\n}\n\n/**\n * Check if the expression is a database.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isdatabase\">IsDatabase</a>\n */\nfunction IsDatabase(expr) {\n  arity.exact(1, arguments, IsDatabase.name)\n  return new Expr({ is_database: wrap(expr) })\n}\n\n/**\n * Check if the expression is an index.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isindex\">IsIndex</a>\n */\nfunction IsIndex(expr) {\n  arity.exact(1, arguments, IsIndex.name)\n  return new Expr({ is_index: wrap(expr) })\n}\n\n/**\n * Check if the expression is a function.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isfunction\">IsFunction</a>\n */\nfunction IsFunction(expr) {\n  arity.exact(1, arguments, IsFunction.name)\n  return new Expr({ is_function: wrap(expr) })\n}\n\n/**\n * Check if the expression is a key.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/iskey\">IsKey</a>\n */\nfunction IsKey(expr) {\n  arity.exact(1, arguments, IsKey.name)\n  return new Expr({ is_key: wrap(expr) })\n}\n\n/**\n * Check if the expression is a token.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/istoken\">IsToken</a>\n */\nfunction IsToken(expr) {\n  arity.exact(1, arguments, IsToken.name)\n  return new Expr({ is_token: wrap(expr) })\n}\n\n/**\n * Check if the expression is credentials.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/iscredentials\">IsCredentials</a>\n */\nfunction IsCredentials(expr) {\n  arity.exact(1, arguments, IsCredentials.name)\n  return new Expr({ is_credentials: wrap(expr) })\n}\n\n/**\n * Check if the expression is a role.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isrole\">IsRole</a>\n */\nfunction IsRole(expr) {\n  arity.exact(1, arguments, IsRole.name)\n  return new Expr({ is_role: wrap(expr) })\n}\n\n// Read functions\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n *\n * @param {module:query~ExprArg} ref\n *   An expression resulting in either a Ref or SetRef.\n * @param {?module:query~ExprArg} ts\n *   The snapshot time at which to get the document.\n * @return {Expr}\n */\nfunction Get(ref, ts) {\n  arity.between(1, 2, arguments, Get.name)\n  ts = util.defaults(ts, null)\n\n  return new Expr(params({ get: wrap(ref) }, { ts: wrap(ts) }))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n *\n * @param {module:query~ExprArg} secret\n *   The key or token secret to lookup.\n * @return {Expr}\n */\nfunction KeyFromSecret(secret) {\n  arity.exact(1, arguments, KeyFromSecret.name)\n  return new Expr({ key_from_secret: wrap(secret) })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/reduce).\n *\n * @param {module:query~ExprArg} lambda\n *   The accumulator function\n * @param {module:query~ExprArg} initial\n *   The initial value\n * @param {module:query~ExprArg} collection\n *   The colleciton to be reduced\n * @return {Expr}\n */\nfunction Reduce(lambda, initial, collection) {\n  arity.exact(3, arguments, Reduce.name)\n  return new Expr({\n    reduce: wrap(lambda),\n    initial: wrap(initial),\n    collection: wrap(collection),\n  })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n * You may want to utilize {@link Client#paginate} to obtain a {@link PageHelper},\n * rather than using this query function directly.\n *\n * @param {module:query~ExprArg} set\n *   An expression resulting in a SetRef to page over.\n * @param {?Object} opts\n *  An object representing options for pagination.\n *    - size: Maximum number of results to return.\n *    - after: Return the next page of results after this cursor (inclusive).\n *    - before: Return the previous page of results before this cursor (exclusive).\n *    - sources: If true, include the source sets along with each element.\n * @return {Expr}\n */\nfunction Paginate(set, opts) {\n  arity.between(1, 2, arguments, Paginate.name)\n  opts = util.defaults(opts, {})\n\n  return new Expr(objectAssign({ paginate: wrap(set) }, wrapValues(opts)))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n *\n * @param {module:query~ExprArg} ref\n *   An expression resulting in a Ref.\n * @param {?module:query~ExprArg} ts\n *   The snapshot time at which to check for the document's existence.\n * @return {Expr}\n */\nfunction Exists(ref, ts) {\n  arity.between(1, 2, arguments, Exists.name)\n  ts = util.defaults(ts, null)\n\n  return new Expr(params({ exists: wrap(ref) }, { ts: wrap(ts) }))\n}\n\n// Write functions\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref (usually a CollectionRef) to create.\n * @param {?module:query~ExprArg} params\n *   An object representing the parameters of the document.\n * @return {Expr}\n */\nfunction Create(collection_ref, params) {\n  arity.between(1, 2, arguments, Create.name)\n  return new Expr({ create: wrap(collection_ref), params: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to update.\n * @param {module:query~ExprArg} params\n *   An object representing the parameters of the document.\n * @return {Expr}\n */\nfunction Update(ref, params) {\n  arity.exact(2, arguments, Update.name)\n  return new Expr({ update: wrap(ref), params: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to replace.\n * @param {module:query~ExprArg} params\n *   An object representing the parameters of the document.\n * @return {Expr}\n */\nfunction Replace(ref, params) {\n  arity.exact(2, arguments, Replace.name)\n  return new Expr({ replace: wrap(ref), params: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to delete.\n * @return {Expr}\n */\nfunction Delete(ref) {\n  arity.exact(1, arguments, Delete.name)\n  return new Expr({ delete: wrap(ref) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to insert against\n * @param {module:query~ExprArg} ts\n *   The valid time of the inserted event\n * @param {module:query~ExprArg} action\n *   Whether the event should be a Create, Update, or Delete.\n * @param {module:query~ExprArg} params\n *   If this is a Create or Update, the parameters of the document.\n * @return {Expr}\n */\nfunction Insert(ref, ts, action, params) {\n  arity.exact(4, arguments, Insert.name)\n  return new Expr({\n    insert: wrap(ref),\n    ts: wrap(ts),\n    action: wrap(action),\n    params: wrap(params),\n  })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref of the document whose event should be removed.\n * @param {module:query~ExprArg} ts\n *   The valid time of the event.\n * @param {module:query~ExprArg} action\n *   The event action (Create, Update, or Delete) that should be removed.\n * @return {Expr}\n */\nfunction Remove(ref, ts, action) {\n  arity.exact(3, arguments, Remove.name)\n  return new Expr({ remove: wrap(ref), ts: wrap(ts), action: wrap(action) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a class.\n *     - name (required): the name of the class to create\n * @return {Expr}\n *\n * @deprecated use CreateCollection instead\n */\nfunction CreateClass(params) {\n  arity.exact(1, arguments, CreateClass.name)\n  return new Expr({ create_class: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a collection.\n *     - name (required): the name of the collection to create\n * @return {Expr}\n */\nfunction CreateCollection(params) {\n  arity.exact(1, arguments, CreateCollection.name)\n  return new Expr({ create_collection: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a database.\n *     - name (required): the name of the database to create\n * @return {Expr}\n */\nfunction CreateDatabase(params) {\n  arity.exact(1, arguments, CreateDatabase.name)\n  return new Expr({ create_database: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create an index.\n *     - name (required): the name of the index to create\n *     - source: One or more source objects describing source collections and (optional) field bindings.\n *     - terms: An array of term objects describing the fields to be indexed. Optional\n *     - values: An array of value objects describing the fields to be covered. Optional\n *     - unique: If true, maintains a uniqueness constraint on combined terms and values. Optional\n *     - partitions: The number of sub-partitions within each term. Optional\n * @return {Expr}\n */\nfunction CreateIndex(params) {\n  arity.exact(1, arguments, CreateIndex.name)\n  return new Expr({ create_index: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a new key\n *     - database: Ref of the database the key will be scoped to. Optional.\n *     - role: The role of the new key\n * @return {Expr}\n */\nfunction CreateKey(params) {\n  arity.exact(1, arguments, CreateKey.name)\n  return new Expr({ create_key: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a new user defined function.\n *     - name: The name of the function\n *     - body: A lambda function (escaped with `query`).\n * @return {Expr}\n */\nfunction CreateFunction(params) {\n  arity.exact(1, arguments, CreateFunction.name)\n  return new Expr({ create_function: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a new role.\n *     - name: The name of the role\n *     - privileges: An array of privileges\n *     - membership: An array of membership bindings\n * @return {Expr}\n */\nfunction CreateRole(params) {\n  arity.exact(1, arguments, CreateRole.name)\n  return new Expr({ create_role: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a new access provider.\n *     - name: A valid schema name\n *     - issuer: A unique string\n *     - jwks_uri: A valid HTTPS URI\n *     - roles: An array of role/predicate pairs where the predicate returns a boolean.\n *                   The array can also contain Role references.\n * @return {Expr}\n */\nfunction CreateAccessProvider(params) {\n  arity.exact(1, arguments, CreateAccessProvider.name)\n  return new Expr({ create_access_provider: wrap(params) })\n}\n\n// Sets\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref of the document for which to retrieve the singleton set.\n * @return {Expr}\n */\nfunction Singleton(ref) {\n  arity.exact(1, arguments, Singleton.name)\n  return new Expr({ singleton: wrap(ref) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} ref\n *   A Ref or SetRef to retrieve an event set from.\n * @return {Expr}\n */\nfunction Events(ref_set) {\n  arity.exact(1, arguments, Events.name)\n  return new Expr({ events: wrap(ref_set) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} index\n *   The Ref of the index to match against.\n * @param {...module:query~ExprArg} terms\n *   A list of terms used in the match.\n * @return {Expr}\n */\nfunction Match(index) {\n  arity.min(1, arguments, Match.name)\n  var args = argsToArray(arguments)\n  args.shift()\n  return new Expr({ match: wrap(index), terms: wrap(varargs(args)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {...module:query~ExprArg} sets\n *   A list of SetRefs to union together.\n * @return {Expr}\n */\nfunction Union() {\n  arity.min(1, arguments, Union.name)\n  return new Expr({ union: wrap(varargs(arguments)) })\n}\n\n/**\n * Merge two or more objects..\n *\n * @param {...module:query~ExprArg} merge merge the first object.\n * @param {...module:query~ExprArg} _with the second object or a list of objects\n * @param {...module:query~ExprArg} lambda a lambda to resolve possible conflicts\n * @return {Expr}\n * */\nfunction Merge(merge, _with, lambda) {\n  arity.between(2, 3, arguments, Merge.name)\n  return new Expr(\n    params({ merge: wrap(merge), with: wrap(_with) }, { lambda: wrap(lambda) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {...module:query~ExprArg} sets\n *   A list of SetRefs to intersect.\n * @return {Expr}\n * */\nfunction Intersection() {\n  arity.min(1, arguments, Intersection.name)\n  return new Expr({ intersection: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {...module:query~ExprArg} sets\n *   A list of SetRefs to diff.\n * @return {Expr}\n * */\nfunction Difference() {\n  arity.min(1, arguments, Difference.name)\n  return new Expr({ difference: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} set\n *   A SetRef to remove duplicates from.\n * @return {Expr}\n * */\nfunction Distinct(set) {\n  arity.exact(1, arguments, Distinct.name)\n  return new Expr({ distinct: wrap(set) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} source\n *   A SetRef of the source set\n * @param {module:query~ExprArg|function} target\n *   A Lambda that will accept each element of the source Set and return a Set\n * @return {Expr}\n */\nfunction Join(source, target) {\n  arity.exact(2, arguments, Join.name)\n  return new Expr({ join: wrap(source), with: wrap(target) })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/range).\n *\n * @param {module:query~ExprArg} set\n *   A SetRef of the source set\n * @param {module:query~ExprArg} from\n *   The lower bound\n * @param {module:query~ExprArg} to\n *   The upper bound\n * @return {Expr}\n */\nfunction Range(set, from, to) {\n  arity.exact(3, arguments, Range.name)\n  return new Expr({ range: wrap(set), from: wrap(from), to: wrap(to) })\n}\n\n// Authentication\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @param {module:query~ExprArg} ref\n *   A Ref with credentials to authenticate against\n * @param {module:query~ExprArg} params\n *   An object of parameters to pass to the login function\n *     - password: The password used to login\n * @return {Expr}\n * */\nfunction Login(ref, params) {\n  arity.exact(2, arguments, Login.name)\n  return new Expr({ login: wrap(ref), params: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @param {module:query~ExprArg} delete_tokens\n *   If true, log out all tokens associated with the current session.\n * @return {Expr}\n */\nfunction Logout(delete_tokens) {\n  arity.exact(1, arguments, Logout.name)\n  return new Expr({ logout: wrap(delete_tokens) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to check the password against.\n * @param {module:query~ExprArg} password\n *   The credentials password to check.\n * @return {Expr}\n */\nfunction Identify(ref, password) {\n  arity.exact(2, arguments, Identify.name)\n  return new Expr({ identify: wrap(ref), password: wrap(password) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction Identity() {\n  arity.exact(0, arguments, Identity.name)\n  return new Expr({ identity: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction CurrentIdentity() {\n  arity.exact(0, arguments, CurrentIdentity.name)\n  return new Expr({ current_identity: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction HasIdentity() {\n  arity.exact(0, arguments, HasIdentity.name)\n  return new Expr({ has_identity: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\n\nfunction HasCurrentIdentity() {\n  arity.exact(0, arguments, HasCurrentIdentity.name)\n  return new Expr({ has_current_identity: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction CurrentToken() {\n  arity.exact(0, arguments, CurrentToken.name)\n  return new Expr({ current_token: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction HasCurrentToken() {\n  arity.exact(0, arguments, HasCurrentToken.name)\n  return new Expr({ has_current_token: null })\n}\n\n// String functions\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} strings - A list of strings to concatenate.\n * @param {string} separator  - The separator to use between each string.\n * @return {string} a single combined string\n */\nfunction Concat(strings, separator) {\n  arity.min(1, arguments, Concat.name)\n  separator = util.defaults(separator, null)\n  return new Expr(\n    params({ concat: wrap(strings) }, { separator: wrap(separator) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} string - The string to casefold.\n * @param {string} normalizer - The algorithm to use. One of: NFKCCaseFold, NFC, NFD, NFKC, NFKD.\n * @return {string} a normalized string\n */\nfunction Casefold(string, normalizer) {\n  arity.min(1, arguments, Casefold.name)\n  return new Expr(\n    params({ casefold: wrap(string) }, { normalizer: wrap(normalizer) })\n  )\n}\n\n/**\n * Returns true if the string contains the given substring, or false if otherwise\n *\n * @param {string} value  - the string to evaluate\n * @param {string} search - the substring to search for\n * @return {boolean}      - was the search result found\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/containsstr\">FaunaDB ContainsStr Function</a>\n */\nfunction ContainsStr(value, search) {\n  arity.exact(2, arguments, ContainsStr.name)\n  return new Expr({ containsstr: wrap(value), search: wrap(search) })\n}\n\n/**\n * Returns true if the string contains the given pattern, or false if otherwise\n *\n * @param {string} value   - the string to evaluate\n * @param {string} pattern - the pattern to search for\n * @return {boolean}       - was the regex search result found\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/containsstrregex\">FaunaDB ContainsStrRegex Function</a>\n */\nfunction ContainsStrRegex(value, pattern) {\n  arity.exact(2, arguments, ContainsStrRegex.name)\n  return new Expr({ containsstrregex: wrap(value), pattern: wrap(pattern) })\n}\n\n/**\n * Returns true if the string starts with the given prefix value, or false if otherwise\n *\n * @param {string} value   - the string to evaluate\n * @param {string} search  - the prefix to search for\n * @return {boolean}       - does `value` start with `search`\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/startswith\">FaunaDB StartsWith Function</a>\n */\nfunction StartsWith(value, search) {\n  arity.exact(2, arguments, StartsWith.name)\n  return new Expr({ startswith: wrap(value), search: wrap(search) })\n}\n\n/**\n * Returns true if the string ends with the given suffix value, or false if otherwise\n *\n * @param {string} value   - the string to evaluate\n * @param {string} search  - the suffix to search for\n * @return {boolean}       - does `value` end with `search`\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/endswith\">FaunaDB EndsWith Function</a>\n */\nfunction EndsWith(value, search) {\n  arity.exact(2, arguments, EndsWith.name)\n  return new Expr({ endswith: wrap(value), search: wrap(search) })\n}\n\n/**\n * It takes a string and returns a regex which matches the input string verbatim.\n *\n * @param value      - the string to analyze\n * @return {string}  - a regex which matches the input string verbatim\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/regexescape\">FaunaDB RegexEscape Function</a>\n */\nfunction RegexEscape(value) {\n  arity.exact(1, arguments, RegexEscape.name)\n  return new Expr({ regexescape: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to search.\n * @param {string} find - Find the first position of this string in the search string\n * @param {int} start - An optional start offset into the search string\n * @return {int} location of the found string or -1 if not found\n */\nfunction FindStr(value, find, start) {\n  arity.between(2, 3, arguments, FindStr.name)\n  start = util.defaults(start, null)\n  return new Expr(\n    params({ findstr: wrap(value), find: wrap(find) }, { start: wrap(start) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to search.\n * @param {string} pattern - Find the first position of this pattern in the search string using a java regular expression syntax\n * @param {int} start - An optional start offset into the search string\n * @param {int} numResults - An optional number of results to return, max 1024\n * @return {Array} an array of object describing where the search pattern was located\n */\nfunction FindStrRegex(value, pattern, start, numResults) {\n  arity.between(2, 4, arguments, FindStrRegex.name)\n  start = util.defaults(start, null)\n  return new Expr(\n    params(\n      { findstrregex: wrap(value), pattern: wrap(pattern) },\n      { start: wrap(start), num_results: wrap(numResults) }\n    )\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to calculate the length in codepoints.\n * @return {int} the length of the string in codepoints\n */\nfunction Length(value) {\n  arity.exact(1, arguments, Length.name)\n  return new Expr({ length: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to LowerCase.\n * @return {string} the string converted to lowercase\n */\nfunction LowerCase(value) {\n  arity.exact(1, arguments, LowerCase.name)\n  return new Expr({ lowercase: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to trim leading white space.\n * @return {string} the string with leading white space removed\n */\nfunction LTrim(value) {\n  arity.exact(1, arguments, LTrim.name)\n  return new Expr({ ltrim: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {module:query~ExprArg} terms\n *   A document from which to produce ngrams.\n * @param {?Object} opts\n *   An object of options\n *     - min: The minimum ngram size.\n *     - max: The maximum ngram size.\n * @return {Array|Value}\n */\nfunction NGram(terms, min, max) {\n  arity.between(1, 3, arguments, NGram.name)\n  min = util.defaults(min, null)\n  max = util.defaults(max, null)\n\n  return new Expr(\n    params({ ngram: wrap(terms) }, { min: wrap(min), max: wrap(max) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to repeat.\n * @param {int} number - The number of times to repeat the string\n * @return {string} a string which was repeated\n */\nfunction Repeat(value, number) {\n  arity.between(1, 2, arguments, Repeat.name)\n  number = util.defaults(number, null)\n  return new Expr(params({ repeat: wrap(value) }, { number: wrap(number) }))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to search.\n * @param {string} find - The string to find in the search string\n * @param {string} replace - The string to replace in the search string\n * @return {String} all the occurrences of find substituted with replace string\n */\nfunction ReplaceStr(value, find, replace) {\n  arity.exact(3, arguments, ReplaceStr.name)\n  return new Expr({\n    replacestr: wrap(value),\n    find: wrap(find),\n    replace: wrap(replace),\n  })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to search.\n * @param {string} pattern - The pattern to find in the search string using a java regular expression syntax\n * @param {string} replace - The string to replace in the search string\n * @param {boolean} first - Replace all or just the first\n * @return {string} all the occurrences of find pattern substituted with replace string\n */\nfunction ReplaceStrRegex(value, pattern, replace, first) {\n  arity.between(3, 4, arguments, ReplaceStrRegex.name)\n  first = util.defaults(first, null)\n  return new Expr(\n    params(\n      {\n        replacestrregex: wrap(value),\n        pattern: wrap(pattern),\n        replace: wrap(replace),\n      },\n      { first: wrap(first) }\n    )\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to remove white space from the end.\n * @return {string} the string with trailing whitespaces removed\n */\nfunction RTrim(value) {\n  arity.exact(1, arguments, RTrim.name)\n  return new Expr({ rtrim: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {int} num - The string of N Space(s).\n * @return {string} a string with spaces\n */\nfunction Space(num) {\n  arity.exact(1, arguments, Space.name)\n  return new Expr({ space: wrap(num) })\n}\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value  The string to SubString.\n * @param {int} start  The position the first character of the return string begins at\n * @param {int} length  An optional length, if omitted then returns to the end of string\n * @return {string}\n */\nfunction SubString(value, start, length) {\n  arity.between(1, 3, arguments, SubString.name)\n  start = util.defaults(start, null)\n  length = util.defaults(length, null)\n  return new Expr(\n    params(\n      { substring: wrap(value) },\n      { start: wrap(start), length: wrap(length) }\n    )\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to TitleCase.\n * @return {string}  A string converted to titlecase\n */\nfunction TitleCase(value) {\n  arity.exact(1, arguments, TitleCase.name)\n  return new Expr({ titlecase: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to Trim.\n * @return {string} a string with leading and trailing whitespace removed\n */\nfunction Trim(value) {\n  arity.exact(1, arguments, Trim.name)\n  return new Expr({ trim: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to Uppercase.\n * @return {string} An uppercase string\n */\nfunction UpperCase(value) {\n  arity.exact(1, arguments, UpperCase.name)\n  return new Expr({ uppercase: wrap(value) })\n}\n\n/**\n * Format values into a string.\n *\n * @param  {string}  string string with format specifiers\n * @param  {array}   values list of values to format\n * @return {string}         a string\n */\nfunction Format(string) {\n  arity.min(1, arguments, Format.name)\n  var args = argsToArray(arguments)\n  args.shift()\n  return new Expr({ format: wrap(string), values: wrap(varargs(args)) })\n}\n\n// Time and date functions\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#time-and-date).\n *\n * @param {module:query~ExprArg} string\n *   A string to converted to a time object.\n * @return {Expr}\n */\nfunction Time(string) {\n  arity.exact(1, arguments, Time.name)\n  return new Expr({ time: wrap(string) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#time-and-date).\n *\n * @param {module:query~ExprArg} number\n *   The number of `unit`s from Epoch\n * @param {module:query~ExprArg} unit\n *   The unit of `number`. One of second, millisecond, microsecond, nanosecond.\n * @return {Expr}\n */\nfunction Epoch(number, unit) {\n  arity.exact(2, arguments, Epoch.name)\n  return new Expr({ epoch: wrap(number), unit: wrap(unit) })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/timeadd).\n *\n * Returns a new time or date with the offset in terms of the unit\n * added.\n *\n * @param base the base time or data\n * @param offset the number of units\n * @param unit the unit type\n * @return {Expr}\n */\nfunction TimeAdd(base, offset, unit) {\n  arity.exact(3, arguments, TimeAdd.name)\n  return new Expr({\n    time_add: wrap(base),\n    offset: wrap(offset),\n    unit: wrap(unit),\n  })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/timesubtract).\n *\n * Returns a new time or date with the offset in terms of the unit\n * subtracted.\n *\n * @param base the base time or data\n * @param offset the number of units\n * @param unit the unit type\n * @return {Expr}\n */\nfunction TimeSubtract(base, offset, unit) {\n  arity.exact(3, arguments, TimeSubtract.name)\n  return new Expr({\n    time_subtract: wrap(base),\n    offset: wrap(offset),\n    unit: wrap(unit),\n  })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/timediff).\n *\n * Returns the number of intervals in terms of the unit between\n * two times or dates. Both start and finish must be of the same\n * type.\n *\n * @param start the starting time or date, inclusive\n * @param finish the ending time or date, exclusive\n * @param unit the unit type\n * @return {Expr}\n */\nfunction TimeDiff(start, finish, unit) {\n  arity.exact(3, arguments, TimeDiff.name)\n  return new Expr({\n    time_diff: wrap(start),\n    other: wrap(finish),\n    unit: wrap(unit),\n  })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#time-and-date).\n *\n * @param {module:query~ExprArg} string\n *   A string to convert to a Date object\n * @return {Expr}\n */\nfunction Date(string) {\n  arity.exact(1, arguments, Date.name)\n  return new Expr({ date: wrap(string) })\n}\n\n/**\n * Returns the current snapshot time.\n *\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/now\">Now function</a>\n */\nfunction Now() {\n  arity.exact(0, arguments, Now.name)\n  return new Expr({ now: wrap(null) })\n}\n\n// Miscellaneous functions\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @deprecated use NewId instead\n * @return {Expr}\n */\nfunction NextId() {\n  arity.exact(0, arguments, NextId.name)\n  return new Expr({ next_id: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @return {Expr}\n */\nfunction NewId() {\n  arity.exact(0, arguments, NewId.name)\n  return new Expr({ new_id: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the database.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the database's scope.\n * @return {Expr}\n */\nfunction Database(name, scope) {\n  arity.between(1, 2, arguments, Database.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ database: wrap(name) })\n    case 2:\n      return new Expr({ database: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the index.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the index's scope.\n * @return {Expr}\n */\nfunction Index(name, scope) {\n  arity.between(1, 2, arguments, Index.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ index: wrap(name) })\n    case 2:\n      return new Expr({ index: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the class.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the class's scope.\n * @return {Expr}\n *\n * @deprecated Class is deprecated, use Collection instead\n */\nfunction Class(name, scope) {\n  arity.between(1, 2, arguments, Class.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ class: wrap(name) })\n    case 2:\n      return new Expr({ class: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the collection.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the collection's scope.\n * @return {Expr}\n */\nfunction Collection(name, scope) {\n  arity.between(1, 2, arguments, Collection.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ collection: wrap(name) })\n    case 2:\n      return new Expr({ collection: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the user defined function.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the user defined function's scope.\n * @return {Expr}\n */\nfunction FunctionFn(name, scope) {\n  arity.between(1, 2, arguments, FunctionFn.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ function: wrap(name) })\n    case 2:\n      return new Expr({ function: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the role.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the role's scope.\n * @return {Expr}\n */\nfunction Role(name, scope) {\n  arity.between(1, 2, arguments, Role.name)\n  scope = util.defaults(scope, null)\n  return new Expr(params({ role: wrap(name) }, { scope: wrap(scope) }))\n}\n\n/**\n *\n * @param {module:query~ExprArg} scope\n *   The Ref of the database set's scope.\n * @return {Expr}\n */\nfunction AccessProviders(scope) {\n  arity.max(1, arguments, AccessProviders.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ access_providers: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `classes` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the class set's scope.\n * @return {Expr}\n */\nfunction Classes(scope) {\n  arity.max(1, arguments, Classes.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ classes: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `collections` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the collection set's scope.\n * @return {Expr}\n */\nfunction Collections(scope) {\n  arity.max(1, arguments, Collections.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ collections: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `databases` functions that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the database set's scope.\n * @return {Expr}\n */\nfunction Databases(scope) {\n  arity.max(1, arguments, Databases.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ databases: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs an `indexes` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the index set's scope.\n * @return {Expr}\n */\nfunction Indexes(scope) {\n  arity.max(1, arguments, Indexes.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ indexes: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `functions` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the user defined function set's scope.\n * @return {Expr}\n */\nfunction Functions(scope) {\n  arity.max(1, arguments, Functions.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ functions: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `roles` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the role set's scope.\n * @return {Expr}\n */\nfunction Roles(scope) {\n  arity.max(1, arguments, Roles.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ roles: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `keys` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the key set's scope.\n * @return {Expr}\n */\nfunction Keys(scope) {\n  arity.max(1, arguments, Keys.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ keys: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `tokens` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the token set's scope.\n * @return {Expr}\n */\nfunction Tokens(scope) {\n  arity.max(1, arguments, Tokens.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ tokens: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `credentials` functions that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the credential set's scope.\n * @return {Expr}\n */\nfunction Credentials(scope) {\n  arity.max(1, arguments, Credentials.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ credentials: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of expressions to check for equivalence.\n * @return {Expr}\n */\nfunction Equals() {\n  arity.min(1, arguments, Equals.name)\n  return new Expr({ equals: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} path\n *   An array representing a path to check for the existence of.\n * @param {module:query~ExprArg} in\n *   An object to search against.\n * @return {Expr}\n *\n * @deprecated use ContainsPath instead\n */\nfunction Contains(path, _in) {\n  arity.exact(2, arguments, Contains.name)\n  return new Expr({ contains: wrap(path), in: wrap(_in) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} value\n *   Represent the value we want to search for.\n * @param {module:query~ExprArg} in\n *   An object we will search for the value passed in.\n * @return {Expr}\n */\nfunction ContainsValue(value, _in) {\n  arity.exact(2, arguments, ContainsValue.name)\n  return new Expr({ contains_value: wrap(value), in: wrap(_in) })\n}\n\n/**\n * @param {string} field\n *   A field name we want to confirm exists.\n * @param {module:query~ExprArg} obj\n *   An object to search against.\n * @return {Expr}\n */\nfunction ContainsField(field, obj) {\n  arity.exact(2, arguments, ContainsField.name)\n  return new Expr({ contains_field: wrap(field), in: wrap(obj) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} path\n *   An array representing a path to check for the existence of.\n * @param {module:query~ExprArg} in\n *   An object to search against.\n * @return {Expr}\n */\nfunction ContainsPath(path, _in) {\n  arity.exact(2, arguments, ContainsPath.name)\n  return new Expr({ contains_path: wrap(path), in: wrap(_in) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} path\n *   An array representing a path to pull from an object.\n * @param {module:query~ExprArg} from\n *   The object to select from\n * @param {?module:query~ExprArg} default\n *   A default value if the path does not exist.\n * @return {Expr}\n */\nfunction Select(path, from, _default) {\n  arity.between(2, 3, arguments, Select.name)\n  var exprObj = { select: wrap(path), from: wrap(from) }\n  if (_default !== undefined) {\n    exprObj.default = wrap(_default)\n  }\n  return new Expr(exprObj)\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} path\n *   An array representing a path to pull from an object.\n * @param {module:query~ExprArg} from\n *   The object to select from\n * @return {Expr}\n *\n * @deprecated avoid using\n */\nfunction SelectAll(path, from) {\n  arity.exact(2, arguments, SelectAll.name)\n  return new Expr({ select_all: wrap(path), from: wrap(from) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to provide the absolute value.\n * @return {Expr}\n */\nfunction Abs(expr) {\n  arity.exact(1, arguments, Abs.name)\n  return new Expr({ abs: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to sum together.\n * @return {Expr}\n */\nfunction Add() {\n  arity.min(1, arguments, Add.name)\n  return new Expr({ add: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to bitwise and together.\n * @return {Expr}\n */\nfunction BitAnd() {\n  arity.min(1, arguments, BitAnd.name)\n  return new Expr({ bitand: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to provide the bitwise not.\n * @return {Expr}\n */\nfunction BitNot(expr) {\n  arity.exact(1, arguments, BitNot.name)\n  return new Expr({ bitnot: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to bitwise Or'd together.\n * @return {Expr}\n */\nfunction BitOr() {\n  arity.min(1, arguments, BitOr.name)\n  return new Expr({ bitor: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to bitwise Xor'd together.\n * @return {Expr}\n */\nfunction BitXor() {\n  arity.min(1, arguments, BitXor.name)\n  return new Expr({ bitxor: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The least integer that is greater than or equal to the number\n * @return {Expr}\n */\nfunction Ceil(expr) {\n  arity.exact(1, arguments, Ceil.name)\n  return new Expr({ ceil: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to compute the quotient of.\n * @return {Expr}\n */\nfunction Divide() {\n  arity.min(1, arguments, Divide.name)\n  return new Expr({ divide: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The greatest integer that is less than or equal to the number\n * @return {Expr}\n */\nfunction Floor(expr) {\n  arity.exact(1, arguments, Floor.name)\n  return new Expr({ floor: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to multiply together.\n * @return {Expr}\n */\nfunction Max() {\n  arity.min(1, arguments, Max.name)\n  return new Expr({ max: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to multiply together.\n * @return {Expr}\n */\nfunction Min() {\n  arity.min(1, arguments, Min.name)\n  return new Expr({ min: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to compute the quotient of. The remainder will be returned.\n * @return {Expr}\n */\nfunction Modulo() {\n  arity.min(1, arguments, Modulo.name)\n  return new Expr({ modulo: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to multiply together.\n * @return {Expr}\n */\nfunction Multiply() {\n  arity.min(1, arguments, Multiply.name)\n  return new Expr({ multiply: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to round.\n * @param {...module:query~ExprArg} terms\n *   An optional precision\n * @return {Expr}\n */\nfunction Round(value, precision) {\n  arity.min(1, arguments, Round.name)\n  precision = util.defaults(precision, null)\n  return new Expr(\n    params({ round: wrap(value) }, { precision: wrap(precision) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to compute the difference of.\n * @return {Expr}\n */\nfunction Subtract() {\n  arity.min(1, arguments, Subtract.name)\n  return new Expr({ subtract: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The sign of the number is returned as positive 1, zero 0 , negative -1\n * @return {Expr}\n */\nfunction Sign(expr) {\n  arity.exact(1, arguments, Sign.name)\n  return new Expr({ sign: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The square root of the number\n * @return {Expr}\n */\nfunction Sqrt(expr) {\n  arity.exact(1, arguments, Sqrt.name)\n  return new Expr({ sqrt: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to truncate.\n * @param {...module:query~ExprArg} terms\n *   An optional precision\n * @return {Expr}\n */\nfunction Trunc(value, precision) {\n  arity.min(1, arguments, Trunc.name)\n  precision = util.defaults(precision, null)\n  return new Expr(\n    params({ trunc: wrap(value) }, { precision: wrap(precision) })\n  )\n}\n\n/**\n *\n * Count the number of elements in the collection.\n *\n * @param {array}    - array of items\n * @return {integer} - number of items in the collection\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/count\">Count function</a>\n */\nfunction Count(collection) {\n  arity.exact(1, arguments, Count.name)\n  return new Expr({ count: wrap(collection) })\n}\n\n/**\n *\n * Sum the elements in the collection.\n *\n * @param {array} - collection of numbers\n * @return {integer} - total of all numbers in collection\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/sum\">Sum function</a>\n */\nfunction Sum(collection) {\n  arity.exact(1, arguments, Sum.name)\n  return new Expr({ sum: wrap(collection) })\n}\n\n/**\n *\n * Returns the mean of all elements in the collection.\n *\n * @param {array} - collection the numbers\n * @return {float} - the mean of all numbers in the collection\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/mean\">Mean function</a>\n */\nfunction Mean(collection) {\n  arity.exact(1, arguments, Mean.name)\n  return new Expr({ mean: wrap(collection) })\n}\n\n/**\n *\n * Evaluates to true if any element of the collection is true.\n *\n * @param {array} - collection the collection\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/any\">Any function</a>\n */\nfunction Any(collection) {\n  arity.exact(1, arguments, Any.name)\n  return new Expr({ any: wrap(collection) })\n}\n\n/**\n *\n * Evaluates to true if all elements of the collection are true.\n *\n * @param {array} - collection the collection\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/all\">All function</a>\n */\nfunction All(collection) {\n  arity.exact(1, arguments, All.name)\n  return new Expr({ all: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The arc cosine of the number\n * @return {Expr}\n */\nfunction Acos(expr) {\n  arity.exact(1, arguments, Acos.name)\n  return new Expr({ acos: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The arc sine of the number\n * @return {Expr}\n */\nfunction Asin(expr) {\n  arity.exact(1, arguments, Asin.name)\n  return new Expr({ asin: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The arc tangent of the number\n * @return {Expr}\n */\nfunction Atan(expr) {\n  arity.exact(1, arguments, Atan.name)\n  return new Expr({ atan: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The cosine of a number\n * @return {Expr}\n */\nfunction Cos(expr) {\n  arity.exact(1, arguments, Cos.name)\n  return new Expr({ cos: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The hyperbolic cosine of the number\n * @return {Expr}\n */\nfunction Cosh(expr) {\n  arity.exact(1, arguments, Cosh.name)\n  return new Expr({ cosh: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   Take radians and convert it to degrees 360 degrees = 2 * pi radians\n * @return {Expr}\n */\nfunction Degrees(expr) {\n  arity.exact(1, arguments, Degrees.name)\n  return new Expr({ degrees: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The e raised to an exponent number\n * @return {Expr}\n */\nfunction Exp(expr) {\n  arity.exact(1, arguments, Exp.name)\n  return new Expr({ exp: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A side of the right triangle\n * @param {...module:query~ExprArg} terms\n *   The second side of a right triange, defaults to the first side\n * @return {Expr}\n */\nfunction Hypot(value, side) {\n  arity.min(1, arguments, Hypot.name)\n  side = util.defaults(side, null)\n  return new Expr(params({ hypot: wrap(value) }, { b: wrap(side) }))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The natural log of the number\n * @return {Expr}\n */\nfunction Ln(expr) {\n  arity.exact(1, arguments, Ln.name)\n  return new Expr({ ln: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The log base 10 of a number\n * @return {Expr}\n */\nfunction Log(expr) {\n  arity.exact(1, arguments, Log.name)\n  return new Expr({ log: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to raise to the power.\n * @param {...module:query~ExprArg} terms\n *   An optional exponent\n * @return {Expr}\n */\nfunction Pow(value, exponent) {\n  arity.min(1, arguments, Pow.name)\n  exponent = util.defaults(exponent, null)\n  return new Expr(params({ pow: wrap(value) }, { exp: wrap(exponent) }))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   Take degrees and convert the number to radians 2 * pi = 360 degrees\n * @return {Expr}\n */\nfunction Radians(expr) {\n  arity.exact(1, arguments, Radians.name)\n  return new Expr({ radians: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The sine of a number\n * @return {Expr}\n */\nfunction Sin(expr) {\n  arity.exact(1, arguments, Sin.name)\n  return new Expr({ sin: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The hyperbolic sine of a number\n * @return {Expr}\n */\nfunction Sinh(expr) {\n  arity.exact(1, arguments, Sinh.name)\n  return new Expr({ sinh: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The Tangent of a number\n * @return {Expr}\n */\nfunction Tan(expr) {\n  arity.exact(1, arguments, Tan.name)\n  return new Expr({ tan: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The hyberbolic tangent of a number\n * @return {Expr}\n */\nfunction Tanh(expr) {\n  arity.exact(1, arguments, Tanh.name)\n  return new Expr({ tanh: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of terms to compare.\n * @return {Expr}\n */\nfunction LT() {\n  arity.min(1, arguments, LT.name)\n  return new Expr({ lt: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of terms to compare.\n * @return {Expr}\n */\nfunction LTE() {\n  arity.min(1, arguments, LTE.name)\n  return new Expr({ lte: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of terms to compare.\n * @return {Expr}\n */\nfunction GT() {\n  arity.min(1, arguments, GT.name)\n  return new Expr({ gt: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of terms to compare.\n * @return {Expr}\n */\nfunction GTE() {\n  arity.min(1, arguments, GTE.name)\n  return new Expr({ gte: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection to compute the conjunction of.\n * @return {Expr}\n */\nfunction And() {\n  arity.min(1, arguments, And.name)\n  return new Expr({ and: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection to compute the disjunction of.\n * @return {Expr}\n */\nfunction Or() {\n  arity.min(1, arguments, Or.name)\n  return new Expr({ or: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {module:query~ExprArg} boolean\n *   A boolean to produce the negation of.\n * @return {Expr}\n */\nfunction Not(boolean) {\n  arity.exact(1, arguments, Not.name)\n  return new Expr({ not: wrap(boolean) })\n}\n\n/**\n * Converts an expression to a string literal.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a string.\n * @return {Expr}\n */\nfunction ToString(expr) {\n  arity.exact(1, arguments, ToString.name)\n  return new Expr({ to_string: wrap(expr) })\n}\n\n/**\n * Converts an expression to a number literal.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a number.\n * @return {Expr}\n */\nfunction ToNumber(expr) {\n  arity.exact(1, arguments, ToNumber.name)\n  return new Expr({ to_number: wrap(expr) })\n}\n\n/**\n * Converts an expression to an Object.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to an Object.\n * @return {Expr}\n */\nfunction ToObject(expr) {\n  arity.exact(1, arguments, ToObject.name)\n  return new Expr({ to_object: wrap(expr) })\n}\n\n/**\n * Converts an expression to an Array.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to an Array.\n * @return {Expr}\n */\nfunction ToArray(expr) {\n  arity.exact(1, arguments, ToArray.name)\n  return new Expr({ to_array: wrap(expr) })\n}\n\n/**\n * Converts an expression to a double value, if possible.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a double.\n * @return {Expr}\n */\nfunction ToDouble(expr) {\n  arity.exact(1, arguments, ToDouble.name)\n  return new Expr({ to_double: wrap(expr) })\n}\n\n/**\n * Converts an expression to an integer value, if possible.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to an integer.\n * @return {Expr}\n */\nfunction ToInteger(expr) {\n  arity.exact(1, arguments, ToInteger.name)\n  return new Expr({ to_integer: wrap(expr) })\n}\n\n/**\n * Converts an expression to a time literal.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a time.\n * @return {Expr}\n */\nfunction ToTime(expr) {\n  arity.exact(1, arguments, ToTime.name)\n  return new Expr({ to_time: wrap(expr) })\n}\n\n/**\n * Converts an expression evaluating to a time to seconds since epoch.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to seconds numeric value.\n * @return {Expr}\n */\nfunction ToSeconds(expr) {\n  arity.exact(1, arguments, ToSeconds.name)\n  return new Expr({ to_seconds: wrap(expr) })\n}\n\n/**\n * Converts a time expression to milliseconds since the UNIX epoch.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to millisecond numeric value.\n * @return {Expr}\n */\nfunction ToMillis(expr) {\n  arity.exact(1, arguments, ToMillis.name)\n  return new Expr({ to_millis: wrap(expr) })\n}\n\n/**\n * Converts a time expression to microseconds since the UNIX epoch.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to microsecond numeric value.\n * @return {Expr}\n */\nfunction ToMicros(expr) {\n  arity.exact(1, arguments, ToMicros.name)\n  return new Expr({ to_micros: wrap(expr) })\n}\n\n/**\n * Returns a time expression's day of the week following ISO-8601 convention, from 1 (Monday) to 7 (Sunday).\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to day of week.\n * @return {Expr}\n */\nfunction DayOfWeek(expr) {\n  arity.exact(1, arguments, DayOfWeek.name)\n  return new Expr({ day_of_week: wrap(expr) })\n}\n\n/**\n * Returns a time expression's day of the year, from 1 to 365, or 366 in a leap year.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to day of year.\n * @return {Expr}\n */\nfunction DayOfYear(expr) {\n  arity.exact(1, arguments, DayOfYear.name)\n  return new Expr({ day_of_year: wrap(expr) })\n}\n\n/**\n * Returns a time expression's day of the month, from 1 to 31.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to day of month.\n * @return {Expr}\n */\nfunction DayOfMonth(expr) {\n  arity.exact(1, arguments, DayOfMonth.name)\n  return new Expr({ day_of_month: wrap(expr) })\n}\n\n/**\n * Returns a time expression's second of the minute, from 0 to 59.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a hour.\n * @return {Expr}\n */\nfunction Hour(expr) {\n  arity.exact(1, arguments, Hour.name)\n  return new Expr({ hour: wrap(expr) })\n}\n\n/**\n * Returns a time expression's second of the minute, from 0 to 59.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a month.\n * @return {Expr}\n */\nfunction Minute(expr) {\n  arity.exact(1, arguments, Minute.name)\n  return new Expr({ minute: wrap(expr) })\n}\n\n/**\n * Returns a time expression's second of the minute, from 0 to 59.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a month.\n * @return {Expr}\n */\nfunction Second(expr) {\n  arity.exact(1, arguments, Second.name)\n  return new Expr({ second: wrap(expr) })\n}\n\n/**\n * Returns a time expression's month of the year, from 1 to 12.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a month.\n * @return {Expr}\n */\nfunction Month(expr) {\n  arity.exact(1, arguments, Month.name)\n  return new Expr({ month: wrap(expr) })\n}\n\n/**\n * Returns the time expression's year, following the ISO-8601 standard.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a year.\n * @return {Expr}\n */\nfunction Year(expr) {\n  arity.exact(1, arguments, Year.name)\n  return new Expr({ year: wrap(expr) })\n}\n\n/**\n * Converts an expression to a date literal.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a date.\n * @return {Expr}\n */\nfunction ToDate(expr) {\n  arity.exact(1, arguments, ToDate.name)\n  return new Expr({ to_date: wrap(expr) })\n}\n\n/**\n * Move database to a new hierarchy.\n *\n * @param {string}  from database reference to be moved.\n * @param {string}  to new parent database reference.\n * @return {Expr}   The expression wrapping the provided object.\n * @see <a href=\"https://app.fauna.com/documentation/reference/queryapi#write-functions\">FaunaDB Write Functions</a>\n */\nfunction MoveDatabase(from, to) {\n  arity.exact(2, arguments, MoveDatabase.name)\n  return new Expr({ move_database: wrap(from), to: wrap(to) })\n}\n\n/**\n * Returns a set of all documents in the given collection.\n * A set must be paginated in order to retrieve its values.\n *\n * @param collection a reference to the collection. Type: Ref\n * @return a new {@link Expr} instance\n * @see #Paginate(Expr)\n */\nfunction Documents(collection) {\n  arity.exact(1, arguments, Documents.name)\n  return new Expr({ documents: wrap(collection) })\n}\n\n/**\n *\n * @param {module:query~ExprArg} expr\n *  An expression (i.e. Set, Page, or Array) to reverse\n * @return {Expr}\n */\nfunction Reverse(expr) {\n  arity.exact(1, arguments, Reverse.name)\n  return new Expr({ reverse: wrap(expr) })\n}\n\n/**\n *\n * @param {module:query~ExprArg} name\n * A string representing an AccessProvider's name\n * @return {Expr}\n */\nfunction AccessProvider(name) {\n  arity.exact(1, arguments, AccessProvider.name)\n  return new Expr({ access_provider: wrap(name) })\n}\n\n// Helpers\n\n/**\n * @ignore\n */\nfunction arity(min, max, args, callerFunc) {\n  if (\n    (min !== null && args.length < min) ||\n    (max !== null && args.length > max)\n  ) {\n    throw new errors.InvalidArity(min, max, args.length, callerFunc)\n  }\n\n  if (min !== null) {\n    for (let i = 0; i < min; i++) {\n      if (args[i] === undefined) {\n        throw new errors.InvalidValue(\n          `Expected value, but found 'undefined'. Argument ${i} for ${callerFunc} is required.`\n        )\n      }\n    }\n  }\n}\n\narity.exact = function(n, args, callerFunc) {\n  arity(n, n, args, callerFunc)\n}\narity.max = function(n, args, callerFunc) {\n  arity(null, n, args, callerFunc)\n}\narity.min = function(n, args, callerFunc) {\n  arity(n, null, args, callerFunc)\n}\narity.between = function(min, max, args, callerFunc) {\n  arity(min, max, args, callerFunc)\n}\n\n/** Adds optional parameters to the query.\n *\n * @ignore\n * */\nfunction params(mainParams, optionalParams) {\n  for (var key in optionalParams) {\n    var val = optionalParams[key]\n    if (val !== null && val !== undefined) {\n      mainParams[key] = val\n    }\n  }\n  return mainParams\n}\n\n/**\n * Called on rest arguments.\n * This ensures that a single value passed is not put in an array, so\n * `query.add([1, 2])` will work as well as `query.add(1, 2)`.\n *\n * @ignore\n */\nfunction varargs(values) {\n  var valuesAsArr = Array.isArray(values)\n    ? values\n    : Array.prototype.slice.call(values)\n  return values.length === 1 ? values[0] : valuesAsArr\n}\n\n/**\n * @ignore\n */\nfunction argsToArray(args) {\n  var rv = []\n  rv.push.apply(rv, args)\n  return rv\n}\n\n/**\n * Wraps an object as an Expression. This will automatically wrap any bare objects with\n * the appropriate {@link object} escaping.\n * @param {Object} obj\n *  The object to be wrapped as an Expression.\n * @returns {Expr}\n *   The expression wrapping the provided object.\n * @private\n */\nfunction wrap(obj) {\n  // the arity functions throw when provided undefined arguments\n  // but wrap can accept undefined values. It still should be given\n  // exactly one argument, even if it is undefined.\n  if (arguments.length !== 1) {\n    throw new errors.InvalidArity(1, 1, arguments.length, wrap.name)\n  }\n  if (obj === undefined || obj === null) {\n    return obj\n  } else if (\n    obj instanceof Expr ||\n    util.checkInstanceHasProperty(obj, '_isFaunaExpr')\n  ) {\n    return obj\n  } else if (typeof obj === 'symbol') {\n    return obj.toString().replace(/Symbol\\((.*)\\)/, function(str, symbol) {\n      return symbol\n    })\n  } else if (typeof obj === 'function') {\n    return Lambda(obj)\n  } else if (Array.isArray(obj)) {\n    return new Expr(\n      obj.map(function(elem) {\n        return wrap(elem)\n      })\n    )\n  } else if (obj instanceof Uint8Array || obj instanceof ArrayBuffer) {\n    return new values.Bytes(obj)\n  } else if (typeof obj === 'object') {\n    return new Expr({ object: wrapValues(obj) })\n  } else {\n    return obj\n  }\n}\n\n/**\n * Wraps all of the values of a provided Object, while leaving the parent object unwrapped.\n * @param {Object} obj\n *  The object whose values are to be wrapped as Expressions.\n * @returns {Object}\n *  A copy of the provided object, with the values wrapped as Expressions.\n * @private\n */\nfunction wrapValues(obj) {\n  if (obj !== null) {\n    var rv = {}\n\n    Object.keys(obj).forEach(function(key) {\n      rv[key] = wrap(obj[key])\n    })\n\n    return rv\n  } else {\n    return null\n  }\n}\n\nmodule.exports = {\n  Ref: Ref,\n  Bytes: Bytes,\n  Abort: Abort,\n  At: At,\n  Let: Let,\n  Var: Var,\n  If: If,\n  Do: Do,\n  Object: objectFunction,\n  Lambda: Lambda,\n  Call: Call,\n  Query: Query,\n  Map: Map,\n  Foreach: Foreach,\n  Filter: Filter,\n  Take: Take,\n  Drop: Drop,\n  Prepend: Prepend,\n  Append: Append,\n  IsEmpty: IsEmpty,\n  IsNonEmpty: IsNonEmpty,\n  IsNumber: IsNumber,\n  IsDouble: IsDouble,\n  IsInteger: IsInteger,\n  IsBoolean: IsBoolean,\n  IsNull: IsNull,\n  IsBytes: IsBytes,\n  IsTimestamp: IsTimestamp,\n  IsDate: IsDate,\n  IsString: IsString,\n  IsArray: IsArray,\n  IsObject: IsObject,\n  IsRef: IsRef,\n  IsSet: IsSet,\n  IsDoc: IsDoc,\n  IsLambda: IsLambda,\n  IsCollection: IsCollection,\n  IsDatabase: IsDatabase,\n  IsIndex: IsIndex,\n  IsFunction: IsFunction,\n  IsKey: IsKey,\n  IsToken: IsToken,\n  IsCredentials: IsCredentials,\n  IsRole: IsRole,\n  Get: Get,\n  KeyFromSecret: KeyFromSecret,\n  Reduce: Reduce,\n  Paginate: Paginate,\n  Exists: Exists,\n  Create: Create,\n  Update: Update,\n  Replace: Replace,\n  Delete: Delete,\n  Insert: Insert,\n  Remove: Remove,\n  CreateClass: deprecate(\n    CreateClass,\n    'CreateClass() is deprecated, use CreateCollection() instead'\n  ),\n  CreateCollection: CreateCollection,\n  CreateDatabase: CreateDatabase,\n  CreateIndex: CreateIndex,\n  CreateKey: CreateKey,\n  CreateFunction: CreateFunction,\n  CreateRole: CreateRole,\n  CreateAccessProvider: CreateAccessProvider,\n  Singleton: Singleton,\n  Events: Events,\n  Match: Match,\n  Union: Union,\n  Merge: Merge,\n  Intersection: Intersection,\n  Difference: Difference,\n  Distinct: Distinct,\n  Join: Join,\n  Range: Range,\n  Login: Login,\n  Logout: Logout,\n  Identify: Identify,\n  Identity: deprecate(\n    Identity,\n    'Identity() is deprecated, use CurrentIdentity() instead'\n  ),\n  CurrentIdentity: CurrentIdentity,\n  HasIdentity: deprecate(\n    HasIdentity,\n    'HasIdentity() is deprecated, use HasCurrentIdentity() instead'\n  ),\n  HasCurrentIdentity: HasCurrentIdentity,\n  CurrentToken: CurrentToken,\n  HasCurrentToken: HasCurrentToken,\n  Concat: Concat,\n  Casefold: Casefold,\n  ContainsStr: ContainsStr,\n  ContainsStrRegex: ContainsStrRegex,\n  StartsWith: StartsWith,\n  EndsWith: EndsWith,\n  FindStr: FindStr,\n  FindStrRegex: FindStrRegex,\n  Length: Length,\n  LowerCase: LowerCase,\n  LTrim: LTrim,\n  NGram: NGram,\n  Repeat: Repeat,\n  ReplaceStr: ReplaceStr,\n  ReplaceStrRegex: ReplaceStrRegex,\n  RegexEscape: RegexEscape,\n  RTrim: RTrim,\n  Space: Space,\n  SubString: SubString,\n  TitleCase: TitleCase,\n  Trim: Trim,\n  UpperCase: UpperCase,\n  Format: Format,\n  Time: Time,\n  TimeAdd: TimeAdd,\n  TimeSubtract: TimeSubtract,\n  TimeDiff: TimeDiff,\n  Epoch: Epoch,\n  Date: Date,\n  Now: Now,\n  NextId: deprecate(NextId, 'NextId() is deprecated, use NewId() instead'),\n  NewId: NewId,\n  Database: Database,\n  Index: Index,\n  Class: deprecate(Class, 'Class() is deprecated, use Collection() instead'),\n  Collection: Collection,\n  Function: FunctionFn,\n  Role: Role,\n  AccessProviders: AccessProviders,\n  Classes: deprecate(\n    Classes,\n    'Classes() is deprecated, use Collections() instead'\n  ),\n  Collections: Collections,\n  Databases: Databases,\n  Indexes: Indexes,\n  Functions: Functions,\n  Roles: Roles,\n  Keys: Keys,\n  Tokens: Tokens,\n  Credentials: Credentials,\n  Equals: Equals,\n  Contains: deprecate(\n    Contains,\n    'Contains() is deprecated, use ContainsPath() instead'\n  ),\n  ContainsPath: ContainsPath,\n  ContainsField: ContainsField,\n  ContainsValue: ContainsValue,\n  Select: Select,\n  SelectAll: deprecate(SelectAll, 'SelectAll() is deprecated. Avoid use.'),\n  Abs: Abs,\n  Add: Add,\n  BitAnd: BitAnd,\n  BitNot: BitNot,\n  BitOr: BitOr,\n  BitXor: BitXor,\n  Ceil: Ceil,\n  Divide: Divide,\n  Floor: Floor,\n  Max: Max,\n  Min: Min,\n  Modulo: Modulo,\n  Multiply: Multiply,\n  Round: Round,\n  Subtract: Subtract,\n  Sign: Sign,\n  Sqrt: Sqrt,\n  Trunc: Trunc,\n  Count: Count,\n  Sum: Sum,\n  Mean: Mean,\n  Any: Any,\n  All: All,\n  Acos: Acos,\n  Asin: Asin,\n  Atan: Atan,\n  Cos: Cos,\n  Cosh: Cosh,\n  Degrees: Degrees,\n  Exp: Exp,\n  Hypot: Hypot,\n  Ln: Ln,\n  Log: Log,\n  Pow: Pow,\n  Radians: Radians,\n  Sin: Sin,\n  Sinh: Sinh,\n  Tan: Tan,\n  Tanh: Tanh,\n  LT: LT,\n  LTE: LTE,\n  GT: GT,\n  GTE: GTE,\n  And: And,\n  Or: Or,\n  Not: Not,\n  ToString: ToString,\n  ToNumber: ToNumber,\n  ToObject: ToObject,\n  ToArray: ToArray,\n  ToDouble: ToDouble,\n  ToInteger: ToInteger,\n  ToTime: ToTime,\n  ToSeconds: ToSeconds,\n  ToMicros: ToMicros,\n  ToMillis: ToMillis,\n  DayOfMonth: DayOfMonth,\n  DayOfWeek: DayOfWeek,\n  DayOfYear: DayOfYear,\n  Second: Second,\n  Minute: Minute,\n  Hour: Hour,\n  Month: Month,\n  Year: Year,\n  ToDate: ToDate,\n  MoveDatabase: MoveDatabase,\n  Documents: Documents,\n  Reverse: Reverse,\n  AccessProvider: AccessProvider,\n  arity: arity,\n  wrap: wrap,\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvcXVlcnkuanMiLCJtYXBwaW5ncyI6IkFBQVk7O0FBRVosZUFBZSxtQkFBTyxDQUFDLDhEQUFhO0FBQ3BDLGdCQUFnQixtQkFBTyxDQUFDLG1FQUFnQjtBQUN4QyxXQUFXLG1CQUFPLENBQUMsd0RBQVE7QUFDM0IsYUFBYSxtQkFBTyxDQUFDLDREQUFVO0FBQy9CLGFBQWEsbUJBQU8sQ0FBQyw0REFBVTtBQUMvQixtQkFBbUIsbUJBQU8sQ0FBQyxrRUFBZTtBQUMxQyxXQUFXLG1CQUFPLENBQUMsMERBQVM7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLHFDQUFxQztBQUNsRDs7QUFFQTtBQUNBLGFBQWEsc0RBQXNEO0FBQ25FOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkJBQTZCO0FBQ3hDO0FBQ0EsV0FBVyxzQkFBc0I7QUFDakM7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0QkFBNEI7QUFDcEQ7QUFDQSx3QkFBd0IsaURBQWlEO0FBQ3pFO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLDZDQUE2QztBQUN4RDtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsc0JBQXNCO0FBQ2pDO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzQkFBc0I7QUFDakM7QUFDQSxXQUFXLHNCQUFzQjtBQUNqQztBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUNBQXVDO0FBQzNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsc0JBQXNCO0FBQ2pDO0FBQ0EsV0FBVyxzQkFBc0I7QUFDakM7QUFDQSxZQUFZO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9va2Jvb2tzaG9wbmcvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvcXVlcnkuanM/NDc0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxudmFyIGFubm90YXRlID0gcmVxdWlyZSgnZm4tYW5ub3RhdGUnKVxudmFyIGRlcHJlY2F0ZSA9IHJlcXVpcmUoJ3V0aWwtZGVwcmVjYXRlJylcbnZhciBFeHByID0gcmVxdWlyZSgnLi9FeHByJylcbnZhciBlcnJvcnMgPSByZXF1aXJlKCcuL2Vycm9ycycpXG52YXIgdmFsdWVzID0gcmVxdWlyZSgnLi92YWx1ZXMnKVxudmFyIG9iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKVxudmFyIHV0aWwgPSByZXF1aXJlKCcuL191dGlsJylcblxuLyoqXG4gKiBUaGlzIG1vZHVsZSBjb250YWlucyBmdW5jdGlvbnMgdXNlZCB0byBjb25zdHJ1Y3QgRmF1bmFEQiBRdWVyaWVzLlxuICpcbiAqIFNlZSB0aGUgW0ZhdW5hREIgUXVlcnkgQVBJIERvY3VtZW50YXRpb25dKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSlcbiAqIGZvciBwZXItZnVuY3Rpb24gZG9jdW1lbnRhdGlvbi5cbiAqXG4gKiBAbW9kdWxlIHF1ZXJ5XG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7KEV4cHJ8c3RyaW5nfG51bWJlcnxib29sZWFufE9iamVjdCl9IG1vZHVsZTpxdWVyeX5FeHByVGVybVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYgeyhtb2R1bGU6cXVlcnl+RXhwclRlcm18QXJyYXk8bW9kdWxlOnF1ZXJ5fkV4cHJUZXJtPil9IG1vZHVsZTpxdWVyeX5FeHByQXJnXG4gKi9cblxuLy8gVHlwZSBoZWxwZXJzXG5cbi8qKlxuICogSWYgb25lIHBhcmFtZXRlciBpcyBwcm92aWRlZCwgY29uc3RydWN0cyBhIGxpdGVyYWwgUmVmIHZhbHVlLlxuICogVGhlIHN0cmluZyBgY29sbGVjdGlvbnMvd2lkZ2V0LzEyM2Agd2lsbCBiZSBlcXVpdmFsZW50IHRvIGBuZXcgdmFsdWVzLlJlZignMTIzJywgbmV3IHZhbHVlcy5SZWYoJ3dpZGdldCcsIHZhbHVlcy5OYXRpdmUuQ09MTEVDVElPTlMpKWBcbiAqXG4gKiBJZiB0d28gYXJlIHByb3ZpZGVkLCBjb25zdHJ1Y3RzIGEgUmVmKCkgZnVuY3Rpb24gdGhhdCwgd2hlbiBldmFsdWF0ZWQsIHJldHVybnMgYSBSZWYgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHJlZnxjbHNcbiAqICAgQWxvbmUsIHRoZSByZWYgaW4gcGF0aCBmb3JtLiBDb21iaW5lZCB3aXRoIGBpZGAsIG11c3QgYmUgYSBjb2xsZWN0aW9uIHJlZi5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IFtpZF1cbiAqICAgQSBudW1lcmljIGlkIG9mIHRoZSBnaXZlbiBjb2xsZWN0aW9uLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gUmVmKCkge1xuICBhcml0eS5iZXR3ZWVuKDEsIDIsIGFyZ3VtZW50cywgUmVmLm5hbWUpXG4gIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiBuZXcgRXhwcih7ICdAcmVmJzogd3JhcChhcmd1bWVudHNbMF0pIH0pXG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIG5ldyBFeHByKHsgcmVmOiB3cmFwKGFyZ3VtZW50c1swXSksIGlkOiB3cmFwKGFyZ3VtZW50c1sxXSkgfSlcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7VWludDhBcnJheXxBcnJheUJ1ZmZlcnxtb2R1bGU6cXVlcnl+RXhwckFyZ30gYnl0ZXNcbiAqICAgQSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgb3IgYSBieXRlIGFycmF5XG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBCeXRlcyhieXRlcykge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIEJ5dGVzLm5hbWUpXG4gIHJldHVybiBuZXcgdmFsdWVzLkJ5dGVzKGJ5dGVzKVxufVxuXG4vLyBCYXNpYyBmb3Jtc1xuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNiYXNpYy1mb3JtcykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gbXNnXG4gKiAgIFRoZSBtZXNzYWdlIHRvIHNlbmQgYmFjayB0byB0aGUgY2xpZW50LlxuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBBYm9ydChtc2cpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBBYm9ydC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBhYm9ydDogd3JhcChtc2cpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2Jhc2ljLWZvcm1zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSB0aW1lc3RhbXBcbiAqICAgQW4gRXhwciB0aGF0IHdpbGwgZXZhbHVhdGUgdG8gYSBUaW1lLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgRXhwciB0byBydW4gYXQgdGhlIGdpdmVuIHNuYXBzaG90IHRpbWUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICogKi9cbmZ1bmN0aW9uIEF0KHRpbWVzdGFtcCwgZXhwcikge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIEF0Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGF0OiB3cmFwKHRpbWVzdGFtcCksIGV4cHI6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjYmFzaWMtZm9ybXMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGJpbmRpbmdzXG4gKiAgIEEgc2V0IG9mIGJpbmRpbmdzIHRvIHVzZSB3aXRoaW4gdGhlIGdpdmVuIGV4cHJlc3Npb24uXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBpblxuICogICBUaGUgZXhwcmVzc2lvbiB0byBydW4gd2l0aCB0aGUgZ2l2ZW4gYmluZGluZ3MuXG4gKiBAcmV0dXJuIHtFeHByfVxuICogKi9cbmZ1bmN0aW9uIExldCh2YXJzLCBleHByKSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgTGV0Lm5hbWUpXG4gIHZhciBiaW5kaW5ncyA9IFtdXG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFycykpIHtcbiAgICBiaW5kaW5ncyA9IHZhcnMubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIHJldHVybiB3cmFwVmFsdWVzKGl0ZW0pXG4gICAgfSlcbiAgfSBlbHNlIHtcbiAgICBiaW5kaW5ncyA9IE9iamVjdC5rZXlzKHZhcnMpXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIHZhcnNba10gIT09IHVuZGVmaW5lZFxuICAgICAgfSlcbiAgICAgIC5tYXAoZnVuY3Rpb24oaykge1xuICAgICAgICB2YXIgYiA9IHt9XG4gICAgICAgIGJba10gPSB3cmFwKHZhcnNba10pXG4gICAgICAgIHJldHVybiBiXG4gICAgICB9KVxuICB9XG5cbiAgaWYgKHR5cGVvZiBleHByID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFycykpIHtcbiAgICAgIHZhciBleHByX3ZhcnMgPSBbXVxuXG4gICAgICB2YXJzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICBPYmplY3Qua2V5cyhpdGVtKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICBleHByX3ZhcnMucHVzaChWYXIobmFtZSkpXG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICBleHByID0gZXhwci5hcHBseShudWxsLCBleHByX3ZhcnMpXG4gICAgfSBlbHNlIHtcbiAgICAgIGV4cHIgPSBleHByLmFwcGx5KFxuICAgICAgICBudWxsLFxuICAgICAgICBPYmplY3Qua2V5cyh2YXJzKS5tYXAoZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgIHJldHVybiBWYXIobmFtZSlcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IEV4cHIoeyBsZXQ6IGJpbmRpbmdzLCBpbjogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNiYXNpYy1mb3JtcykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gdmFyTmFtZVxuICogICBUaGUgbmFtZSBvZiB0aGUgYm91bmQgdmFyLlxuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBWYXIodmFyTmFtZSkge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFZhci5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyB2YXI6IHdyYXAodmFyTmFtZSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjYmFzaWMtZm9ybXMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGNvbmRpdGlvblxuICogICBBbiBleHByZXNzaW9uIHRoYXQgcmV0dXJucyBhIGJvb2xlYW4uXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSB0aGVuXG4gKiAgIFRoZSBleHByZXNzaW9uIHRvIHJ1biBpZiBjb25kaXRpb24gaXMgdHJ1ZS5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGVsc2VcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gcnVuIGlmIHRoZSBjb25kaXRpb24gaXMgZmFsc2UuXG4gKiBAcmV0dXJuIHtFeHByfVxuICogKi9cbmZ1bmN0aW9uIElmKGNvbmRpdGlvbiwgdGhlbiwgX2Vsc2UpIHtcbiAgYXJpdHkuZXhhY3QoMywgYXJndW1lbnRzLCBJZi5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpZjogd3JhcChjb25kaXRpb24pLCB0aGVuOiB3cmFwKHRoZW4pLCBlbHNlOiB3cmFwKF9lbHNlKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNiYXNpYy1mb3JtcykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gYXJnc1xuICogICBBIHNlcmllcyBvZiBleHByZXNzaW9ucyB0byBydW4uXG4gKiBAcmV0dXJuIHtFeHByfVxuICogKi9cbmZ1bmN0aW9uIERvKCkge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBEby5uYW1lKVxuICB2YXIgYXJncyA9IGFyZ3NUb0FycmF5KGFyZ3VtZW50cylcbiAgcmV0dXJuIG5ldyBFeHByKHsgZG86IHdyYXAoYXJncykgfSlcbn1cblxuLyoqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNiYXNpYy1mb3JtcykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gZmllbGRzXG4gKiAgIFRoZSBvYmplY3QgdG8gYmUgZXNjYXBlZC5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiAqL1xudmFyIG9iamVjdEZ1bmN0aW9uID0gZnVuY3Rpb24oZmllbGRzKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgb2JqZWN0RnVuY3Rpb24ubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgb2JqZWN0OiB3cmFwVmFsdWVzKGZpZWxkcykgfSlcbn1cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2Jhc2ljLWZvcm1zKS5cbiAqXG4gKiBEaXJlY3RseSBwcm9kdWNlcyBhIEZhdW5hREIgTGFtYmRhIGV4cHJlc3Npb24gYXMgZGVzY3JpYmVkIGluIHRoZSBGYXVuYURCIHJlZmVyZW5jZVxuICogZG9jdW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSB2YXJcbiAqICAgVGhlIG5hbWVzIG9mIHRoZSB2YXJpYWJsZXMgdG8gYmUgYm91bmQgaW4gdGhpcyBsYW1iZGEgZXhwcmVzc2lvbi5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGxhbWJkYSBleHByZXNzaW9uLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNiYXNpYy1mb3JtcykuXG4gKlxuICogVGFrZXMgYSBKYXZhc2NyaXB0IGZ1bmN0aW9uLCBhbmQgd2lsbCB0cmFuc2Zvcm0gaXRcbiAqIGludG8gdGhlIGFwcHJvcHJpYXRlIEZhdW5hREIgcXVlcnkuIEZvciBleGFtcGxlOlxuICpcbiAqIGBgYFxuICogTGFtYmRhKGZ1bmN0aW9uKGEpIHsgcmV0dXJuIEFkZChhLCBhKTsgfSk7XG4gKiAvLyBSZXR1cm5zIHsgbGFtYmRhOiAnYScsIGV4cHI6IHsgYWRkOiBbeyB2YXI6IGEgfSwgeyB2YXI6IGEgfV0gfSB9XG4gKiBgYGBcbiAqIE5vdGUgdGhhdCB0aGUgZHJpdmVyIHdpbGwgaGFuZGxlIHdyYXBwaW5nIGFsbCB1c2FnZXMgb2YgdGhlIGxhbWJkYSdzIGJvdW5kXG4gKiB2YXJpYWJsZXMgd2l0aCB0aGUge0BsaW5rIG1vZHVsZXM6cXVlcnl+VmFyfSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG4gKiAgIFRha2VzIHRoZSBwcm92aWRlZCBmdW5jdGlvbiBhbmQgcHJvZHVjZXMgdGhlIGFwcHJvcHJpYXRlIEZhdW5hREIgcXVlcnkgZXhwcmVzc2lvbi5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKlxuICovIGZ1bmN0aW9uIExhbWJkYSgpIHtcbiAgYXJpdHkuYmV0d2VlbigxLCAyLCBhcmd1bWVudHMsIExhbWJkYS5uYW1lKVxuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDE6XG4gICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHNbMF1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIF9sYW1iZGFGdW5jKHZhbHVlKVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgdmFsdWUgaW5zdGFuY2VvZiBFeHByIHx8XG4gICAgICAgIHV0aWwuY2hlY2tJbnN0YW5jZUhhc1Byb3BlcnR5KHZhbHVlLCAnX2lzRmF1bmFFeHByJylcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZFZhbHVlKFxuICAgICAgICAgICdMYW1iZGEgZnVuY3Rpb24gdGFrZXMgZWl0aGVyIGEgRnVuY3Rpb24gb3IgYW4gRXhwci4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICBjYXNlIDI6XG4gICAgICB2YXIgdmFyX25hbWUgPSBhcmd1bWVudHNbMF1cbiAgICAgIHZhciBleHByID0gYXJndW1lbnRzWzFdXG5cbiAgICAgIHJldHVybiBfbGFtYmRhRXhwcih2YXJfbmFtZSwgZXhwcilcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9sYW1iZGFGdW5jKGZ1bmMpIHtcbiAgdmFyIHZhcnMgPSBhbm5vdGF0ZShmdW5jKVxuICBzd2l0Y2ggKHZhcnMubGVuZ3RoKSB7XG4gICAgY2FzZSAwOlxuICAgICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkVmFsdWUoXG4gICAgICAgICdQcm92aWRlZCBGdW5jdGlvbiBtdXN0IHRha2UgYXQgbGVhc3QgMSBhcmd1bWVudC4nXG4gICAgICApXG4gICAgY2FzZSAxOlxuICAgICAgcmV0dXJuIF9sYW1iZGFFeHByKHZhcnNbMF0sIGZ1bmMoVmFyKHZhcnNbMF0pKSlcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIF9sYW1iZGFFeHByKFxuICAgICAgICB2YXJzLFxuICAgICAgICBmdW5jLmFwcGx5KFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgdmFycy5tYXAoZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIFZhcihuYW1lKVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIClcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9sYW1iZGFFeHByKHZhcl9uYW1lLCBleHByKSB7XG4gIHJldHVybiBuZXcgRXhwcih7IGxhbWJkYTogd3JhcCh2YXJfbmFtZSksIGV4cHI6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjYmFzaWMtZm9ybXMpLlxuICpcbiAqIEludm9rZXMgYSBnaXZlbiBmdW5jdGlvbiBwYXNzaW5nIGluIHRoZSBwcm92aWRlZCBhcmd1bWVudHNcbiAqXG4gKiBgYGBcbiAqIENhbGwoUmVmKFwiZnVuY3Rpb25zL2FfZnVuY3Rpb25cIiksIDEsIDIpXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSByZWZcbiAqICAgVGhlIHJlZiBvZiB0aGUgVXNlckRlZmluZWRGdW5jdGlvbiB0byBjYWxsXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSBhcmdzXG4gKiAgIEEgc2VyaWVzIG9mIHZhbHVlcyB0byBwYXNzIGFzIGFyZ3VtZW50cyB0byB0aGUgVURGLlxuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBDYWxsKHJlZikge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBDYWxsLm5hbWUpXG4gIHZhciBhcmdzID0gYXJnc1RvQXJyYXkoYXJndW1lbnRzKVxuICBhcmdzLnNoaWZ0KClcbiAgcmV0dXJuIG5ldyBFeHByKHsgY2FsbDogd3JhcChyZWYpLCBhcmd1bWVudHM6IHdyYXAodmFyYXJncyhhcmdzKSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjYmFzaWMtZm9ybXMpLlxuICpcbiAqIENvbnN0cnVjdHMgYSBgQHF1ZXJ5YCB0eXBlIHVzaW5nIHRoZSBMYW1iZGEoKSBvciBhIGZ1bmN0aW9uLlxuICpcbiAqIGBgYFxuICogUXVlcnkoTGFtYmRhKFsnYScsICdiJ10sIEFkZChWYXIoJ2EnKSwgVmFyKCdiJykpKSlcbiAqIFF1ZXJ5KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBBZGQoYSwgYikgfSlcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd8ZnVuY3Rpb259IGxhbWJkYVxuICogICBBIGZ1bmN0aW9uIHRvIGVzY2FwZSBhcyBhIHF1ZXJ5LlxuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBRdWVyeShsYW1iZGEpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBRdWVyeS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBxdWVyeTogd3JhcChsYW1iZGEpIH0pXG59XG5cbi8vIENvbGxlY3Rpb24gZnVuY3Rpb25zXG5cbi8qKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjY29sbGVjdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGNvbGxlY3Rpb25cbiAqICAgQW4gZXhwcmVzc2lvbiByZXN1bHRpbmcgaW4gYSBjb2xsZWN0aW9uIHRvIGJlIG1hcHBlZCBvdmVyLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ3xmdW5jdGlvbn0gbGFtYmRhXG4gKiAgIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoIGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gKiBAcmV0dXJuIHtFeHByfVxuICogKi9cbmZ1bmN0aW9uIE1hcChjb2xsZWN0aW9uLCBsYW1iZGFfZXhwcikge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIE1hcC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBtYXA6IHdyYXAobGFtYmRhX2V4cHIpLCBjb2xsZWN0aW9uOiB3cmFwKGNvbGxlY3Rpb24pIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2NvbGxlY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBjb2xsZWN0aW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gcmVzdWx0aW5nIGluIGEgY29sbGVjdGlvbiB0byBiZSBpdGVyYXRlZCBvdmVyLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ3xmdW5jdGlvbn0gbGFtYmRhXG4gKiAgIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGZvciBlYWNoIGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gKiBAcmV0dXJuIHtFeHByfVxuICogKi9cbmZ1bmN0aW9uIEZvcmVhY2goY29sbGVjdGlvbiwgbGFtYmRhX2V4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMiwgYXJndW1lbnRzLCBGb3JlYWNoLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGZvcmVhY2g6IHdyYXAobGFtYmRhX2V4cHIpLCBjb2xsZWN0aW9uOiB3cmFwKGNvbGxlY3Rpb24pIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2NvbGxlY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBjb2xsZWN0aW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gcmVzdWx0aW5nIGluIGEgY29sbGVjdGlvbiB0byBiZSBmaWx0ZXJlZC5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd8ZnVuY3Rpb259IGxhbWJkYVxuICogICBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGJvb2xlYW4gdXNlZCB0byBmaWx0ZXIgdW53YW50ZWQgdmFsdWVzLlxuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBGaWx0ZXIoY29sbGVjdGlvbiwgbGFtYmRhX2V4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMiwgYXJndW1lbnRzLCBGaWx0ZXIubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgZmlsdGVyOiB3cmFwKGxhbWJkYV9leHByKSwgY29sbGVjdGlvbjogd3JhcChjb2xsZWN0aW9uKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNjb2xsZWN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gbnVtYmVyXG4gKiAgIEFuIGV4cHJlc3Npb24gcmVzdWx0aW5nIGluIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gdGFrZSBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gY29sbGVjdGlvblxuICogICBBbiBleHByZXNzaW9uIHJlc3VsdGluZyBpbiBhIGNvbGxlY3Rpb24uXG4gKiBAcmV0dXJuIHtFeHByfVxuICogKi9cbmZ1bmN0aW9uIFRha2UobnVtYmVyLCBjb2xsZWN0aW9uKSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgVGFrZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyB0YWtlOiB3cmFwKG51bWJlciksIGNvbGxlY3Rpb246IHdyYXAoY29sbGVjdGlvbikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjY29sbGVjdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IG51bWJlclxuICogICBBbiBleHByZXNzaW9uIHJlc3VsdGluZyBpbiB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIGRyb3AgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGNvbGxlY3Rpb25cbiAqICAgQW4gZXhwcmVzc2lvbiByZXN1bHRpbmcgaW4gYSBjb2xsZWN0aW9uLlxuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBEcm9wKG51bWJlciwgY29sbGVjdGlvbikge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIERyb3AubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgZHJvcDogd3JhcChudW1iZXIpLCBjb2xsZWN0aW9uOiB3cmFwKGNvbGxlY3Rpb24pIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2NvbGxlY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBlbGVtZW50c1xuICogICBBbiBleHByZXNzaW9uIHJlc3VsdGluZyBpbiBhIGNvbGxlY3Rpb24gb2YgZWxlbWVudHMgdG8gcHJlcGVuZCB0byB0aGUgZ2l2ZW4gY29sbGVjdGlvbi5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGNvbGxlY3Rpb25cbiAqICAgQW4gZXhwcmVzc2lvbiByZXN1bHRpbmcgaW4gYSBjb2xsZWN0aW9uLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gUHJlcGVuZChlbGVtZW50cywgY29sbGVjdGlvbikge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIFByZXBlbmQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgcHJlcGVuZDogd3JhcChlbGVtZW50cyksIGNvbGxlY3Rpb246IHdyYXAoY29sbGVjdGlvbikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjY29sbGVjdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGVsZW1lbnRzXG4gKiAgIEFuIGV4cHJlc3Npb24gcmVzdWx0aW5nIGluIGEgY29sbGVjdGlvbiBvZiBlbGVtZW50cyB0byBhcHBlbmQgdG8gdGhlIGdpdmVuIGNvbGxlY3Rpb24uXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBjb2xsZWN0aW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gcmVzdWx0aW5nIGluIGEgY29sbGVjdGlvbi5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEFwcGVuZChlbGVtZW50cywgY29sbGVjdGlvbikge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIEFwcGVuZC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBhcHBlbmQ6IHdyYXAoZWxlbWVudHMpLCBjb2xsZWN0aW9uOiB3cmFwKGNvbGxlY3Rpb24pIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2NvbGxlY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBjb2xsZWN0aW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gcmVzdWx0aW5nIGluIGEgY29sbGVjdGlvbi5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIElzRW1wdHkoY29sbGVjdGlvbikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzRW1wdHkubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgaXNfZW1wdHk6IHdyYXAoY29sbGVjdGlvbikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjY29sbGVjdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGNvbGxlY3Rpb25cbiAqICAgQW4gZXhwcmVzc2lvbiByZXN1bHRpbmcgaW4gYSBjb2xsZWN0aW9uLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gSXNOb25FbXB0eShjb2xsZWN0aW9uKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNOb25FbXB0eS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpc19ub25lbXB0eTogd3JhcChjb2xsZWN0aW9uKSB9KVxufVxuXG4vLyBUeXBlIGNoZWNrIGZ1bmN0aW9uc1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgbnVtYmVyLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNudW1iZXJcIj5Jc051bWJlcjwvYT5cbiAqL1xuZnVuY3Rpb24gSXNOdW1iZXIoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzTnVtYmVyLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX251bWJlcjogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgZG91YmxlLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNkb3VibGVcIj5Jc0RvdWJsZTwvYT5cbiAqL1xuZnVuY3Rpb24gSXNEb3VibGUoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzRG91YmxlLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX2RvdWJsZTogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGFuIGludGVnZXIuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgZXhwcmVzc2lvbiB0byBjaGVja1xuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9pc2ludGVnZXJcIj5Jc0ludGVnZXI8L2E+XG4gKi9cbmZ1bmN0aW9uIElzSW50ZWdlcihleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNJbnRlZ2VyLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX2ludGVnZXI6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGJvb2xlYW4uXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgZXhwcmVzc2lvbiB0byBjaGVja1xuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9pc2Jvb2xlYW5cIj5Jc0Jvb2xlYW48L2E+XG4gKi9cbmZ1bmN0aW9uIElzQm9vbGVhbihleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNCb29sZWFuLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX2Jvb2xlYW46IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZXhwcmVzc2lvbiBpcyBudWxsLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNudWxsXCI+SXNOdWxsPC9hPlxuICovXG5mdW5jdGlvbiBJc051bGwoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzTnVsbC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpc19udWxsOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBieXRlIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNieXRlc1wiPklzQnl0ZXM8L2E+XG4gKi9cbmZ1bmN0aW9uIElzQnl0ZXMoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzQnl0ZXMubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgaXNfYnl0ZXM6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByXG4gKiAgIFRoZSBleHByZXNzaW9uIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtFeHByfVxuICogQHNlZSA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLmZhdW5hLmNvbS9mYXVuYS9jdXJyZW50L2FwaS9mcWwvZnVuY3Rpb25zL2lzdGltZXN0YW1wXCI+SXNUaW1lc3RhbXA8L2E+XG4gKi9cbmZ1bmN0aW9uIElzVGltZXN0YW1wKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBJc1RpbWVzdGFtcC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpc190aW1lc3RhbXA6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGRhdGUuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgZXhwcmVzc2lvbiB0byBjaGVja1xuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9pc2RhdGVcIj5Jc0RhdGU8L2E+XG4gKi9cbmZ1bmN0aW9uIElzRGF0ZShleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNEYXRlLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX2RhdGU6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByXG4gKiAgIFRoZSBleHByZXNzaW9uIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtFeHByfVxuICogQHNlZSA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLmZhdW5hLmNvbS9mYXVuYS9jdXJyZW50L2FwaS9mcWwvZnVuY3Rpb25zL2lzc3RyaW5nXCI+SXNTdHJpbmc8L2E+XG4gKi9cbmZ1bmN0aW9uIElzU3RyaW5nKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBJc1N0cmluZy5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpc19zdHJpbmc6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhbiBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByXG4gKiAgIFRoZSBleHByZXNzaW9uIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtFeHByfVxuICogQHNlZSA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLmZhdW5hLmNvbS9mYXVuYS9jdXJyZW50L2FwaS9mcWwvZnVuY3Rpb25zL2lzYXJyYXlcIj5Jc0FycmF5PC9hPlxuICovXG5mdW5jdGlvbiBJc0FycmF5KGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBJc0FycmF5Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX2FycmF5OiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGV4cHJlc3Npb24gaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNvYmplY3RcIj5Jc09iamVjdDwvYT5cbiAqL1xuZnVuY3Rpb24gSXNPYmplY3QoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzT2JqZWN0Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX29iamVjdDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgcmVmZXJlbmNlLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNyZWZcIj5Jc1JlZjwvYT5cbiAqL1xuZnVuY3Rpb24gSXNSZWYoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzUmVmLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX3JlZjogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgc2V0LlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNzZXRcIj5Jc1NldDwvYT5cbiAqL1xuZnVuY3Rpb24gSXNTZXQoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzU2V0Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX3NldDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgZG9jdW1lbnQgKGVpdGhlciBhIHJlZmVyZW5jZSBvciBhbiBpbnN0YW5jZSkuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgZXhwcmVzc2lvbiB0byBjaGVja1xuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9pc2RvY1wiPklzRG9jPC9hPlxuICovXG5mdW5jdGlvbiBJc0RvYyhleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNEb2MubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgaXNfZG9jOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBsYW1iZGEuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgZXhwcmVzc2lvbiB0byBjaGVja1xuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9pc2xhbWJkYVwiPklzTGFtYmRhPC9hPlxuICovXG5mdW5jdGlvbiBJc0xhbWJkYShleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNMYW1iZGEubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgaXNfbGFtYmRhOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjb2xsZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNjb2xsZWN0aW9uXCI+SXNDb2xsZWN0aW9uPC9hPlxuICovXG5mdW5jdGlvbiBJc0NvbGxlY3Rpb24oZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzQ29sbGVjdGlvbi5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpc19jb2xsZWN0aW9uOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByXG4gKiAgIFRoZSBleHByZXNzaW9uIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtFeHByfVxuICogQHNlZSA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLmZhdW5hLmNvbS9mYXVuYS9jdXJyZW50L2FwaS9mcWwvZnVuY3Rpb25zL2lzZGF0YWJhc2VcIj5Jc0RhdGFiYXNlPC9hPlxuICovXG5mdW5jdGlvbiBJc0RhdGFiYXNlKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBJc0RhdGFiYXNlLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX2RhdGFiYXNlOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGV4cHJlc3Npb24gaXMgYW4gaW5kZXguXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgZXhwcmVzc2lvbiB0byBjaGVja1xuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9pc2luZGV4XCI+SXNJbmRleDwvYT5cbiAqL1xuZnVuY3Rpb24gSXNJbmRleChleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNJbmRleC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpc19pbmRleDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgZXhwcmVzc2lvbiB0byBjaGVja1xuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9pc2Z1bmN0aW9uXCI+SXNGdW5jdGlvbjwvYT5cbiAqL1xuZnVuY3Rpb24gSXNGdW5jdGlvbihleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNGdW5jdGlvbi5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpc19mdW5jdGlvbjogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGEga2V5LlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNrZXlcIj5Jc0tleTwvYT5cbiAqL1xuZnVuY3Rpb24gSXNLZXkoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzS2V5Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX2tleTogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgdG9rZW4uXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgZXhwcmVzc2lvbiB0byBjaGVja1xuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9pc3Rva2VuXCI+SXNUb2tlbjwvYT5cbiAqL1xuZnVuY3Rpb24gSXNUb2tlbihleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNUb2tlbi5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpc190b2tlbjogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBleHByZXNzaW9uIGlzIGNyZWRlbnRpYWxzLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJcbiAqICAgVGhlIGV4cHJlc3Npb24gdG8gY2hlY2tcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvaXNjcmVkZW50aWFsc1wiPklzQ3JlZGVudGlhbHM8L2E+XG4gKi9cbmZ1bmN0aW9uIElzQ3JlZGVudGlhbHMoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIElzQ3JlZGVudGlhbHMubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgaXNfY3JlZGVudGlhbHM6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIHJvbGUuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogICBUaGUgZXhwcmVzc2lvbiB0byBjaGVja1xuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9pc3JvbGVcIj5Jc1JvbGU8L2E+XG4gKi9cbmZ1bmN0aW9uIElzUm9sZShleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgSXNSb2xlLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGlzX3JvbGU6IHdyYXAoZXhwcikgfSlcbn1cblxuLy8gUmVhZCBmdW5jdGlvbnNcblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjcmVhZC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHJlZlxuICogICBBbiBleHByZXNzaW9uIHJlc3VsdGluZyBpbiBlaXRoZXIgYSBSZWYgb3IgU2V0UmVmLlxuICogQHBhcmFtIHs/bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRzXG4gKiAgIFRoZSBzbmFwc2hvdCB0aW1lIGF0IHdoaWNoIHRvIGdldCB0aGUgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBHZXQocmVmLCB0cykge1xuICBhcml0eS5iZXR3ZWVuKDEsIDIsIGFyZ3VtZW50cywgR2V0Lm5hbWUpXG4gIHRzID0gdXRpbC5kZWZhdWx0cyh0cywgbnVsbClcblxuICByZXR1cm4gbmV3IEV4cHIocGFyYW1zKHsgZ2V0OiB3cmFwKHJlZikgfSwgeyB0czogd3JhcCh0cykgfSkpXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3JlYWQtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBzZWNyZXRcbiAqICAgVGhlIGtleSBvciB0b2tlbiBzZWNyZXQgdG8gbG9va3VwLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gS2V5RnJvbVNlY3JldChzZWNyZXQpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBLZXlGcm9tU2VjcmV0Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGtleV9mcm9tX3NlY3JldDogd3JhcChzZWNyZXQpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9kb2NzLmZhdW5hLmNvbS9mYXVuYS9jdXJyZW50L2FwaS9mcWwvZnVuY3Rpb25zL3JlZHVjZSkuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gbGFtYmRhXG4gKiAgIFRoZSBhY2N1bXVsYXRvciBmdW5jdGlvblxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gaW5pdGlhbFxuICogICBUaGUgaW5pdGlhbCB2YWx1ZVxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gY29sbGVjdGlvblxuICogICBUaGUgY29sbGVjaXRvbiB0byBiZSByZWR1Y2VkXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBSZWR1Y2UobGFtYmRhLCBpbml0aWFsLCBjb2xsZWN0aW9uKSB7XG4gIGFyaXR5LmV4YWN0KDMsIGFyZ3VtZW50cywgUmVkdWNlLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7XG4gICAgcmVkdWNlOiB3cmFwKGxhbWJkYSksXG4gICAgaW5pdGlhbDogd3JhcChpbml0aWFsKSxcbiAgICBjb2xsZWN0aW9uOiB3cmFwKGNvbGxlY3Rpb24pLFxuICB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNyZWFkLWZ1bmN0aW9ucykuXG4gKiBZb3UgbWF5IHdhbnQgdG8gdXRpbGl6ZSB7QGxpbmsgQ2xpZW50I3BhZ2luYXRlfSB0byBvYnRhaW4gYSB7QGxpbmsgUGFnZUhlbHBlcn0sXG4gKiByYXRoZXIgdGhhbiB1c2luZyB0aGlzIHF1ZXJ5IGZ1bmN0aW9uIGRpcmVjdGx5LlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHNldFxuICogICBBbiBleHByZXNzaW9uIHJlc3VsdGluZyBpbiBhIFNldFJlZiB0byBwYWdlIG92ZXIuXG4gKiBAcGFyYW0gez9PYmplY3R9IG9wdHNcbiAqICBBbiBvYmplY3QgcmVwcmVzZW50aW5nIG9wdGlvbnMgZm9yIHBhZ2luYXRpb24uXG4gKiAgICAtIHNpemU6IE1heGltdW0gbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLlxuICogICAgLSBhZnRlcjogUmV0dXJuIHRoZSBuZXh0IHBhZ2Ugb2YgcmVzdWx0cyBhZnRlciB0aGlzIGN1cnNvciAoaW5jbHVzaXZlKS5cbiAqICAgIC0gYmVmb3JlOiBSZXR1cm4gdGhlIHByZXZpb3VzIHBhZ2Ugb2YgcmVzdWx0cyBiZWZvcmUgdGhpcyBjdXJzb3IgKGV4Y2x1c2l2ZSkuXG4gKiAgICAtIHNvdXJjZXM6IElmIHRydWUsIGluY2x1ZGUgdGhlIHNvdXJjZSBzZXRzIGFsb25nIHdpdGggZWFjaCBlbGVtZW50LlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gUGFnaW5hdGUoc2V0LCBvcHRzKSB7XG4gIGFyaXR5LmJldHdlZW4oMSwgMiwgYXJndW1lbnRzLCBQYWdpbmF0ZS5uYW1lKVxuICBvcHRzID0gdXRpbC5kZWZhdWx0cyhvcHRzLCB7fSlcblxuICByZXR1cm4gbmV3IEV4cHIob2JqZWN0QXNzaWduKHsgcGFnaW5hdGU6IHdyYXAoc2V0KSB9LCB3cmFwVmFsdWVzKG9wdHMpKSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjcmVhZC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHJlZlxuICogICBBbiBleHByZXNzaW9uIHJlc3VsdGluZyBpbiBhIFJlZi5cbiAqIEBwYXJhbSB7P21vZHVsZTpxdWVyeX5FeHByQXJnfSB0c1xuICogICBUaGUgc25hcHNob3QgdGltZSBhdCB3aGljaCB0byBjaGVjayBmb3IgdGhlIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gRXhpc3RzKHJlZiwgdHMpIHtcbiAgYXJpdHkuYmV0d2VlbigxLCAyLCBhcmd1bWVudHMsIEV4aXN0cy5uYW1lKVxuICB0cyA9IHV0aWwuZGVmYXVsdHModHMsIG51bGwpXG5cbiAgcmV0dXJuIG5ldyBFeHByKHBhcmFtcyh7IGV4aXN0czogd3JhcChyZWYpIH0sIHsgdHM6IHdyYXAodHMpIH0pKVxufVxuXG4vLyBXcml0ZSBmdW5jdGlvbnNcblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjd3JpdGUtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSByZWZcbiAqICAgVGhlIFJlZiAodXN1YWxseSBhIENvbGxlY3Rpb25SZWYpIHRvIGNyZWF0ZS5cbiAqIEBwYXJhbSB7P21vZHVsZTpxdWVyeX5FeHByQXJnfSBwYXJhbXNcbiAqICAgQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcGFyYW1ldGVycyBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBDcmVhdGUoY29sbGVjdGlvbl9yZWYsIHBhcmFtcykge1xuICBhcml0eS5iZXR3ZWVuKDEsIDIsIGFyZ3VtZW50cywgQ3JlYXRlLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGNyZWF0ZTogd3JhcChjb2xsZWN0aW9uX3JlZiksIHBhcmFtczogd3JhcChwYXJhbXMpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3dyaXRlLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcmVmXG4gKiAgIFRoZSBSZWYgdG8gdXBkYXRlLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcGFyYW1zXG4gKiAgIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIGRvY3VtZW50LlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gVXBkYXRlKHJlZiwgcGFyYW1zKSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgVXBkYXRlLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IHVwZGF0ZTogd3JhcChyZWYpLCBwYXJhbXM6IHdyYXAocGFyYW1zKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSN3cml0ZS1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHJlZlxuICogICBUaGUgUmVmIHRvIHJlcGxhY2UuXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBwYXJhbXNcbiAqICAgQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcGFyYW1ldGVycyBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBSZXBsYWNlKHJlZiwgcGFyYW1zKSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgUmVwbGFjZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyByZXBsYWNlOiB3cmFwKHJlZiksIHBhcmFtczogd3JhcChwYXJhbXMpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3dyaXRlLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcmVmXG4gKiAgIFRoZSBSZWYgdG8gZGVsZXRlLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gRGVsZXRlKHJlZikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIERlbGV0ZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBkZWxldGU6IHdyYXAocmVmKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSN3cml0ZS1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHJlZlxuICogICBUaGUgUmVmIHRvIGluc2VydCBhZ2FpbnN0XG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSB0c1xuICogICBUaGUgdmFsaWQgdGltZSBvZiB0aGUgaW5zZXJ0ZWQgZXZlbnRcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGFjdGlvblxuICogICBXaGV0aGVyIHRoZSBldmVudCBzaG91bGQgYmUgYSBDcmVhdGUsIFVwZGF0ZSwgb3IgRGVsZXRlLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcGFyYW1zXG4gKiAgIElmIHRoaXMgaXMgYSBDcmVhdGUgb3IgVXBkYXRlLCB0aGUgcGFyYW1ldGVycyBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBJbnNlcnQocmVmLCB0cywgYWN0aW9uLCBwYXJhbXMpIHtcbiAgYXJpdHkuZXhhY3QoNCwgYXJndW1lbnRzLCBJbnNlcnQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHtcbiAgICBpbnNlcnQ6IHdyYXAocmVmKSxcbiAgICB0czogd3JhcCh0cyksXG4gICAgYWN0aW9uOiB3cmFwKGFjdGlvbiksXG4gICAgcGFyYW1zOiB3cmFwKHBhcmFtcyksXG4gIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3dyaXRlLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcmVmXG4gKiAgIFRoZSBSZWYgb2YgdGhlIGRvY3VtZW50IHdob3NlIGV2ZW50IHNob3VsZCBiZSByZW1vdmVkLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gdHNcbiAqICAgVGhlIHZhbGlkIHRpbWUgb2YgdGhlIGV2ZW50LlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gYWN0aW9uXG4gKiAgIFRoZSBldmVudCBhY3Rpb24gKENyZWF0ZSwgVXBkYXRlLCBvciBEZWxldGUpIHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBSZW1vdmUocmVmLCB0cywgYWN0aW9uKSB7XG4gIGFyaXR5LmV4YWN0KDMsIGFyZ3VtZW50cywgUmVtb3ZlLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IHJlbW92ZTogd3JhcChyZWYpLCB0czogd3JhcCh0cyksIGFjdGlvbjogd3JhcChhY3Rpb24pIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3dyaXRlLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcGFyYW1zXG4gKiAgIEFuIG9iamVjdCBvZiBwYXJhbWV0ZXJzIHVzZWQgdG8gY3JlYXRlIGEgY2xhc3MuXG4gKiAgICAgLSBuYW1lIChyZXF1aXJlZCk6IHRoZSBuYW1lIG9mIHRoZSBjbGFzcyB0byBjcmVhdGVcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKlxuICogQGRlcHJlY2F0ZWQgdXNlIENyZWF0ZUNvbGxlY3Rpb24gaW5zdGVhZFxuICovXG5mdW5jdGlvbiBDcmVhdGVDbGFzcyhwYXJhbXMpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBDcmVhdGVDbGFzcy5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjcmVhdGVfY2xhc3M6IHdyYXAocGFyYW1zKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSN3cml0ZS1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHBhcmFtc1xuICogICBBbiBvYmplY3Qgb2YgcGFyYW1ldGVycyB1c2VkIHRvIGNyZWF0ZSBhIGNvbGxlY3Rpb24uXG4gKiAgICAgLSBuYW1lIChyZXF1aXJlZCk6IHRoZSBuYW1lIG9mIHRoZSBjb2xsZWN0aW9uIHRvIGNyZWF0ZVxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ3JlYXRlQ29sbGVjdGlvbihwYXJhbXMpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBDcmVhdGVDb2xsZWN0aW9uLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGNyZWF0ZV9jb2xsZWN0aW9uOiB3cmFwKHBhcmFtcykgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjd3JpdGUtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBwYXJhbXNcbiAqICAgQW4gb2JqZWN0IG9mIHBhcmFtZXRlcnMgdXNlZCB0byBjcmVhdGUgYSBkYXRhYmFzZS5cbiAqICAgICAtIG5hbWUgKHJlcXVpcmVkKTogdGhlIG5hbWUgb2YgdGhlIGRhdGFiYXNlIHRvIGNyZWF0ZVxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ3JlYXRlRGF0YWJhc2UocGFyYW1zKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQ3JlYXRlRGF0YWJhc2UubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgY3JlYXRlX2RhdGFiYXNlOiB3cmFwKHBhcmFtcykgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjd3JpdGUtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBwYXJhbXNcbiAqICAgQW4gb2JqZWN0IG9mIHBhcmFtZXRlcnMgdXNlZCB0byBjcmVhdGUgYW4gaW5kZXguXG4gKiAgICAgLSBuYW1lIChyZXF1aXJlZCk6IHRoZSBuYW1lIG9mIHRoZSBpbmRleCB0byBjcmVhdGVcbiAqICAgICAtIHNvdXJjZTogT25lIG9yIG1vcmUgc291cmNlIG9iamVjdHMgZGVzY3JpYmluZyBzb3VyY2UgY29sbGVjdGlvbnMgYW5kIChvcHRpb25hbCkgZmllbGQgYmluZGluZ3MuXG4gKiAgICAgLSB0ZXJtczogQW4gYXJyYXkgb2YgdGVybSBvYmplY3RzIGRlc2NyaWJpbmcgdGhlIGZpZWxkcyB0byBiZSBpbmRleGVkLiBPcHRpb25hbFxuICogICAgIC0gdmFsdWVzOiBBbiBhcnJheSBvZiB2YWx1ZSBvYmplY3RzIGRlc2NyaWJpbmcgdGhlIGZpZWxkcyB0byBiZSBjb3ZlcmVkLiBPcHRpb25hbFxuICogICAgIC0gdW5pcXVlOiBJZiB0cnVlLCBtYWludGFpbnMgYSB1bmlxdWVuZXNzIGNvbnN0cmFpbnQgb24gY29tYmluZWQgdGVybXMgYW5kIHZhbHVlcy4gT3B0aW9uYWxcbiAqICAgICAtIHBhcnRpdGlvbnM6IFRoZSBudW1iZXIgb2Ygc3ViLXBhcnRpdGlvbnMgd2l0aGluIGVhY2ggdGVybS4gT3B0aW9uYWxcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIENyZWF0ZUluZGV4KHBhcmFtcykge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIENyZWF0ZUluZGV4Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGNyZWF0ZV9pbmRleDogd3JhcChwYXJhbXMpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3dyaXRlLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcGFyYW1zXG4gKiAgIEFuIG9iamVjdCBvZiBwYXJhbWV0ZXJzIHVzZWQgdG8gY3JlYXRlIGEgbmV3IGtleVxuICogICAgIC0gZGF0YWJhc2U6IFJlZiBvZiB0aGUgZGF0YWJhc2UgdGhlIGtleSB3aWxsIGJlIHNjb3BlZCB0by4gT3B0aW9uYWwuXG4gKiAgICAgLSByb2xlOiBUaGUgcm9sZSBvZiB0aGUgbmV3IGtleVxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ3JlYXRlS2V5KHBhcmFtcykge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIENyZWF0ZUtleS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjcmVhdGVfa2V5OiB3cmFwKHBhcmFtcykgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjd3JpdGUtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBwYXJhbXNcbiAqICAgQW4gb2JqZWN0IG9mIHBhcmFtZXRlcnMgdXNlZCB0byBjcmVhdGUgYSBuZXcgdXNlciBkZWZpbmVkIGZ1bmN0aW9uLlxuICogICAgIC0gbmFtZTogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uXG4gKiAgICAgLSBib2R5OiBBIGxhbWJkYSBmdW5jdGlvbiAoZXNjYXBlZCB3aXRoIGBxdWVyeWApLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ3JlYXRlRnVuY3Rpb24ocGFyYW1zKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQ3JlYXRlRnVuY3Rpb24ubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgY3JlYXRlX2Z1bmN0aW9uOiB3cmFwKHBhcmFtcykgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjd3JpdGUtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBwYXJhbXNcbiAqICAgQW4gb2JqZWN0IG9mIHBhcmFtZXRlcnMgdXNlZCB0byBjcmVhdGUgYSBuZXcgcm9sZS5cbiAqICAgICAtIG5hbWU6IFRoZSBuYW1lIG9mIHRoZSByb2xlXG4gKiAgICAgLSBwcml2aWxlZ2VzOiBBbiBhcnJheSBvZiBwcml2aWxlZ2VzXG4gKiAgICAgLSBtZW1iZXJzaGlwOiBBbiBhcnJheSBvZiBtZW1iZXJzaGlwIGJpbmRpbmdzXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBDcmVhdGVSb2xlKHBhcmFtcykge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIENyZWF0ZVJvbGUubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgY3JlYXRlX3JvbGU6IHdyYXAocGFyYW1zKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSN3cml0ZS1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHBhcmFtc1xuICogICBBbiBvYmplY3Qgb2YgcGFyYW1ldGVycyB1c2VkIHRvIGNyZWF0ZSBhIG5ldyBhY2Nlc3MgcHJvdmlkZXIuXG4gKiAgICAgLSBuYW1lOiBBIHZhbGlkIHNjaGVtYSBuYW1lXG4gKiAgICAgLSBpc3N1ZXI6IEEgdW5pcXVlIHN0cmluZ1xuICogICAgIC0gandrc191cmk6IEEgdmFsaWQgSFRUUFMgVVJJXG4gKiAgICAgLSByb2xlczogQW4gYXJyYXkgb2Ygcm9sZS9wcmVkaWNhdGUgcGFpcnMgd2hlcmUgdGhlIHByZWRpY2F0ZSByZXR1cm5zIGEgYm9vbGVhbi5cbiAqICAgICAgICAgICAgICAgICAgIFRoZSBhcnJheSBjYW4gYWxzbyBjb250YWluIFJvbGUgcmVmZXJlbmNlcy5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIENyZWF0ZUFjY2Vzc1Byb3ZpZGVyKHBhcmFtcykge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIENyZWF0ZUFjY2Vzc1Byb3ZpZGVyLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGNyZWF0ZV9hY2Nlc3NfcHJvdmlkZXI6IHdyYXAocGFyYW1zKSB9KVxufVxuXG4vLyBTZXRzXG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3NldHMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHJlZlxuICogICBUaGUgUmVmIG9mIHRoZSBkb2N1bWVudCBmb3Igd2hpY2ggdG8gcmV0cmlldmUgdGhlIHNpbmdsZXRvbiBzZXQuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBTaW5nbGV0b24ocmVmKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgU2luZ2xldG9uLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IHNpbmdsZXRvbjogd3JhcChyZWYpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3NldHMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHJlZlxuICogICBBIFJlZiBvciBTZXRSZWYgdG8gcmV0cmlldmUgYW4gZXZlbnQgc2V0IGZyb20uXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBFdmVudHMocmVmX3NldCkge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIEV2ZW50cy5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBldmVudHM6IHdyYXAocmVmX3NldCkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjc2V0cykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gaW5kZXhcbiAqICAgVGhlIFJlZiBvZiB0aGUgaW5kZXggdG8gbWF0Y2ggYWdhaW5zdC5cbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgbGlzdCBvZiB0ZXJtcyB1c2VkIGluIHRoZSBtYXRjaC5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIE1hdGNoKGluZGV4KSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIE1hdGNoLm5hbWUpXG4gIHZhciBhcmdzID0gYXJnc1RvQXJyYXkoYXJndW1lbnRzKVxuICBhcmdzLnNoaWZ0KClcbiAgcmV0dXJuIG5ldyBFeHByKHsgbWF0Y2g6IHdyYXAoaW5kZXgpLCB0ZXJtczogd3JhcCh2YXJhcmdzKGFyZ3MpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzZXRzKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSBzZXRzXG4gKiAgIEEgbGlzdCBvZiBTZXRSZWZzIHRvIHVuaW9uIHRvZ2V0aGVyLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gVW5pb24oKSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIFVuaW9uLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IHVuaW9uOiB3cmFwKHZhcmFyZ3MoYXJndW1lbnRzKSkgfSlcbn1cblxuLyoqXG4gKiBNZXJnZSB0d28gb3IgbW9yZSBvYmplY3RzLi5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSBtZXJnZSBtZXJnZSB0aGUgZmlyc3Qgb2JqZWN0LlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gX3dpdGggdGhlIHNlY29uZCBvYmplY3Qgb3IgYSBsaXN0IG9mIG9iamVjdHNcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGxhbWJkYSBhIGxhbWJkYSB0byByZXNvbHZlIHBvc3NpYmxlIGNvbmZsaWN0c1xuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBNZXJnZShtZXJnZSwgX3dpdGgsIGxhbWJkYSkge1xuICBhcml0eS5iZXR3ZWVuKDIsIDMsIGFyZ3VtZW50cywgTWVyZ2UubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKFxuICAgIHBhcmFtcyh7IG1lcmdlOiB3cmFwKG1lcmdlKSwgd2l0aDogd3JhcChfd2l0aCkgfSwgeyBsYW1iZGE6IHdyYXAobGFtYmRhKSB9KVxuICApXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3NldHMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHNldHNcbiAqICAgQSBsaXN0IG9mIFNldFJlZnMgdG8gaW50ZXJzZWN0LlxuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBJbnRlcnNlY3Rpb24oKSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIEludGVyc2VjdGlvbi5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpbnRlcnNlY3Rpb246IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzZXRzKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSBzZXRzXG4gKiAgIEEgbGlzdCBvZiBTZXRSZWZzIHRvIGRpZmYuXG4gKiBAcmV0dXJuIHtFeHByfVxuICogKi9cbmZ1bmN0aW9uIERpZmZlcmVuY2UoKSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIERpZmZlcmVuY2UubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgZGlmZmVyZW5jZTogd3JhcCh2YXJhcmdzKGFyZ3VtZW50cykpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3NldHMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHNldFxuICogICBBIFNldFJlZiB0byByZW1vdmUgZHVwbGljYXRlcyBmcm9tLlxuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBEaXN0aW5jdChzZXQpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBEaXN0aW5jdC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBkaXN0aW5jdDogd3JhcChzZXQpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3NldHMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHNvdXJjZVxuICogICBBIFNldFJlZiBvZiB0aGUgc291cmNlIHNldFxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ3xmdW5jdGlvbn0gdGFyZ2V0XG4gKiAgIEEgTGFtYmRhIHRoYXQgd2lsbCBhY2NlcHQgZWFjaCBlbGVtZW50IG9mIHRoZSBzb3VyY2UgU2V0IGFuZCByZXR1cm4gYSBTZXRcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEpvaW4oc291cmNlLCB0YXJnZXQpIHtcbiAgYXJpdHkuZXhhY3QoMiwgYXJndW1lbnRzLCBKb2luLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGpvaW46IHdyYXAoc291cmNlKSwgd2l0aDogd3JhcCh0YXJnZXQpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9kb2NzLmZhdW5hLmNvbS9mYXVuYS9jdXJyZW50L2FwaS9mcWwvZnVuY3Rpb25zL3JhbmdlKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBzZXRcbiAqICAgQSBTZXRSZWYgb2YgdGhlIHNvdXJjZSBzZXRcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGZyb21cbiAqICAgVGhlIGxvd2VyIGJvdW5kXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSB0b1xuICogICBUaGUgdXBwZXIgYm91bmRcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFJhbmdlKHNldCwgZnJvbSwgdG8pIHtcbiAgYXJpdHkuZXhhY3QoMywgYXJndW1lbnRzLCBSYW5nZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyByYW5nZTogd3JhcChzZXQpLCBmcm9tOiB3cmFwKGZyb20pLCB0bzogd3JhcCh0bykgfSlcbn1cblxuLy8gQXV0aGVudGljYXRpb25cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjYXV0aGVudGljYXRpb24pLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHJlZlxuICogICBBIFJlZiB3aXRoIGNyZWRlbnRpYWxzIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbnN0XG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBwYXJhbXNcbiAqICAgQW4gb2JqZWN0IG9mIHBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgbG9naW4gZnVuY3Rpb25cbiAqICAgICAtIHBhc3N3b3JkOiBUaGUgcGFzc3dvcmQgdXNlZCB0byBsb2dpblxuICogQHJldHVybiB7RXhwcn1cbiAqICovXG5mdW5jdGlvbiBMb2dpbihyZWYsIHBhcmFtcykge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIExvZ2luLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGxvZ2luOiB3cmFwKHJlZiksIHBhcmFtczogd3JhcChwYXJhbXMpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2F1dGhlbnRpY2F0aW9uKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBkZWxldGVfdG9rZW5zXG4gKiAgIElmIHRydWUsIGxvZyBvdXQgYWxsIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgc2Vzc2lvbi5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIExvZ291dChkZWxldGVfdG9rZW5zKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgTG9nb3V0Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGxvZ291dDogd3JhcChkZWxldGVfdG9rZW5zKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNhdXRoZW50aWNhdGlvbikuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcmVmXG4gKiAgIFRoZSBSZWYgdG8gY2hlY2sgdGhlIHBhc3N3b3JkIGFnYWluc3QuXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBwYXNzd29yZFxuICogICBUaGUgY3JlZGVudGlhbHMgcGFzc3dvcmQgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBJZGVudGlmeShyZWYsIHBhc3N3b3JkKSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgSWRlbnRpZnkubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgaWRlbnRpZnk6IHdyYXAocmVmKSwgcGFzc3dvcmQ6IHdyYXAocGFzc3dvcmQpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2F1dGhlbnRpY2F0aW9uKS5cbiAqXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBJZGVudGl0eSgpIHtcbiAgYXJpdHkuZXhhY3QoMCwgYXJndW1lbnRzLCBJZGVudGl0eS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBpZGVudGl0eTogbnVsbCB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNhdXRoZW50aWNhdGlvbikuXG4gKlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ3VycmVudElkZW50aXR5KCkge1xuICBhcml0eS5leGFjdCgwLCBhcmd1bWVudHMsIEN1cnJlbnRJZGVudGl0eS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjdXJyZW50X2lkZW50aXR5OiBudWxsIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2F1dGhlbnRpY2F0aW9uKS5cbiAqXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBIYXNJZGVudGl0eSgpIHtcbiAgYXJpdHkuZXhhY3QoMCwgYXJndW1lbnRzLCBIYXNJZGVudGl0eS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBoYXNfaWRlbnRpdHk6IG51bGwgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjYXV0aGVudGljYXRpb24pLlxuICpcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cblxuZnVuY3Rpb24gSGFzQ3VycmVudElkZW50aXR5KCkge1xuICBhcml0eS5leGFjdCgwLCBhcmd1bWVudHMsIEhhc0N1cnJlbnRJZGVudGl0eS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBoYXNfY3VycmVudF9pZGVudGl0eTogbnVsbCB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNhdXRoZW50aWNhdGlvbikuXG4gKlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ3VycmVudFRva2VuKCkge1xuICBhcml0eS5leGFjdCgwLCBhcmd1bWVudHMsIEN1cnJlbnRUb2tlbi5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjdXJyZW50X3Rva2VuOiBudWxsIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2F1dGhlbnRpY2F0aW9uKS5cbiAqXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBIYXNDdXJyZW50VG9rZW4oKSB7XG4gIGFyaXR5LmV4YWN0KDAsIGFyZ3VtZW50cywgSGFzQ3VycmVudFRva2VuLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGhhc19jdXJyZW50X3Rva2VuOiBudWxsIH0pXG59XG5cbi8vIFN0cmluZyBmdW5jdGlvbnNcblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjc3RyaW5nLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ3MgLSBBIGxpc3Qgb2Ygc3RyaW5ncyB0byBjb25jYXRlbmF0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzZXBhcmF0b3IgIC0gVGhlIHNlcGFyYXRvciB0byB1c2UgYmV0d2VlbiBlYWNoIHN0cmluZy5cbiAqIEByZXR1cm4ge3N0cmluZ30gYSBzaW5nbGUgY29tYmluZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIENvbmNhdChzdHJpbmdzLCBzZXBhcmF0b3IpIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgQ29uY2F0Lm5hbWUpXG4gIHNlcGFyYXRvciA9IHV0aWwuZGVmYXVsdHMoc2VwYXJhdG9yLCBudWxsKVxuICByZXR1cm4gbmV3IEV4cHIoXG4gICAgcGFyYW1zKHsgY29uY2F0OiB3cmFwKHN0cmluZ3MpIH0sIHsgc2VwYXJhdG9yOiB3cmFwKHNlcGFyYXRvcikgfSlcbiAgKVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzdHJpbmctZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIC0gVGhlIHN0cmluZyB0byBjYXNlZm9sZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBub3JtYWxpemVyIC0gVGhlIGFsZ29yaXRobSB0byB1c2UuIE9uZSBvZjogTkZLQ0Nhc2VGb2xkLCBORkMsIE5GRCwgTkZLQywgTkZLRC5cbiAqIEByZXR1cm4ge3N0cmluZ30gYSBub3JtYWxpemVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiBDYXNlZm9sZChzdHJpbmcsIG5vcm1hbGl6ZXIpIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgQ2FzZWZvbGQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKFxuICAgIHBhcmFtcyh7IGNhc2Vmb2xkOiB3cmFwKHN0cmluZykgfSwgeyBub3JtYWxpemVyOiB3cmFwKG5vcm1hbGl6ZXIpIH0pXG4gIClcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb250YWlucyB0aGUgZ2l2ZW4gc3Vic3RyaW5nLCBvciBmYWxzZSBpZiBvdGhlcndpc2VcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgIC0gdGhlIHN0cmluZyB0byBldmFsdWF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHNlYXJjaCAtIHRoZSBzdWJzdHJpbmcgdG8gc2VhcmNoIGZvclxuICogQHJldHVybiB7Ym9vbGVhbn0gICAgICAtIHdhcyB0aGUgc2VhcmNoIHJlc3VsdCBmb3VuZFxuICogQHNlZSA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLmZhdW5hLmNvbS9mYXVuYS9jdXJyZW50L2FwaS9mcWwvZnVuY3Rpb25zL2NvbnRhaW5zc3RyXCI+RmF1bmFEQiBDb250YWluc1N0ciBGdW5jdGlvbjwvYT5cbiAqL1xuZnVuY3Rpb24gQ29udGFpbnNTdHIodmFsdWUsIHNlYXJjaCkge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIENvbnRhaW5zU3RyLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGNvbnRhaW5zc3RyOiB3cmFwKHZhbHVlKSwgc2VhcmNoOiB3cmFwKHNlYXJjaCkgfSlcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb250YWlucyB0aGUgZ2l2ZW4gcGF0dGVybiwgb3IgZmFsc2UgaWYgb3RoZXJ3aXNlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlICAgLSB0aGUgc3RyaW5nIHRvIGV2YWx1YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0dGVybiAtIHRoZSBwYXR0ZXJuIHRvIHNlYXJjaCBmb3JcbiAqIEByZXR1cm4ge2Jvb2xlYW59ICAgICAgIC0gd2FzIHRoZSByZWdleCBzZWFyY2ggcmVzdWx0IGZvdW5kXG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvY29udGFpbnNzdHJyZWdleFwiPkZhdW5hREIgQ29udGFpbnNTdHJSZWdleCBGdW5jdGlvbjwvYT5cbiAqL1xuZnVuY3Rpb24gQ29udGFpbnNTdHJSZWdleCh2YWx1ZSwgcGF0dGVybikge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIENvbnRhaW5zU3RyUmVnZXgubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgY29udGFpbnNzdHJyZWdleDogd3JhcCh2YWx1ZSksIHBhdHRlcm46IHdyYXAocGF0dGVybikgfSlcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBzdGFydHMgd2l0aCB0aGUgZ2l2ZW4gcHJlZml4IHZhbHVlLCBvciBmYWxzZSBpZiBvdGhlcndpc2VcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgICAtIHRoZSBzdHJpbmcgdG8gZXZhbHVhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWFyY2ggIC0gdGhlIHByZWZpeCB0byBzZWFyY2ggZm9yXG4gKiBAcmV0dXJuIHtib29sZWFufSAgICAgICAtIGRvZXMgYHZhbHVlYCBzdGFydCB3aXRoIGBzZWFyY2hgXG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvc3RhcnRzd2l0aFwiPkZhdW5hREIgU3RhcnRzV2l0aCBGdW5jdGlvbjwvYT5cbiAqL1xuZnVuY3Rpb24gU3RhcnRzV2l0aCh2YWx1ZSwgc2VhcmNoKSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgU3RhcnRzV2l0aC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBzdGFydHN3aXRoOiB3cmFwKHZhbHVlKSwgc2VhcmNoOiB3cmFwKHNlYXJjaCkgfSlcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBlbmRzIHdpdGggdGhlIGdpdmVuIHN1ZmZpeCB2YWx1ZSwgb3IgZmFsc2UgaWYgb3RoZXJ3aXNlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlICAgLSB0aGUgc3RyaW5nIHRvIGV2YWx1YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoICAtIHRoZSBzdWZmaXggdG8gc2VhcmNoIGZvclxuICogQHJldHVybiB7Ym9vbGVhbn0gICAgICAgLSBkb2VzIGB2YWx1ZWAgZW5kIHdpdGggYHNlYXJjaGBcbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9lbmRzd2l0aFwiPkZhdW5hREIgRW5kc1dpdGggRnVuY3Rpb248L2E+XG4gKi9cbmZ1bmN0aW9uIEVuZHNXaXRoKHZhbHVlLCBzZWFyY2gpIHtcbiAgYXJpdHkuZXhhY3QoMiwgYXJndW1lbnRzLCBFbmRzV2l0aC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBlbmRzd2l0aDogd3JhcCh2YWx1ZSksIHNlYXJjaDogd3JhcChzZWFyY2gpIH0pXG59XG5cbi8qKlxuICogSXQgdGFrZXMgYSBzdHJpbmcgYW5kIHJldHVybnMgYSByZWdleCB3aGljaCBtYXRjaGVzIHRoZSBpbnB1dCBzdHJpbmcgdmVyYmF0aW0uXG4gKlxuICogQHBhcmFtIHZhbHVlICAgICAgLSB0aGUgc3RyaW5nIHRvIGFuYWx5emVcbiAqIEByZXR1cm4ge3N0cmluZ30gIC0gYSByZWdleCB3aGljaCBtYXRjaGVzIHRoZSBpbnB1dCBzdHJpbmcgdmVyYmF0aW1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9yZWdleGVzY2FwZVwiPkZhdW5hREIgUmVnZXhFc2NhcGUgRnVuY3Rpb248L2E+XG4gKi9cbmZ1bmN0aW9uIFJlZ2V4RXNjYXBlKHZhbHVlKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgUmVnZXhFc2NhcGUubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgcmVnZXhlc2NhcGU6IHdyYXAodmFsdWUpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3N0cmluZy1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIEEgc3RyaW5nIHRvIHNlYXJjaC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmaW5kIC0gRmluZCB0aGUgZmlyc3QgcG9zaXRpb24gb2YgdGhpcyBzdHJpbmcgaW4gdGhlIHNlYXJjaCBzdHJpbmdcbiAqIEBwYXJhbSB7aW50fSBzdGFydCAtIEFuIG9wdGlvbmFsIHN0YXJ0IG9mZnNldCBpbnRvIHRoZSBzZWFyY2ggc3RyaW5nXG4gKiBAcmV0dXJuIHtpbnR9IGxvY2F0aW9uIG9mIHRoZSBmb3VuZCBzdHJpbmcgb3IgLTEgaWYgbm90IGZvdW5kXG4gKi9cbmZ1bmN0aW9uIEZpbmRTdHIodmFsdWUsIGZpbmQsIHN0YXJ0KSB7XG4gIGFyaXR5LmJldHdlZW4oMiwgMywgYXJndW1lbnRzLCBGaW5kU3RyLm5hbWUpXG4gIHN0YXJ0ID0gdXRpbC5kZWZhdWx0cyhzdGFydCwgbnVsbClcbiAgcmV0dXJuIG5ldyBFeHByKFxuICAgIHBhcmFtcyh7IGZpbmRzdHI6IHdyYXAodmFsdWUpLCBmaW5kOiB3cmFwKGZpbmQpIH0sIHsgc3RhcnQ6IHdyYXAoc3RhcnQpIH0pXG4gIClcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjc3RyaW5nLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gQSBzdHJpbmcgdG8gc2VhcmNoLlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdHRlcm4gLSBGaW5kIHRoZSBmaXJzdCBwb3NpdGlvbiBvZiB0aGlzIHBhdHRlcm4gaW4gdGhlIHNlYXJjaCBzdHJpbmcgdXNpbmcgYSBqYXZhIHJlZ3VsYXIgZXhwcmVzc2lvbiBzeW50YXhcbiAqIEBwYXJhbSB7aW50fSBzdGFydCAtIEFuIG9wdGlvbmFsIHN0YXJ0IG9mZnNldCBpbnRvIHRoZSBzZWFyY2ggc3RyaW5nXG4gKiBAcGFyYW0ge2ludH0gbnVtUmVzdWx0cyAtIEFuIG9wdGlvbmFsIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybiwgbWF4IDEwMjRcbiAqIEByZXR1cm4ge0FycmF5fSBhbiBhcnJheSBvZiBvYmplY3QgZGVzY3JpYmluZyB3aGVyZSB0aGUgc2VhcmNoIHBhdHRlcm4gd2FzIGxvY2F0ZWRcbiAqL1xuZnVuY3Rpb24gRmluZFN0clJlZ2V4KHZhbHVlLCBwYXR0ZXJuLCBzdGFydCwgbnVtUmVzdWx0cykge1xuICBhcml0eS5iZXR3ZWVuKDIsIDQsIGFyZ3VtZW50cywgRmluZFN0clJlZ2V4Lm5hbWUpXG4gIHN0YXJ0ID0gdXRpbC5kZWZhdWx0cyhzdGFydCwgbnVsbClcbiAgcmV0dXJuIG5ldyBFeHByKFxuICAgIHBhcmFtcyhcbiAgICAgIHsgZmluZHN0cnJlZ2V4OiB3cmFwKHZhbHVlKSwgcGF0dGVybjogd3JhcChwYXR0ZXJuKSB9LFxuICAgICAgeyBzdGFydDogd3JhcChzdGFydCksIG51bV9yZXN1bHRzOiB3cmFwKG51bVJlc3VsdHMpIH1cbiAgICApXG4gIClcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjc3RyaW5nLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIHN0cmluZyB0byBjYWxjdWxhdGUgdGhlIGxlbmd0aCBpbiBjb2RlcG9pbnRzLlxuICogQHJldHVybiB7aW50fSB0aGUgbGVuZ3RoIG9mIHRoZSBzdHJpbmcgaW4gY29kZXBvaW50c1xuICovXG5mdW5jdGlvbiBMZW5ndGgodmFsdWUpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBMZW5ndGgubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgbGVuZ3RoOiB3cmFwKHZhbHVlKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzdHJpbmctZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgc3RyaW5nIHRvIExvd2VyQ2FzZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIHN0cmluZyBjb252ZXJ0ZWQgdG8gbG93ZXJjYXNlXG4gKi9cbmZ1bmN0aW9uIExvd2VyQ2FzZSh2YWx1ZSkge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIExvd2VyQ2FzZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBsb3dlcmNhc2U6IHdyYXAodmFsdWUpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3N0cmluZy1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBzdHJpbmcgdG8gdHJpbSBsZWFkaW5nIHdoaXRlIHNwYWNlLlxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgc3RyaW5nIHdpdGggbGVhZGluZyB3aGl0ZSBzcGFjZSByZW1vdmVkXG4gKi9cbmZ1bmN0aW9uIExUcmltKHZhbHVlKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgTFRyaW0ubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgbHRyaW06IHdyYXAodmFsdWUpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3N0cmluZy1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgZG9jdW1lbnQgZnJvbSB3aGljaCB0byBwcm9kdWNlIG5ncmFtcy5cbiAqIEBwYXJhbSB7P09iamVjdH0gb3B0c1xuICogICBBbiBvYmplY3Qgb2Ygb3B0aW9uc1xuICogICAgIC0gbWluOiBUaGUgbWluaW11bSBuZ3JhbSBzaXplLlxuICogICAgIC0gbWF4OiBUaGUgbWF4aW11bSBuZ3JhbSBzaXplLlxuICogQHJldHVybiB7QXJyYXl8VmFsdWV9XG4gKi9cbmZ1bmN0aW9uIE5HcmFtKHRlcm1zLCBtaW4sIG1heCkge1xuICBhcml0eS5iZXR3ZWVuKDEsIDMsIGFyZ3VtZW50cywgTkdyYW0ubmFtZSlcbiAgbWluID0gdXRpbC5kZWZhdWx0cyhtaW4sIG51bGwpXG4gIG1heCA9IHV0aWwuZGVmYXVsdHMobWF4LCBudWxsKVxuXG4gIHJldHVybiBuZXcgRXhwcihcbiAgICBwYXJhbXMoeyBuZ3JhbTogd3JhcCh0ZXJtcykgfSwgeyBtaW46IHdyYXAobWluKSwgbWF4OiB3cmFwKG1heCkgfSlcbiAgKVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzdHJpbmctZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBBIHN0cmluZyB0byByZXBlYXQuXG4gKiBAcGFyYW0ge2ludH0gbnVtYmVyIC0gVGhlIG51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfSBhIHN0cmluZyB3aGljaCB3YXMgcmVwZWF0ZWRcbiAqL1xuZnVuY3Rpb24gUmVwZWF0KHZhbHVlLCBudW1iZXIpIHtcbiAgYXJpdHkuYmV0d2VlbigxLCAyLCBhcmd1bWVudHMsIFJlcGVhdC5uYW1lKVxuICBudW1iZXIgPSB1dGlsLmRlZmF1bHRzKG51bWJlciwgbnVsbClcbiAgcmV0dXJuIG5ldyBFeHByKHBhcmFtcyh7IHJlcGVhdDogd3JhcCh2YWx1ZSkgfSwgeyBudW1iZXI6IHdyYXAobnVtYmVyKSB9KSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjc3RyaW5nLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gQSBzdHJpbmcgdG8gc2VhcmNoLlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbmQgLSBUaGUgc3RyaW5nIHRvIGZpbmQgaW4gdGhlIHNlYXJjaCBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXBsYWNlIC0gVGhlIHN0cmluZyB0byByZXBsYWNlIGluIHRoZSBzZWFyY2ggc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9IGFsbCB0aGUgb2NjdXJyZW5jZXMgb2YgZmluZCBzdWJzdGl0dXRlZCB3aXRoIHJlcGxhY2Ugc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIFJlcGxhY2VTdHIodmFsdWUsIGZpbmQsIHJlcGxhY2UpIHtcbiAgYXJpdHkuZXhhY3QoMywgYXJndW1lbnRzLCBSZXBsYWNlU3RyLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7XG4gICAgcmVwbGFjZXN0cjogd3JhcCh2YWx1ZSksXG4gICAgZmluZDogd3JhcChmaW5kKSxcbiAgICByZXBsYWNlOiB3cmFwKHJlcGxhY2UpLFxuICB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzdHJpbmctZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBBIHN0cmluZyB0byBzZWFyY2guXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0dGVybiAtIFRoZSBwYXR0ZXJuIHRvIGZpbmQgaW4gdGhlIHNlYXJjaCBzdHJpbmcgdXNpbmcgYSBqYXZhIHJlZ3VsYXIgZXhwcmVzc2lvbiBzeW50YXhcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXBsYWNlIC0gVGhlIHN0cmluZyB0byByZXBsYWNlIGluIHRoZSBzZWFyY2ggc3RyaW5nXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZpcnN0IC0gUmVwbGFjZSBhbGwgb3IganVzdCB0aGUgZmlyc3RcbiAqIEByZXR1cm4ge3N0cmluZ30gYWxsIHRoZSBvY2N1cnJlbmNlcyBvZiBmaW5kIHBhdHRlcm4gc3Vic3RpdHV0ZWQgd2l0aCByZXBsYWNlIHN0cmluZ1xuICovXG5mdW5jdGlvbiBSZXBsYWNlU3RyUmVnZXgodmFsdWUsIHBhdHRlcm4sIHJlcGxhY2UsIGZpcnN0KSB7XG4gIGFyaXR5LmJldHdlZW4oMywgNCwgYXJndW1lbnRzLCBSZXBsYWNlU3RyUmVnZXgubmFtZSlcbiAgZmlyc3QgPSB1dGlsLmRlZmF1bHRzKGZpcnN0LCBudWxsKVxuICByZXR1cm4gbmV3IEV4cHIoXG4gICAgcGFyYW1zKFxuICAgICAge1xuICAgICAgICByZXBsYWNlc3RycmVnZXg6IHdyYXAodmFsdWUpLFxuICAgICAgICBwYXR0ZXJuOiB3cmFwKHBhdHRlcm4pLFxuICAgICAgICByZXBsYWNlOiB3cmFwKHJlcGxhY2UpLFxuICAgICAgfSxcbiAgICAgIHsgZmlyc3Q6IHdyYXAoZmlyc3QpIH1cbiAgICApXG4gIClcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjc3RyaW5nLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIHN0cmluZyB0byByZW1vdmUgd2hpdGUgc3BhY2UgZnJvbSB0aGUgZW5kLlxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgc3RyaW5nIHdpdGggdHJhaWxpbmcgd2hpdGVzcGFjZXMgcmVtb3ZlZFxuICovXG5mdW5jdGlvbiBSVHJpbSh2YWx1ZSkge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFJUcmltLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IHJ0cmltOiB3cmFwKHZhbHVlKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzdHJpbmctZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge2ludH0gbnVtIC0gVGhlIHN0cmluZyBvZiBOIFNwYWNlKHMpLlxuICogQHJldHVybiB7c3RyaW5nfSBhIHN0cmluZyB3aXRoIHNwYWNlc1xuICovXG5mdW5jdGlvbiBTcGFjZShudW0pIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBTcGFjZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBzcGFjZTogd3JhcChudW0pIH0pXG59XG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzdHJpbmctZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgIFRoZSBzdHJpbmcgdG8gU3ViU3RyaW5nLlxuICogQHBhcmFtIHtpbnR9IHN0YXJ0ICBUaGUgcG9zaXRpb24gdGhlIGZpcnN0IGNoYXJhY3RlciBvZiB0aGUgcmV0dXJuIHN0cmluZyBiZWdpbnMgYXRcbiAqIEBwYXJhbSB7aW50fSBsZW5ndGggIEFuIG9wdGlvbmFsIGxlbmd0aCwgaWYgb21pdHRlZCB0aGVuIHJldHVybnMgdG8gdGhlIGVuZCBvZiBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gU3ViU3RyaW5nKHZhbHVlLCBzdGFydCwgbGVuZ3RoKSB7XG4gIGFyaXR5LmJldHdlZW4oMSwgMywgYXJndW1lbnRzLCBTdWJTdHJpbmcubmFtZSlcbiAgc3RhcnQgPSB1dGlsLmRlZmF1bHRzKHN0YXJ0LCBudWxsKVxuICBsZW5ndGggPSB1dGlsLmRlZmF1bHRzKGxlbmd0aCwgbnVsbClcbiAgcmV0dXJuIG5ldyBFeHByKFxuICAgIHBhcmFtcyhcbiAgICAgIHsgc3Vic3RyaW5nOiB3cmFwKHZhbHVlKSB9LFxuICAgICAgeyBzdGFydDogd3JhcChzdGFydCksIGxlbmd0aDogd3JhcChsZW5ndGgpIH1cbiAgICApXG4gIClcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjc3RyaW5nLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIHN0cmluZyB0byBUaXRsZUNhc2UuXG4gKiBAcmV0dXJuIHtzdHJpbmd9ICBBIHN0cmluZyBjb252ZXJ0ZWQgdG8gdGl0bGVjYXNlXG4gKi9cbmZ1bmN0aW9uIFRpdGxlQ2FzZSh2YWx1ZSkge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFRpdGxlQ2FzZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyB0aXRsZWNhc2U6IHdyYXAodmFsdWUpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3N0cmluZy1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBzdHJpbmcgdG8gVHJpbS5cbiAqIEByZXR1cm4ge3N0cmluZ30gYSBzdHJpbmcgd2l0aCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlIHJlbW92ZWRcbiAqL1xuZnVuY3Rpb24gVHJpbSh2YWx1ZSkge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFRyaW0ubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdHJpbTogd3JhcCh2YWx1ZSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjc3RyaW5nLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIHN0cmluZyB0byBVcHBlcmNhc2UuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEFuIHVwcGVyY2FzZSBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gVXBwZXJDYXNlKHZhbHVlKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgVXBwZXJDYXNlLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IHVwcGVyY2FzZTogd3JhcCh2YWx1ZSkgfSlcbn1cblxuLyoqXG4gKiBGb3JtYXQgdmFsdWVzIGludG8gYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtICB7c3RyaW5nfSAgc3RyaW5nIHN0cmluZyB3aXRoIGZvcm1hdCBzcGVjaWZpZXJzXG4gKiBAcGFyYW0gIHthcnJheX0gICB2YWx1ZXMgbGlzdCBvZiB2YWx1ZXMgdG8gZm9ybWF0XG4gKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgICAgYSBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gRm9ybWF0KHN0cmluZykge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBGb3JtYXQubmFtZSlcbiAgdmFyIGFyZ3MgPSBhcmdzVG9BcnJheShhcmd1bWVudHMpXG4gIGFyZ3Muc2hpZnQoKVxuICByZXR1cm4gbmV3IEV4cHIoeyBmb3JtYXQ6IHdyYXAoc3RyaW5nKSwgdmFsdWVzOiB3cmFwKHZhcmFyZ3MoYXJncykpIH0pXG59XG5cbi8vIFRpbWUgYW5kIGRhdGUgZnVuY3Rpb25zXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSN0aW1lLWFuZC1kYXRlKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBzdHJpbmdcbiAqICAgQSBzdHJpbmcgdG8gY29udmVydGVkIHRvIGEgdGltZSBvYmplY3QuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBUaW1lKHN0cmluZykge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFRpbWUubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdGltZTogd3JhcChzdHJpbmcpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3RpbWUtYW5kLWRhdGUpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IG51bWJlclxuICogICBUaGUgbnVtYmVyIG9mIGB1bml0YHMgZnJvbSBFcG9jaFxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gdW5pdFxuICogICBUaGUgdW5pdCBvZiBgbnVtYmVyYC4gT25lIG9mIHNlY29uZCwgbWlsbGlzZWNvbmQsIG1pY3Jvc2Vjb25kLCBuYW5vc2Vjb25kLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gRXBvY2gobnVtYmVyLCB1bml0KSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgRXBvY2gubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgZXBvY2g6IHdyYXAobnVtYmVyKSwgdW5pdDogd3JhcCh1bml0KSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy90aW1lYWRkKS5cbiAqXG4gKiBSZXR1cm5zIGEgbmV3IHRpbWUgb3IgZGF0ZSB3aXRoIHRoZSBvZmZzZXQgaW4gdGVybXMgb2YgdGhlIHVuaXRcbiAqIGFkZGVkLlxuICpcbiAqIEBwYXJhbSBiYXNlIHRoZSBiYXNlIHRpbWUgb3IgZGF0YVxuICogQHBhcmFtIG9mZnNldCB0aGUgbnVtYmVyIG9mIHVuaXRzXG4gKiBAcGFyYW0gdW5pdCB0aGUgdW5pdCB0eXBlXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBUaW1lQWRkKGJhc2UsIG9mZnNldCwgdW5pdCkge1xuICBhcml0eS5leGFjdCgzLCBhcmd1bWVudHMsIFRpbWVBZGQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHtcbiAgICB0aW1lX2FkZDogd3JhcChiYXNlKSxcbiAgICBvZmZzZXQ6IHdyYXAob2Zmc2V0KSxcbiAgICB1bml0OiB3cmFwKHVuaXQpLFxuICB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy90aW1lc3VidHJhY3QpLlxuICpcbiAqIFJldHVybnMgYSBuZXcgdGltZSBvciBkYXRlIHdpdGggdGhlIG9mZnNldCBpbiB0ZXJtcyBvZiB0aGUgdW5pdFxuICogc3VidHJhY3RlZC5cbiAqXG4gKiBAcGFyYW0gYmFzZSB0aGUgYmFzZSB0aW1lIG9yIGRhdGFcbiAqIEBwYXJhbSBvZmZzZXQgdGhlIG51bWJlciBvZiB1bml0c1xuICogQHBhcmFtIHVuaXQgdGhlIHVuaXQgdHlwZVxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gVGltZVN1YnRyYWN0KGJhc2UsIG9mZnNldCwgdW5pdCkge1xuICBhcml0eS5leGFjdCgzLCBhcmd1bWVudHMsIFRpbWVTdWJ0cmFjdC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoe1xuICAgIHRpbWVfc3VidHJhY3Q6IHdyYXAoYmFzZSksXG4gICAgb2Zmc2V0OiB3cmFwKG9mZnNldCksXG4gICAgdW5pdDogd3JhcCh1bml0KSxcbiAgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvdGltZWRpZmYpLlxuICpcbiAqIFJldHVybnMgdGhlIG51bWJlciBvZiBpbnRlcnZhbHMgaW4gdGVybXMgb2YgdGhlIHVuaXQgYmV0d2VlblxuICogdHdvIHRpbWVzIG9yIGRhdGVzLiBCb3RoIHN0YXJ0IGFuZCBmaW5pc2ggbXVzdCBiZSBvZiB0aGUgc2FtZVxuICogdHlwZS5cbiAqXG4gKiBAcGFyYW0gc3RhcnQgdGhlIHN0YXJ0aW5nIHRpbWUgb3IgZGF0ZSwgaW5jbHVzaXZlXG4gKiBAcGFyYW0gZmluaXNoIHRoZSBlbmRpbmcgdGltZSBvciBkYXRlLCBleGNsdXNpdmVcbiAqIEBwYXJhbSB1bml0IHRoZSB1bml0IHR5cGVcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFRpbWVEaWZmKHN0YXJ0LCBmaW5pc2gsIHVuaXQpIHtcbiAgYXJpdHkuZXhhY3QoMywgYXJndW1lbnRzLCBUaW1lRGlmZi5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoe1xuICAgIHRpbWVfZGlmZjogd3JhcChzdGFydCksXG4gICAgb3RoZXI6IHdyYXAoZmluaXNoKSxcbiAgICB1bml0OiB3cmFwKHVuaXQpLFxuICB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSN0aW1lLWFuZC1kYXRlKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBzdHJpbmdcbiAqICAgQSBzdHJpbmcgdG8gY29udmVydCB0byBhIERhdGUgb2JqZWN0XG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBEYXRlKHN0cmluZykge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIERhdGUubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgZGF0ZTogd3JhcChzdHJpbmcpIH0pXG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCBzbmFwc2hvdCB0aW1lLlxuICpcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvbm93XCI+Tm93IGZ1bmN0aW9uPC9hPlxuICovXG5mdW5jdGlvbiBOb3coKSB7XG4gIGFyaXR5LmV4YWN0KDAsIGFyZ3VtZW50cywgTm93Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IG5vdzogd3JhcChudWxsKSB9KVxufVxuXG4vLyBNaXNjZWxsYW5lb3VzIGZ1bmN0aW9uc1xuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtaXNjZWxsYW5lb3VzLWZ1bmN0aW9ucykuXG4gKlxuICogQGRlcHJlY2F0ZWQgdXNlIE5ld0lkIGluc3RlYWRcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIE5leHRJZCgpIHtcbiAgYXJpdHkuZXhhY3QoMCwgYXJndW1lbnRzLCBOZXh0SWQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgbmV4dF9pZDogbnVsbCB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtaXNjZWxsYW5lb3VzLWZ1bmN0aW9ucykuXG4gKlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gTmV3SWQoKSB7XG4gIGFyaXR5LmV4YWN0KDAsIGFyZ3VtZW50cywgTmV3SWQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgbmV3X2lkOiBudWxsIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21pc2NlbGxhbmVvdXMtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBuYW1lXG4gKiAgIFRoZSBuYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IFtzY29wZV1cbiAqICAgVGhlIFJlZiBvZiB0aGUgZGF0YWJhc2UncyBzY29wZS5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIERhdGFiYXNlKG5hbWUsIHNjb3BlKSB7XG4gIGFyaXR5LmJldHdlZW4oMSwgMiwgYXJndW1lbnRzLCBEYXRhYmFzZS5uYW1lKVxuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4gbmV3IEV4cHIoeyBkYXRhYmFzZTogd3JhcChuYW1lKSB9KVxuICAgIGNhc2UgMjpcbiAgICAgIHJldHVybiBuZXcgRXhwcih7IGRhdGFiYXNlOiB3cmFwKG5hbWUpLCBzY29wZTogd3JhcChzY29wZSkgfSlcbiAgfVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtaXNjZWxsYW5lb3VzLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gbmFtZVxuICogICBUaGUgbmFtZSBvZiB0aGUgaW5kZXguXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBbc2NvcGVdXG4gKiAgIFRoZSBSZWYgb2YgdGhlIGluZGV4J3Mgc2NvcGUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBJbmRleChuYW1lLCBzY29wZSkge1xuICBhcml0eS5iZXR3ZWVuKDEsIDIsIGFyZ3VtZW50cywgSW5kZXgubmFtZSlcbiAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgY2FzZSAxOlxuICAgICAgcmV0dXJuIG5ldyBFeHByKHsgaW5kZXg6IHdyYXAobmFtZSkgfSlcbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4gbmV3IEV4cHIoeyBpbmRleDogd3JhcChuYW1lKSwgc2NvcGU6IHdyYXAoc2NvcGUpIH0pXG4gIH1cbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWlzY2VsbGFuZW91cy1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IG5hbWVcbiAqICAgVGhlIG5hbWUgb2YgdGhlIGNsYXNzLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gW3Njb3BlXVxuICogICBUaGUgUmVmIG9mIHRoZSBjbGFzcydzIHNjb3BlLlxuICogQHJldHVybiB7RXhwcn1cbiAqXG4gKiBAZGVwcmVjYXRlZCBDbGFzcyBpcyBkZXByZWNhdGVkLCB1c2UgQ29sbGVjdGlvbiBpbnN0ZWFkXG4gKi9cbmZ1bmN0aW9uIENsYXNzKG5hbWUsIHNjb3BlKSB7XG4gIGFyaXR5LmJldHdlZW4oMSwgMiwgYXJndW1lbnRzLCBDbGFzcy5uYW1lKVxuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4gbmV3IEV4cHIoeyBjbGFzczogd3JhcChuYW1lKSB9KVxuICAgIGNhc2UgMjpcbiAgICAgIHJldHVybiBuZXcgRXhwcih7IGNsYXNzOiB3cmFwKG5hbWUpLCBzY29wZTogd3JhcChzY29wZSkgfSlcbiAgfVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtaXNjZWxsYW5lb3VzLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gbmFtZVxuICogICBUaGUgbmFtZSBvZiB0aGUgY29sbGVjdGlvbi5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IFtzY29wZV1cbiAqICAgVGhlIFJlZiBvZiB0aGUgY29sbGVjdGlvbidzIHNjb3BlLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ29sbGVjdGlvbihuYW1lLCBzY29wZSkge1xuICBhcml0eS5iZXR3ZWVuKDEsIDIsIGFyZ3VtZW50cywgQ29sbGVjdGlvbi5uYW1lKVxuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4gbmV3IEV4cHIoeyBjb2xsZWN0aW9uOiB3cmFwKG5hbWUpIH0pXG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIG5ldyBFeHByKHsgY29sbGVjdGlvbjogd3JhcChuYW1lKSwgc2NvcGU6IHdyYXAoc2NvcGUpIH0pXG4gIH1cbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWlzY2VsbGFuZW91cy1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IG5hbWVcbiAqICAgVGhlIG5hbWUgb2YgdGhlIHVzZXIgZGVmaW5lZCBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IFtzY29wZV1cbiAqICAgVGhlIFJlZiBvZiB0aGUgdXNlciBkZWZpbmVkIGZ1bmN0aW9uJ3Mgc2NvcGUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBGdW5jdGlvbkZuKG5hbWUsIHNjb3BlKSB7XG4gIGFyaXR5LmJldHdlZW4oMSwgMiwgYXJndW1lbnRzLCBGdW5jdGlvbkZuLm5hbWUpXG4gIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiBuZXcgRXhwcih7IGZ1bmN0aW9uOiB3cmFwKG5hbWUpIH0pXG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIG5ldyBFeHByKHsgZnVuY3Rpb246IHdyYXAobmFtZSksIHNjb3BlOiB3cmFwKHNjb3BlKSB9KVxuICB9XG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21pc2NlbGxhbmVvdXMtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBuYW1lXG4gKiAgIFRoZSBuYW1lIG9mIHRoZSByb2xlLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gW3Njb3BlXVxuICogICBUaGUgUmVmIG9mIHRoZSByb2xlJ3Mgc2NvcGUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBSb2xlKG5hbWUsIHNjb3BlKSB7XG4gIGFyaXR5LmJldHdlZW4oMSwgMiwgYXJndW1lbnRzLCBSb2xlLm5hbWUpXG4gIHNjb3BlID0gdXRpbC5kZWZhdWx0cyhzY29wZSwgbnVsbClcbiAgcmV0dXJuIG5ldyBFeHByKHBhcmFtcyh7IHJvbGU6IHdyYXAobmFtZSkgfSwgeyBzY29wZTogd3JhcChzY29wZSkgfSkpXG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHNjb3BlXG4gKiAgIFRoZSBSZWYgb2YgdGhlIGRhdGFiYXNlIHNldCdzIHNjb3BlLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQWNjZXNzUHJvdmlkZXJzKHNjb3BlKSB7XG4gIGFyaXR5Lm1heCgxLCBhcmd1bWVudHMsIEFjY2Vzc1Byb3ZpZGVycy5uYW1lKVxuICBzY29wZSA9IHV0aWwuZGVmYXVsdHMoc2NvcGUsIG51bGwpXG4gIHJldHVybiBuZXcgRXhwcih7IGFjY2Vzc19wcm92aWRlcnM6IHdyYXAoc2NvcGUpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21pc2NlbGxhbmVvdXMtZnVuY3Rpb25zKS5cbiAqXG4gKiBDb25zdHJ1Y3RzIGEgYGNsYXNzZXNgIGZ1bmN0aW9uIHRoYXQsIHdoZW4gZXZhbHVhdGVkLCByZXR1cm5zIGEgUmVmIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IFtzY29wZV1cbiAqICAgVGhlIFJlZiBvZiB0aGUgY2xhc3Mgc2V0J3Mgc2NvcGUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBDbGFzc2VzKHNjb3BlKSB7XG4gIGFyaXR5Lm1heCgxLCBhcmd1bWVudHMsIENsYXNzZXMubmFtZSlcbiAgc2NvcGUgPSB1dGlsLmRlZmF1bHRzKHNjb3BlLCBudWxsKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjbGFzc2VzOiB3cmFwKHNjb3BlKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtaXNjZWxsYW5lb3VzLWZ1bmN0aW9ucykuXG4gKlxuICogQ29uc3RydWN0cyBhIGBjb2xsZWN0aW9uc2AgZnVuY3Rpb24gdGhhdCwgd2hlbiBldmFsdWF0ZWQsIHJldHVybnMgYSBSZWYgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gW3Njb3BlXVxuICogICBUaGUgUmVmIG9mIHRoZSBjb2xsZWN0aW9uIHNldCdzIHNjb3BlLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ29sbGVjdGlvbnMoc2NvcGUpIHtcbiAgYXJpdHkubWF4KDEsIGFyZ3VtZW50cywgQ29sbGVjdGlvbnMubmFtZSlcbiAgc2NvcGUgPSB1dGlsLmRlZmF1bHRzKHNjb3BlLCBudWxsKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjb2xsZWN0aW9uczogd3JhcChzY29wZSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWlzY2VsbGFuZW91cy1mdW5jdGlvbnMpLlxuICpcbiAqIENvbnN0cnVjdHMgYSBgZGF0YWJhc2VzYCBmdW5jdGlvbnMgdGhhdCwgd2hlbiBldmFsdWF0ZWQsIHJldHVybnMgYSBSZWYgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gW3Njb3BlXVxuICogICBUaGUgUmVmIG9mIHRoZSBkYXRhYmFzZSBzZXQncyBzY29wZS5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIERhdGFiYXNlcyhzY29wZSkge1xuICBhcml0eS5tYXgoMSwgYXJndW1lbnRzLCBEYXRhYmFzZXMubmFtZSlcbiAgc2NvcGUgPSB1dGlsLmRlZmF1bHRzKHNjb3BlLCBudWxsKVxuICByZXR1cm4gbmV3IEV4cHIoeyBkYXRhYmFzZXM6IHdyYXAoc2NvcGUpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21pc2NlbGxhbmVvdXMtZnVuY3Rpb25zKS5cbiAqXG4gKiBDb25zdHJ1Y3RzIGFuIGBpbmRleGVzYCBmdW5jdGlvbiB0aGF0LCB3aGVuIGV2YWx1YXRlZCwgcmV0dXJucyBhIFJlZiB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBbc2NvcGVdXG4gKiAgIFRoZSBSZWYgb2YgdGhlIGluZGV4IHNldCdzIHNjb3BlLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gSW5kZXhlcyhzY29wZSkge1xuICBhcml0eS5tYXgoMSwgYXJndW1lbnRzLCBJbmRleGVzLm5hbWUpXG4gIHNjb3BlID0gdXRpbC5kZWZhdWx0cyhzY29wZSwgbnVsbClcbiAgcmV0dXJuIG5ldyBFeHByKHsgaW5kZXhlczogd3JhcChzY29wZSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWlzY2VsbGFuZW91cy1mdW5jdGlvbnMpLlxuICpcbiAqIENvbnN0cnVjdHMgYSBgZnVuY3Rpb25zYCBmdW5jdGlvbiB0aGF0LCB3aGVuIGV2YWx1YXRlZCwgcmV0dXJucyBhIFJlZiB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBbc2NvcGVdXG4gKiAgIFRoZSBSZWYgb2YgdGhlIHVzZXIgZGVmaW5lZCBmdW5jdGlvbiBzZXQncyBzY29wZS5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEZ1bmN0aW9ucyhzY29wZSkge1xuICBhcml0eS5tYXgoMSwgYXJndW1lbnRzLCBGdW5jdGlvbnMubmFtZSlcbiAgc2NvcGUgPSB1dGlsLmRlZmF1bHRzKHNjb3BlLCBudWxsKVxuICByZXR1cm4gbmV3IEV4cHIoeyBmdW5jdGlvbnM6IHdyYXAoc2NvcGUpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21pc2NlbGxhbmVvdXMtZnVuY3Rpb25zKS5cbiAqXG4gKiBDb25zdHJ1Y3RzIGEgYHJvbGVzYCBmdW5jdGlvbiB0aGF0LCB3aGVuIGV2YWx1YXRlZCwgcmV0dXJucyBhIFJlZiB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBbc2NvcGVdXG4gKiAgIFRoZSBSZWYgb2YgdGhlIHJvbGUgc2V0J3Mgc2NvcGUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBSb2xlcyhzY29wZSkge1xuICBhcml0eS5tYXgoMSwgYXJndW1lbnRzLCBSb2xlcy5uYW1lKVxuICBzY29wZSA9IHV0aWwuZGVmYXVsdHMoc2NvcGUsIG51bGwpXG4gIHJldHVybiBuZXcgRXhwcih7IHJvbGVzOiB3cmFwKHNjb3BlKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtaXNjZWxsYW5lb3VzLWZ1bmN0aW9ucykuXG4gKlxuICogQ29uc3RydWN0cyBhIGBrZXlzYCBmdW5jdGlvbiB0aGF0LCB3aGVuIGV2YWx1YXRlZCwgcmV0dXJucyBhIFJlZiB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBbc2NvcGVdXG4gKiAgIFRoZSBSZWYgb2YgdGhlIGtleSBzZXQncyBzY29wZS5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEtleXMoc2NvcGUpIHtcbiAgYXJpdHkubWF4KDEsIGFyZ3VtZW50cywgS2V5cy5uYW1lKVxuICBzY29wZSA9IHV0aWwuZGVmYXVsdHMoc2NvcGUsIG51bGwpXG4gIHJldHVybiBuZXcgRXhwcih7IGtleXM6IHdyYXAoc2NvcGUpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21pc2NlbGxhbmVvdXMtZnVuY3Rpb25zKS5cbiAqXG4gKiBDb25zdHJ1Y3RzIGEgYHRva2Vuc2AgZnVuY3Rpb24gdGhhdCwgd2hlbiBldmFsdWF0ZWQsIHJldHVybnMgYSBSZWYgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gW3Njb3BlXVxuICogICBUaGUgUmVmIG9mIHRoZSB0b2tlbiBzZXQncyBzY29wZS5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFRva2VucyhzY29wZSkge1xuICBhcml0eS5tYXgoMSwgYXJndW1lbnRzLCBUb2tlbnMubmFtZSlcbiAgc2NvcGUgPSB1dGlsLmRlZmF1bHRzKHNjb3BlLCBudWxsKVxuICByZXR1cm4gbmV3IEV4cHIoeyB0b2tlbnM6IHdyYXAoc2NvcGUpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21pc2NlbGxhbmVvdXMtZnVuY3Rpb25zKS5cbiAqXG4gKiBDb25zdHJ1Y3RzIGEgYGNyZWRlbnRpYWxzYCBmdW5jdGlvbnMgdGhhdCwgd2hlbiBldmFsdWF0ZWQsIHJldHVybnMgYSBSZWYgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gW3Njb3BlXVxuICogICBUaGUgUmVmIG9mIHRoZSBjcmVkZW50aWFsIHNldCdzIHNjb3BlLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ3JlZGVudGlhbHMoc2NvcGUpIHtcbiAgYXJpdHkubWF4KDEsIGFyZ3VtZW50cywgQ3JlZGVudGlhbHMubmFtZSlcbiAgc2NvcGUgPSB1dGlsLmRlZmF1bHRzKHNjb3BlLCBudWxsKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjcmVkZW50aWFsczogd3JhcChzY29wZSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWlzY2VsbGFuZW91cy1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgY29sbGVjdGlvbiBvZiBleHByZXNzaW9ucyB0byBjaGVjayBmb3IgZXF1aXZhbGVuY2UuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBFcXVhbHMoKSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIEVxdWFscy5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBlcXVhbHM6IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtaXNjZWxsYW5lb3VzLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcGF0aFxuICogICBBbiBhcnJheSByZXByZXNlbnRpbmcgYSBwYXRoIHRvIGNoZWNrIGZvciB0aGUgZXhpc3RlbmNlIG9mLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gaW5cbiAqICAgQW4gb2JqZWN0IHRvIHNlYXJjaCBhZ2FpbnN0LlxuICogQHJldHVybiB7RXhwcn1cbiAqXG4gKiBAZGVwcmVjYXRlZCB1c2UgQ29udGFpbnNQYXRoIGluc3RlYWRcbiAqL1xuZnVuY3Rpb24gQ29udGFpbnMocGF0aCwgX2luKSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgQ29udGFpbnMubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgY29udGFpbnM6IHdyYXAocGF0aCksIGluOiB3cmFwKF9pbikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWlzY2VsbGFuZW91cy1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHZhbHVlXG4gKiAgIFJlcHJlc2VudCB0aGUgdmFsdWUgd2Ugd2FudCB0byBzZWFyY2ggZm9yLlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gaW5cbiAqICAgQW4gb2JqZWN0IHdlIHdpbGwgc2VhcmNoIGZvciB0aGUgdmFsdWUgcGFzc2VkIGluLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ29udGFpbnNWYWx1ZSh2YWx1ZSwgX2luKSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgQ29udGFpbnNWYWx1ZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjb250YWluc192YWx1ZTogd3JhcCh2YWx1ZSksIGluOiB3cmFwKF9pbikgfSlcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGRcbiAqICAgQSBmaWVsZCBuYW1lIHdlIHdhbnQgdG8gY29uZmlybSBleGlzdHMuXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBvYmpcbiAqICAgQW4gb2JqZWN0IHRvIHNlYXJjaCBhZ2FpbnN0LlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ29udGFpbnNGaWVsZChmaWVsZCwgb2JqKSB7XG4gIGFyaXR5LmV4YWN0KDIsIGFyZ3VtZW50cywgQ29udGFpbnNGaWVsZC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjb250YWluc19maWVsZDogd3JhcChmaWVsZCksIGluOiB3cmFwKG9iaikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWlzY2VsbGFuZW91cy1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHBhdGhcbiAqICAgQW4gYXJyYXkgcmVwcmVzZW50aW5nIGEgcGF0aCB0byBjaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZi5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGluXG4gKiAgIEFuIG9iamVjdCB0byBzZWFyY2ggYWdhaW5zdC5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIENvbnRhaW5zUGF0aChwYXRoLCBfaW4pIHtcbiAgYXJpdHkuZXhhY3QoMiwgYXJndW1lbnRzLCBDb250YWluc1BhdGgubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgY29udGFpbnNfcGF0aDogd3JhcChwYXRoKSwgaW46IHdyYXAoX2luKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtaXNjZWxsYW5lb3VzLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gcGF0aFxuICogICBBbiBhcnJheSByZXByZXNlbnRpbmcgYSBwYXRoIHRvIHB1bGwgZnJvbSBhbiBvYmplY3QuXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBmcm9tXG4gKiAgIFRoZSBvYmplY3QgdG8gc2VsZWN0IGZyb21cbiAqIEBwYXJhbSB7P21vZHVsZTpxdWVyeX5FeHByQXJnfSBkZWZhdWx0XG4gKiAgIEEgZGVmYXVsdCB2YWx1ZSBpZiB0aGUgcGF0aCBkb2VzIG5vdCBleGlzdC5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFNlbGVjdChwYXRoLCBmcm9tLCBfZGVmYXVsdCkge1xuICBhcml0eS5iZXR3ZWVuKDIsIDMsIGFyZ3VtZW50cywgU2VsZWN0Lm5hbWUpXG4gIHZhciBleHByT2JqID0geyBzZWxlY3Q6IHdyYXAocGF0aCksIGZyb206IHdyYXAoZnJvbSkgfVxuICBpZiAoX2RlZmF1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgIGV4cHJPYmouZGVmYXVsdCA9IHdyYXAoX2RlZmF1bHQpXG4gIH1cbiAgcmV0dXJuIG5ldyBFeHByKGV4cHJPYmopXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21pc2NlbGxhbmVvdXMtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBwYXRoXG4gKiAgIEFuIGFycmF5IHJlcHJlc2VudGluZyBhIHBhdGggdG8gcHVsbCBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGZyb21cbiAqICAgVGhlIG9iamVjdCB0byBzZWxlY3QgZnJvbVxuICogQHJldHVybiB7RXhwcn1cbiAqXG4gKiBAZGVwcmVjYXRlZCBhdm9pZCB1c2luZ1xuICovXG5mdW5jdGlvbiBTZWxlY3RBbGwocGF0aCwgZnJvbSkge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIFNlbGVjdEFsbC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBzZWxlY3RfYWxsOiB3cmFwKHBhdGgpLCBmcm9tOiB3cmFwKGZyb20pIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgbnVtYmVycyB0byBwcm92aWRlIHRoZSBhYnNvbHV0ZSB2YWx1ZS5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEFicyhleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQWJzLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGFiczogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBIGNvbGxlY3Rpb24gb2YgbnVtYmVycyB0byBzdW0gdG9nZXRoZXIuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBBZGQoKSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIEFkZC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBhZGQ6IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBIGNvbGxlY3Rpb24gb2YgbnVtYmVycyB0byBiaXR3aXNlIGFuZCB0b2dldGhlci5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEJpdEFuZCgpIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgQml0QW5kLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGJpdGFuZDogd3JhcCh2YXJhcmdzKGFyZ3VtZW50cykpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgbnVtYmVycyB0byBwcm92aWRlIHRoZSBiaXR3aXNlIG5vdC5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEJpdE5vdChleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQml0Tm90Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGJpdG5vdDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBIGNvbGxlY3Rpb24gb2YgbnVtYmVycyB0byBiaXR3aXNlIE9yJ2QgdG9nZXRoZXIuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBCaXRPcigpIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgQml0T3IubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgYml0b3I6IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBIGNvbGxlY3Rpb24gb2YgbnVtYmVycyB0byBiaXR3aXNlIFhvcidkIHRvZ2V0aGVyLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQml0WG9yKCkge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBCaXRYb3IubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgYml0eG9yOiB3cmFwKHZhcmFyZ3MoYXJndW1lbnRzKSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWF0aGVtYXRpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgVGhlIGxlYXN0IGludGVnZXIgdGhhdCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG51bWJlclxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ2VpbChleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQ2VpbC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjZWlsOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgY29sbGVjdGlvbiBvZiBudW1iZXJzIHRvIGNvbXB1dGUgdGhlIHF1b3RpZW50IG9mLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gRGl2aWRlKCkge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBEaXZpZGUubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgZGl2aWRlOiB3cmFwKHZhcmFyZ3MoYXJndW1lbnRzKSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWF0aGVtYXRpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgVGhlIGdyZWF0ZXN0IGludGVnZXIgdGhhdCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG51bWJlclxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gRmxvb3IoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIEZsb29yLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGZsb29yOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgY29sbGVjdGlvbiBvZiBudW1iZXJzIHRvIG11bHRpcGx5IHRvZ2V0aGVyLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gTWF4KCkge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBNYXgubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgbWF4OiB3cmFwKHZhcmFyZ3MoYXJndW1lbnRzKSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWF0aGVtYXRpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgQSBjb2xsZWN0aW9uIG9mIG51bWJlcnMgdG8gbXVsdGlwbHkgdG9nZXRoZXIuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBNaW4oKSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIE1pbi5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBtaW46IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBIGNvbGxlY3Rpb24gb2YgbnVtYmVycyB0byBjb21wdXRlIHRoZSBxdW90aWVudCBvZi4gVGhlIHJlbWFpbmRlciB3aWxsIGJlIHJldHVybmVkLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gTW9kdWxvKCkge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBNb2R1bG8ubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgbW9kdWxvOiB3cmFwKHZhcmFyZ3MoYXJndW1lbnRzKSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWF0aGVtYXRpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgQSBjb2xsZWN0aW9uIG9mIG51bWJlcnMgdG8gbXVsdGlwbHkgdG9nZXRoZXIuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBNdWx0aXBseSgpIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgTXVsdGlwbHkubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgbXVsdGlwbHk6IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBIG51bWJlcnMgdG8gcm91bmQuXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBbiBvcHRpb25hbCBwcmVjaXNpb25cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFJvdW5kKHZhbHVlLCBwcmVjaXNpb24pIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgUm91bmQubmFtZSlcbiAgcHJlY2lzaW9uID0gdXRpbC5kZWZhdWx0cyhwcmVjaXNpb24sIG51bGwpXG4gIHJldHVybiBuZXcgRXhwcihcbiAgICBwYXJhbXMoeyByb3VuZDogd3JhcCh2YWx1ZSkgfSwgeyBwcmVjaXNpb246IHdyYXAocHJlY2lzaW9uKSB9KVxuICApXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgY29sbGVjdGlvbiBvZiBudW1iZXJzIHRvIGNvbXB1dGUgdGhlIGRpZmZlcmVuY2Ugb2YuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBTdWJ0cmFjdCgpIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgU3VidHJhY3QubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgc3VidHJhY3Q6IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBUaGUgc2lnbiBvZiB0aGUgbnVtYmVyIGlzIHJldHVybmVkIGFzIHBvc2l0aXZlIDEsIHplcm8gMCAsIG5lZ2F0aXZlIC0xXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBTaWduKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBTaWduLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IHNpZ246IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWF0aGVtYXRpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgVGhlIHNxdWFyZSByb290IG9mIHRoZSBudW1iZXJcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFNxcnQoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFNxcnQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgc3FydDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBIG51bWJlcnMgdG8gdHJ1bmNhdGUuXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBbiBvcHRpb25hbCBwcmVjaXNpb25cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFRydW5jKHZhbHVlLCBwcmVjaXNpb24pIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgVHJ1bmMubmFtZSlcbiAgcHJlY2lzaW9uID0gdXRpbC5kZWZhdWx0cyhwcmVjaXNpb24sIG51bGwpXG4gIHJldHVybiBuZXcgRXhwcihcbiAgICBwYXJhbXMoeyB0cnVuYzogd3JhcCh2YWx1ZSkgfSwgeyBwcmVjaXNpb246IHdyYXAocHJlY2lzaW9uKSB9KVxuICApXG59XG5cbi8qKlxuICpcbiAqIENvdW50IHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBhcmFtIHthcnJheX0gICAgLSBhcnJheSBvZiBpdGVtc1xuICogQHJldHVybiB7aW50ZWdlcn0gLSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb25cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9jb3VudFwiPkNvdW50IGZ1bmN0aW9uPC9hPlxuICovXG5mdW5jdGlvbiBDb3VudChjb2xsZWN0aW9uKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQ291bnQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgY291bnQ6IHdyYXAoY29sbGVjdGlvbikgfSlcbn1cblxuLyoqXG4gKlxuICogU3VtIHRoZSBlbGVtZW50cyBpbiB0aGUgY29sbGVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2FycmF5fSAtIGNvbGxlY3Rpb24gb2YgbnVtYmVyc1xuICogQHJldHVybiB7aW50ZWdlcn0gLSB0b3RhbCBvZiBhbGwgbnVtYmVycyBpbiBjb2xsZWN0aW9uXG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvc3VtXCI+U3VtIGZ1bmN0aW9uPC9hPlxuICovXG5mdW5jdGlvbiBTdW0oY29sbGVjdGlvbikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFN1bS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBzdW06IHdyYXAoY29sbGVjdGlvbikgfSlcbn1cblxuLyoqXG4gKlxuICogUmV0dXJucyB0aGUgbWVhbiBvZiBhbGwgZWxlbWVudHMgaW4gdGhlIGNvbGxlY3Rpb24uXG4gKlxuICogQHBhcmFtIHthcnJheX0gLSBjb2xsZWN0aW9uIHRoZSBudW1iZXJzXG4gKiBAcmV0dXJuIHtmbG9hdH0gLSB0aGUgbWVhbiBvZiBhbGwgbnVtYmVycyBpbiB0aGUgY29sbGVjdGlvblxuICogQHNlZSA8YSBocmVmPVwiaHR0cHM6Ly9kb2NzLmZhdW5hLmNvbS9mYXVuYS9jdXJyZW50L2FwaS9mcWwvZnVuY3Rpb25zL21lYW5cIj5NZWFuIGZ1bmN0aW9uPC9hPlxuICovXG5mdW5jdGlvbiBNZWFuKGNvbGxlY3Rpb24pIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBNZWFuLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IG1lYW46IHdyYXAoY29sbGVjdGlvbikgfSlcbn1cblxuLyoqXG4gKlxuICogRXZhbHVhdGVzIHRvIHRydWUgaWYgYW55IGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gaXMgdHJ1ZS5cbiAqXG4gKiBAcGFyYW0ge2FycmF5fSAtIGNvbGxlY3Rpb24gdGhlIGNvbGxlY3Rpb25cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2RvY3MuZmF1bmEuY29tL2ZhdW5hL2N1cnJlbnQvYXBpL2ZxbC9mdW5jdGlvbnMvYW55XCI+QW55IGZ1bmN0aW9uPC9hPlxuICovXG5mdW5jdGlvbiBBbnkoY29sbGVjdGlvbikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIEFueS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBhbnk6IHdyYXAoY29sbGVjdGlvbikgfSlcbn1cblxuLyoqXG4gKlxuICogRXZhbHVhdGVzIHRvIHRydWUgaWYgYWxsIGVsZW1lbnRzIG9mIHRoZSBjb2xsZWN0aW9uIGFyZSB0cnVlLlxuICpcbiAqIEBwYXJhbSB7YXJyYXl9IC0gY29sbGVjdGlvbiB0aGUgY29sbGVjdGlvblxuICogQHJldHVybiB7RXhwcn1cbiAqIEBzZWUgPGEgaHJlZj1cImh0dHBzOi8vZG9jcy5mYXVuYS5jb20vZmF1bmEvY3VycmVudC9hcGkvZnFsL2Z1bmN0aW9ucy9hbGxcIj5BbGwgZnVuY3Rpb248L2E+XG4gKi9cbmZ1bmN0aW9uIEFsbChjb2xsZWN0aW9uKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQWxsLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGFsbDogd3JhcChjb2xsZWN0aW9uKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBUaGUgYXJjIGNvc2luZSBvZiB0aGUgbnVtYmVyXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBBY29zKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBBY29zLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGFjb3M6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWF0aGVtYXRpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgVGhlIGFyYyBzaW5lIG9mIHRoZSBudW1iZXJcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEFzaW4oZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIEFzaW4ubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgYXNpbjogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBUaGUgYXJjIHRhbmdlbnQgb2YgdGhlIG51bWJlclxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQXRhbihleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQXRhbi5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBhdGFuOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIFRoZSBjb3NpbmUgb2YgYSBudW1iZXJcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIENvcyhleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQ29zLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGNvczogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBUaGUgaHlwZXJib2xpYyBjb3NpbmUgb2YgdGhlIG51bWJlclxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQ29zaChleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgQ29zaC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBjb3NoOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIFRha2UgcmFkaWFucyBhbmQgY29udmVydCBpdCB0byBkZWdyZWVzIDM2MCBkZWdyZWVzID0gMiAqIHBpIHJhZGlhbnNcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIERlZ3JlZXMoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIERlZ3JlZXMubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgZGVncmVlczogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBUaGUgZSByYWlzZWQgdG8gYW4gZXhwb25lbnQgbnVtYmVyXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBFeHAoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIEV4cC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBleHA6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbWF0aGVtYXRpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgQSBzaWRlIG9mIHRoZSByaWdodCB0cmlhbmdsZVxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgVGhlIHNlY29uZCBzaWRlIG9mIGEgcmlnaHQgdHJpYW5nZSwgZGVmYXVsdHMgdG8gdGhlIGZpcnN0IHNpZGVcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEh5cG90KHZhbHVlLCBzaWRlKSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIEh5cG90Lm5hbWUpXG4gIHNpZGUgPSB1dGlsLmRlZmF1bHRzKHNpZGUsIG51bGwpXG4gIHJldHVybiBuZXcgRXhwcihwYXJhbXMoeyBoeXBvdDogd3JhcCh2YWx1ZSkgfSwgeyBiOiB3cmFwKHNpZGUpIH0pKVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBUaGUgbmF0dXJhbCBsb2cgb2YgdGhlIG51bWJlclxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gTG4oZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIExuLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGxuOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIFRoZSBsb2cgYmFzZSAxMCBvZiBhIG51bWJlclxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gTG9nKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBMb2cubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgbG9nOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgbnVtYmVycyB0byByYWlzZSB0byB0aGUgcG93ZXIuXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBBbiBvcHRpb25hbCBleHBvbmVudFxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gUG93KHZhbHVlLCBleHBvbmVudCkge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBQb3cubmFtZSlcbiAgZXhwb25lbnQgPSB1dGlsLmRlZmF1bHRzKGV4cG9uZW50LCBudWxsKVxuICByZXR1cm4gbmV3IEV4cHIocGFyYW1zKHsgcG93OiB3cmFwKHZhbHVlKSB9LCB7IGV4cDogd3JhcChleHBvbmVudCkgfSkpXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIFRha2UgZGVncmVlcyBhbmQgY29udmVydCB0aGUgbnVtYmVyIHRvIHJhZGlhbnMgMiAqIHBpID0gMzYwIGRlZ3JlZXNcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFJhZGlhbnMoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFJhZGlhbnMubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgcmFkaWFuczogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBUaGUgc2luZSBvZiBhIG51bWJlclxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gU2luKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBTaW4ubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgc2luOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIFRoZSBoeXBlcmJvbGljIHNpbmUgb2YgYSBudW1iZXJcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFNpbmgoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFNpbmgubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgc2luaDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNtYXRoZW1hdGljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0gey4uLm1vZHVsZTpxdWVyeX5FeHByQXJnfSB0ZXJtc1xuICogICBUaGUgVGFuZ2VudCBvZiBhIG51bWJlclxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gVGFuKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBUYW4ubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdGFuOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI21hdGhlbWF0aWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIFRoZSBoeWJlcmJvbGljIHRhbmdlbnQgb2YgYSBudW1iZXJcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFRhbmgoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFRhbmgubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdGFuaDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNsb2dpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgQSBjb2xsZWN0aW9uIG9mIHRlcm1zIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBMVCgpIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgTFQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgbHQ6IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNsb2dpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgQSBjb2xsZWN0aW9uIG9mIHRlcm1zIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBMVEUoKSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIExURS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBsdGU6IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNsb2dpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgQSBjb2xsZWN0aW9uIG9mIHRlcm1zIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBHVCgpIHtcbiAgYXJpdHkubWluKDEsIGFyZ3VtZW50cywgR1QubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgZ3Q6IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNsb2dpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgQSBjb2xsZWN0aW9uIG9mIHRlcm1zIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBHVEUoKSB7XG4gIGFyaXR5Lm1pbigxLCBhcmd1bWVudHMsIEdURS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBndGU6IHdyYXAodmFyYXJncyhhcmd1bWVudHMpKSB9KVxufVxuXG4vKipcbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNsb2dpY2FsLWZ1bmN0aW9ucykuXG4gKlxuICogQHBhcmFtIHsuLi5tb2R1bGU6cXVlcnl+RXhwckFyZ30gdGVybXNcbiAqICAgQSBjb2xsZWN0aW9uIHRvIGNvbXB1dGUgdGhlIGNvbmp1bmN0aW9uIG9mLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gQW5kKCkge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBBbmQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgYW5kOiB3cmFwKHZhcmFyZ3MoYXJndW1lbnRzKSkgfSlcbn1cblxuLyoqXG4gKiBTZWUgdGhlIFtkb2NzXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjbG9naWNhbC1mdW5jdGlvbnMpLlxuICpcbiAqIEBwYXJhbSB7Li4ubW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IHRlcm1zXG4gKiAgIEEgY29sbGVjdGlvbiB0byBjb21wdXRlIHRoZSBkaXNqdW5jdGlvbiBvZi5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIE9yKCkge1xuICBhcml0eS5taW4oMSwgYXJndW1lbnRzLCBPci5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBvcjogd3JhcCh2YXJhcmdzKGFyZ3VtZW50cykpIH0pXG59XG5cbi8qKlxuICogU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI2xvZ2ljYWwtZnVuY3Rpb25zKS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBib29sZWFuXG4gKiAgIEEgYm9vbGVhbiB0byBwcm9kdWNlIHRoZSBuZWdhdGlvbiBvZi5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIE5vdChib29sZWFuKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgTm90Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IG5vdDogd3JhcChib29sZWFuKSB9KVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGV4cHJlc3Npb24gdG8gYSBzdHJpbmcgbGl0ZXJhbC5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByZXNzaW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gdG8gY29udmVydCB0byBhIHN0cmluZy5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIFRvU3RyaW5nKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBUb1N0cmluZy5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyB0b19zdHJpbmc6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBleHByZXNzaW9uIHRvIGEgbnVtYmVyIGxpdGVyYWwuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwcmVzc2lvblxuICogICBBbiBleHByZXNzaW9uIHRvIGNvbnZlcnQgdG8gYSBudW1iZXIuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBUb051bWJlcihleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgVG9OdW1iZXIubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdG9fbnVtYmVyOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gZXhwcmVzc2lvbiB0byBhbiBPYmplY3QuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwcmVzc2lvblxuICogICBBbiBleHByZXNzaW9uIHRvIGNvbnZlcnQgdG8gYW4gT2JqZWN0LlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gVG9PYmplY3QoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFRvT2JqZWN0Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IHRvX29iamVjdDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGV4cHJlc3Npb24gdG8gYW4gQXJyYXkuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwcmVzc2lvblxuICogICBBbiBleHByZXNzaW9uIHRvIGNvbnZlcnQgdG8gYW4gQXJyYXkuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBUb0FycmF5KGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBUb0FycmF5Lm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IHRvX2FycmF5OiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gZXhwcmVzc2lvbiB0byBhIGRvdWJsZSB2YWx1ZSwgaWYgcG9zc2libGUuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwcmVzc2lvblxuICogICBBbiBleHByZXNzaW9uIHRvIGNvbnZlcnQgdG8gYSBkb3VibGUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBUb0RvdWJsZShleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgVG9Eb3VibGUubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdG9fZG91YmxlOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gZXhwcmVzc2lvbiB0byBhbiBpbnRlZ2VyIHZhbHVlLCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByZXNzaW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gdG8gY29udmVydCB0byBhbiBpbnRlZ2VyLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gVG9JbnRlZ2VyKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBUb0ludGVnZXIubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdG9faW50ZWdlcjogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGV4cHJlc3Npb24gdG8gYSB0aW1lIGxpdGVyYWwuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwcmVzc2lvblxuICogICBBbiBleHByZXNzaW9uIHRvIGNvbnZlcnQgdG8gYSB0aW1lLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gVG9UaW1lKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBUb1RpbWUubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdG9fdGltZTogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGV4cHJlc3Npb24gZXZhbHVhdGluZyB0byBhIHRpbWUgdG8gc2Vjb25kcyBzaW5jZSBlcG9jaC5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByZXNzaW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gdG8gY29udmVydCB0byBzZWNvbmRzIG51bWVyaWMgdmFsdWUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBUb1NlY29uZHMoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFRvU2Vjb25kcy5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyB0b19zZWNvbmRzOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ29udmVydHMgYSB0aW1lIGV4cHJlc3Npb24gdG8gbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJlc3Npb25cbiAqICAgQW4gZXhwcmVzc2lvbiB0byBjb252ZXJ0IHRvIG1pbGxpc2Vjb25kIG51bWVyaWMgdmFsdWUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBUb01pbGxpcyhleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgVG9NaWxsaXMubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdG9fbWlsbGlzOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ29udmVydHMgYSB0aW1lIGV4cHJlc3Npb24gdG8gbWljcm9zZWNvbmRzIHNpbmNlIHRoZSBVTklYIGVwb2NoLlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJlc3Npb25cbiAqICAgQW4gZXhwcmVzc2lvbiB0byBjb252ZXJ0IHRvIG1pY3Jvc2Vjb25kIG51bWVyaWMgdmFsdWUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBUb01pY3JvcyhleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgVG9NaWNyb3MubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgdG9fbWljcm9zOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogUmV0dXJucyBhIHRpbWUgZXhwcmVzc2lvbidzIGRheSBvZiB0aGUgd2VlayBmb2xsb3dpbmcgSVNPLTg2MDEgY29udmVudGlvbiwgZnJvbSAxIChNb25kYXkpIHRvIDcgKFN1bmRheSkuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwcmVzc2lvblxuICogICBBbiBleHByZXNzaW9uIHRvIGNvbnZlcnQgdG8gZGF5IG9mIHdlZWsuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBEYXlPZldlZWsoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIERheU9mV2Vlay5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBkYXlfb2Zfd2Vlazogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFJldHVybnMgYSB0aW1lIGV4cHJlc3Npb24ncyBkYXkgb2YgdGhlIHllYXIsIGZyb20gMSB0byAzNjUsIG9yIDM2NiBpbiBhIGxlYXAgeWVhci5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByZXNzaW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gdG8gY29udmVydCB0byBkYXkgb2YgeWVhci5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIERheU9mWWVhcihleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgRGF5T2ZZZWFyLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGRheV9vZl95ZWFyOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogUmV0dXJucyBhIHRpbWUgZXhwcmVzc2lvbidzIGRheSBvZiB0aGUgbW9udGgsIGZyb20gMSB0byAzMS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByZXNzaW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gdG8gY29udmVydCB0byBkYXkgb2YgbW9udGguXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBEYXlPZk1vbnRoKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBEYXlPZk1vbnRoLm5hbWUpXG4gIHJldHVybiBuZXcgRXhwcih7IGRheV9vZl9tb250aDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFJldHVybnMgYSB0aW1lIGV4cHJlc3Npb24ncyBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgZnJvbSAwIHRvIDU5LlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJlc3Npb25cbiAqICAgQW4gZXhwcmVzc2lvbiB0byBjb252ZXJ0IHRvIGEgaG91ci5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEhvdXIoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIEhvdXIubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgaG91cjogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFJldHVybnMgYSB0aW1lIGV4cHJlc3Npb24ncyBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgZnJvbSAwIHRvIDU5LlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJlc3Npb25cbiAqICAgQW4gZXhwcmVzc2lvbiB0byBjb252ZXJ0IHRvIGEgbW9udGguXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBNaW51dGUoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIE1pbnV0ZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBtaW51dGU6IHdyYXAoZXhwcikgfSlcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdGltZSBleHByZXNzaW9uJ3Mgc2Vjb25kIG9mIHRoZSBtaW51dGUsIGZyb20gMCB0byA1OS5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByZXNzaW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gdG8gY29udmVydCB0byBhIG1vbnRoLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gU2Vjb25kKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBTZWNvbmQubmFtZSlcbiAgcmV0dXJuIG5ldyBFeHByKHsgc2Vjb25kOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogUmV0dXJucyBhIHRpbWUgZXhwcmVzc2lvbidzIG1vbnRoIG9mIHRoZSB5ZWFyLCBmcm9tIDEgdG8gMTIuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwcmVzc2lvblxuICogICBBbiBleHByZXNzaW9uIHRvIGNvbnZlcnQgdG8gYSBtb250aC5cbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIE1vbnRoKGV4cHIpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBNb250aC5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBtb250aDogd3JhcChleHByKSB9KVxufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHRpbWUgZXhwcmVzc2lvbidzIHllYXIsIGZvbGxvd2luZyB0aGUgSVNPLTg2MDEgc3RhbmRhcmQuXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwcmVzc2lvblxuICogICBBbiBleHByZXNzaW9uIHRvIGNvbnZlcnQgdG8gYSB5ZWFyLlxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gWWVhcihleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgWWVhci5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyB5ZWFyOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gZXhwcmVzc2lvbiB0byBhIGRhdGUgbGl0ZXJhbC5cbiAqXG4gKiBAcGFyYW0ge21vZHVsZTpxdWVyeX5FeHByQXJnfSBleHByZXNzaW9uXG4gKiAgIEFuIGV4cHJlc3Npb24gdG8gY29udmVydCB0byBhIGRhdGUuXG4gKiBAcmV0dXJuIHtFeHByfVxuICovXG5mdW5jdGlvbiBUb0RhdGUoZXhwcikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIFRvRGF0ZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyB0b19kYXRlOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICogTW92ZSBkYXRhYmFzZSB0byBhIG5ldyBoaWVyYXJjaHkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9ICBmcm9tIGRhdGFiYXNlIHJlZmVyZW5jZSB0byBiZSBtb3ZlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSAgdG8gbmV3IHBhcmVudCBkYXRhYmFzZSByZWZlcmVuY2UuXG4gKiBAcmV0dXJuIHtFeHByfSAgIFRoZSBleHByZXNzaW9uIHdyYXBwaW5nIHRoZSBwcm92aWRlZCBvYmplY3QuXG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjd3JpdGUtZnVuY3Rpb25zXCI+RmF1bmFEQiBXcml0ZSBGdW5jdGlvbnM8L2E+XG4gKi9cbmZ1bmN0aW9uIE1vdmVEYXRhYmFzZShmcm9tLCB0bykge1xuICBhcml0eS5leGFjdCgyLCBhcmd1bWVudHMsIE1vdmVEYXRhYmFzZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBtb3ZlX2RhdGFiYXNlOiB3cmFwKGZyb20pLCB0bzogd3JhcCh0bykgfSlcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2V0IG9mIGFsbCBkb2N1bWVudHMgaW4gdGhlIGdpdmVuIGNvbGxlY3Rpb24uXG4gKiBBIHNldCBtdXN0IGJlIHBhZ2luYXRlZCBpbiBvcmRlciB0byByZXRyaWV2ZSBpdHMgdmFsdWVzLlxuICpcbiAqIEBwYXJhbSBjb2xsZWN0aW9uIGEgcmVmZXJlbmNlIHRvIHRoZSBjb2xsZWN0aW9uLiBUeXBlOiBSZWZcbiAqIEByZXR1cm4gYSBuZXcge0BsaW5rIEV4cHJ9IGluc3RhbmNlXG4gKiBAc2VlICNQYWdpbmF0ZShFeHByKVxuICovXG5mdW5jdGlvbiBEb2N1bWVudHMoY29sbGVjdGlvbikge1xuICBhcml0eS5leGFjdCgxLCBhcmd1bWVudHMsIERvY3VtZW50cy5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBkb2N1bWVudHM6IHdyYXAoY29sbGVjdGlvbikgfSlcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHttb2R1bGU6cXVlcnl+RXhwckFyZ30gZXhwclxuICogIEFuIGV4cHJlc3Npb24gKGkuZS4gU2V0LCBQYWdlLCBvciBBcnJheSkgdG8gcmV2ZXJzZVxuICogQHJldHVybiB7RXhwcn1cbiAqL1xuZnVuY3Rpb24gUmV2ZXJzZShleHByKSB7XG4gIGFyaXR5LmV4YWN0KDEsIGFyZ3VtZW50cywgUmV2ZXJzZS5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyByZXZlcnNlOiB3cmFwKGV4cHIpIH0pXG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IG5hbWVcbiAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyBhbiBBY2Nlc3NQcm92aWRlcidzIG5hbWVcbiAqIEByZXR1cm4ge0V4cHJ9XG4gKi9cbmZ1bmN0aW9uIEFjY2Vzc1Byb3ZpZGVyKG5hbWUpIHtcbiAgYXJpdHkuZXhhY3QoMSwgYXJndW1lbnRzLCBBY2Nlc3NQcm92aWRlci5uYW1lKVxuICByZXR1cm4gbmV3IEV4cHIoeyBhY2Nlc3NfcHJvdmlkZXI6IHdyYXAobmFtZSkgfSlcbn1cblxuLy8gSGVscGVyc1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gYXJpdHkobWluLCBtYXgsIGFyZ3MsIGNhbGxlckZ1bmMpIHtcbiAgaWYgKFxuICAgIChtaW4gIT09IG51bGwgJiYgYXJncy5sZW5ndGggPCBtaW4pIHx8XG4gICAgKG1heCAhPT0gbnVsbCAmJiBhcmdzLmxlbmd0aCA+IG1heClcbiAgKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJpdHkobWluLCBtYXgsIGFyZ3MubGVuZ3RoLCBjYWxsZXJGdW5jKVxuICB9XG5cbiAgaWYgKG1pbiAhPT0gbnVsbCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWluOyBpKyspIHtcbiAgICAgIGlmIChhcmdzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkVmFsdWUoXG4gICAgICAgICAgYEV4cGVjdGVkIHZhbHVlLCBidXQgZm91bmQgJ3VuZGVmaW5lZCcuIEFyZ3VtZW50ICR7aX0gZm9yICR7Y2FsbGVyRnVuY30gaXMgcmVxdWlyZWQuYFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmFyaXR5LmV4YWN0ID0gZnVuY3Rpb24obiwgYXJncywgY2FsbGVyRnVuYykge1xuICBhcml0eShuLCBuLCBhcmdzLCBjYWxsZXJGdW5jKVxufVxuYXJpdHkubWF4ID0gZnVuY3Rpb24obiwgYXJncywgY2FsbGVyRnVuYykge1xuICBhcml0eShudWxsLCBuLCBhcmdzLCBjYWxsZXJGdW5jKVxufVxuYXJpdHkubWluID0gZnVuY3Rpb24obiwgYXJncywgY2FsbGVyRnVuYykge1xuICBhcml0eShuLCBudWxsLCBhcmdzLCBjYWxsZXJGdW5jKVxufVxuYXJpdHkuYmV0d2VlbiA9IGZ1bmN0aW9uKG1pbiwgbWF4LCBhcmdzLCBjYWxsZXJGdW5jKSB7XG4gIGFyaXR5KG1pbiwgbWF4LCBhcmdzLCBjYWxsZXJGdW5jKVxufVxuXG4vKiogQWRkcyBvcHRpb25hbCBwYXJhbWV0ZXJzIHRvIHRoZSBxdWVyeS5cbiAqXG4gKiBAaWdub3JlXG4gKiAqL1xuZnVuY3Rpb24gcGFyYW1zKG1haW5QYXJhbXMsIG9wdGlvbmFsUGFyYW1zKSB7XG4gIGZvciAodmFyIGtleSBpbiBvcHRpb25hbFBhcmFtcykge1xuICAgIHZhciB2YWwgPSBvcHRpb25hbFBhcmFtc1trZXldXG4gICAgaWYgKHZhbCAhPT0gbnVsbCAmJiB2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWFpblBhcmFtc1trZXldID0gdmFsXG4gICAgfVxuICB9XG4gIHJldHVybiBtYWluUGFyYW1zXG59XG5cbi8qKlxuICogQ2FsbGVkIG9uIHJlc3QgYXJndW1lbnRzLlxuICogVGhpcyBlbnN1cmVzIHRoYXQgYSBzaW5nbGUgdmFsdWUgcGFzc2VkIGlzIG5vdCBwdXQgaW4gYW4gYXJyYXksIHNvXG4gKiBgcXVlcnkuYWRkKFsxLCAyXSlgIHdpbGwgd29yayBhcyB3ZWxsIGFzIGBxdWVyeS5hZGQoMSwgMilgLlxuICpcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gdmFyYXJncyh2YWx1ZXMpIHtcbiAgdmFyIHZhbHVlc0FzQXJyID0gQXJyYXkuaXNBcnJheSh2YWx1ZXMpXG4gICAgPyB2YWx1ZXNcbiAgICA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZhbHVlcylcbiAgcmV0dXJuIHZhbHVlcy5sZW5ndGggPT09IDEgPyB2YWx1ZXNbMF0gOiB2YWx1ZXNBc0FyclxufVxuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gYXJnc1RvQXJyYXkoYXJncykge1xuICB2YXIgcnYgPSBbXVxuICBydi5wdXNoLmFwcGx5KHJ2LCBhcmdzKVxuICByZXR1cm4gcnZcbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBvYmplY3QgYXMgYW4gRXhwcmVzc2lvbi4gVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgd3JhcCBhbnkgYmFyZSBvYmplY3RzIHdpdGhcbiAqIHRoZSBhcHByb3ByaWF0ZSB7QGxpbmsgb2JqZWN0fSBlc2NhcGluZy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqICBUaGUgb2JqZWN0IHRvIGJlIHdyYXBwZWQgYXMgYW4gRXhwcmVzc2lvbi5cbiAqIEByZXR1cm5zIHtFeHByfVxuICogICBUaGUgZXhwcmVzc2lvbiB3cmFwcGluZyB0aGUgcHJvdmlkZWQgb2JqZWN0LlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gd3JhcChvYmopIHtcbiAgLy8gdGhlIGFyaXR5IGZ1bmN0aW9ucyB0aHJvdyB3aGVuIHByb3ZpZGVkIHVuZGVmaW5lZCBhcmd1bWVudHNcbiAgLy8gYnV0IHdyYXAgY2FuIGFjY2VwdCB1bmRlZmluZWQgdmFsdWVzLiBJdCBzdGlsbCBzaG91bGQgYmUgZ2l2ZW5cbiAgLy8gZXhhY3RseSBvbmUgYXJndW1lbnQsIGV2ZW4gaWYgaXQgaXMgdW5kZWZpbmVkLlxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyaXR5KDEsIDEsIGFyZ3VtZW50cy5sZW5ndGgsIHdyYXAubmFtZSlcbiAgfVxuICBpZiAob2JqID09PSB1bmRlZmluZWQgfHwgb2JqID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG9ialxuICB9IGVsc2UgaWYgKFxuICAgIG9iaiBpbnN0YW5jZW9mIEV4cHIgfHxcbiAgICB1dGlsLmNoZWNrSW5zdGFuY2VIYXNQcm9wZXJ0eShvYmosICdfaXNGYXVuYUV4cHInKVxuICApIHtcbiAgICByZXR1cm4gb2JqXG4gIH0gZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ3N5bWJvbCcpIHtcbiAgICByZXR1cm4gb2JqLnRvU3RyaW5nKCkucmVwbGFjZSgvU3ltYm9sXFwoKC4qKVxcKS8sIGZ1bmN0aW9uKHN0ciwgc3ltYm9sKSB7XG4gICAgICByZXR1cm4gc3ltYm9sXG4gICAgfSlcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIExhbWJkYShvYmopXG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgcmV0dXJuIG5ldyBFeHByKFxuICAgICAgb2JqLm1hcChmdW5jdGlvbihlbGVtKSB7XG4gICAgICAgIHJldHVybiB3cmFwKGVsZW0pXG4gICAgICB9KVxuICAgIClcbiAgfSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IG9iaiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIG5ldyB2YWx1ZXMuQnl0ZXMob2JqKVxuICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG5ldyBFeHByKHsgb2JqZWN0OiB3cmFwVmFsdWVzKG9iaikgfSlcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2JqXG4gIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbGwgb2YgdGhlIHZhbHVlcyBvZiBhIHByb3ZpZGVkIE9iamVjdCwgd2hpbGUgbGVhdmluZyB0aGUgcGFyZW50IG9iamVjdCB1bndyYXBwZWQuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiAgVGhlIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIHRvIGJlIHdyYXBwZWQgYXMgRXhwcmVzc2lvbnMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICogIEEgY29weSBvZiB0aGUgcHJvdmlkZWQgb2JqZWN0LCB3aXRoIHRoZSB2YWx1ZXMgd3JhcHBlZCBhcyBFeHByZXNzaW9ucy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHdyYXBWYWx1ZXMob2JqKSB7XG4gIGlmIChvYmogIT09IG51bGwpIHtcbiAgICB2YXIgcnYgPSB7fVxuXG4gICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgcnZba2V5XSA9IHdyYXAob2JqW2tleV0pXG4gICAgfSlcblxuICAgIHJldHVybiBydlxuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFJlZjogUmVmLFxuICBCeXRlczogQnl0ZXMsXG4gIEFib3J0OiBBYm9ydCxcbiAgQXQ6IEF0LFxuICBMZXQ6IExldCxcbiAgVmFyOiBWYXIsXG4gIElmOiBJZixcbiAgRG86IERvLFxuICBPYmplY3Q6IG9iamVjdEZ1bmN0aW9uLFxuICBMYW1iZGE6IExhbWJkYSxcbiAgQ2FsbDogQ2FsbCxcbiAgUXVlcnk6IFF1ZXJ5LFxuICBNYXA6IE1hcCxcbiAgRm9yZWFjaDogRm9yZWFjaCxcbiAgRmlsdGVyOiBGaWx0ZXIsXG4gIFRha2U6IFRha2UsXG4gIERyb3A6IERyb3AsXG4gIFByZXBlbmQ6IFByZXBlbmQsXG4gIEFwcGVuZDogQXBwZW5kLFxuICBJc0VtcHR5OiBJc0VtcHR5LFxuICBJc05vbkVtcHR5OiBJc05vbkVtcHR5LFxuICBJc051bWJlcjogSXNOdW1iZXIsXG4gIElzRG91YmxlOiBJc0RvdWJsZSxcbiAgSXNJbnRlZ2VyOiBJc0ludGVnZXIsXG4gIElzQm9vbGVhbjogSXNCb29sZWFuLFxuICBJc051bGw6IElzTnVsbCxcbiAgSXNCeXRlczogSXNCeXRlcyxcbiAgSXNUaW1lc3RhbXA6IElzVGltZXN0YW1wLFxuICBJc0RhdGU6IElzRGF0ZSxcbiAgSXNTdHJpbmc6IElzU3RyaW5nLFxuICBJc0FycmF5OiBJc0FycmF5LFxuICBJc09iamVjdDogSXNPYmplY3QsXG4gIElzUmVmOiBJc1JlZixcbiAgSXNTZXQ6IElzU2V0LFxuICBJc0RvYzogSXNEb2MsXG4gIElzTGFtYmRhOiBJc0xhbWJkYSxcbiAgSXNDb2xsZWN0aW9uOiBJc0NvbGxlY3Rpb24sXG4gIElzRGF0YWJhc2U6IElzRGF0YWJhc2UsXG4gIElzSW5kZXg6IElzSW5kZXgsXG4gIElzRnVuY3Rpb246IElzRnVuY3Rpb24sXG4gIElzS2V5OiBJc0tleSxcbiAgSXNUb2tlbjogSXNUb2tlbixcbiAgSXNDcmVkZW50aWFsczogSXNDcmVkZW50aWFscyxcbiAgSXNSb2xlOiBJc1JvbGUsXG4gIEdldDogR2V0LFxuICBLZXlGcm9tU2VjcmV0OiBLZXlGcm9tU2VjcmV0LFxuICBSZWR1Y2U6IFJlZHVjZSxcbiAgUGFnaW5hdGU6IFBhZ2luYXRlLFxuICBFeGlzdHM6IEV4aXN0cyxcbiAgQ3JlYXRlOiBDcmVhdGUsXG4gIFVwZGF0ZTogVXBkYXRlLFxuICBSZXBsYWNlOiBSZXBsYWNlLFxuICBEZWxldGU6IERlbGV0ZSxcbiAgSW5zZXJ0OiBJbnNlcnQsXG4gIFJlbW92ZTogUmVtb3ZlLFxuICBDcmVhdGVDbGFzczogZGVwcmVjYXRlKFxuICAgIENyZWF0ZUNsYXNzLFxuICAgICdDcmVhdGVDbGFzcygpIGlzIGRlcHJlY2F0ZWQsIHVzZSBDcmVhdGVDb2xsZWN0aW9uKCkgaW5zdGVhZCdcbiAgKSxcbiAgQ3JlYXRlQ29sbGVjdGlvbjogQ3JlYXRlQ29sbGVjdGlvbixcbiAgQ3JlYXRlRGF0YWJhc2U6IENyZWF0ZURhdGFiYXNlLFxuICBDcmVhdGVJbmRleDogQ3JlYXRlSW5kZXgsXG4gIENyZWF0ZUtleTogQ3JlYXRlS2V5LFxuICBDcmVhdGVGdW5jdGlvbjogQ3JlYXRlRnVuY3Rpb24sXG4gIENyZWF0ZVJvbGU6IENyZWF0ZVJvbGUsXG4gIENyZWF0ZUFjY2Vzc1Byb3ZpZGVyOiBDcmVhdGVBY2Nlc3NQcm92aWRlcixcbiAgU2luZ2xldG9uOiBTaW5nbGV0b24sXG4gIEV2ZW50czogRXZlbnRzLFxuICBNYXRjaDogTWF0Y2gsXG4gIFVuaW9uOiBVbmlvbixcbiAgTWVyZ2U6IE1lcmdlLFxuICBJbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbixcbiAgRGlmZmVyZW5jZTogRGlmZmVyZW5jZSxcbiAgRGlzdGluY3Q6IERpc3RpbmN0LFxuICBKb2luOiBKb2luLFxuICBSYW5nZTogUmFuZ2UsXG4gIExvZ2luOiBMb2dpbixcbiAgTG9nb3V0OiBMb2dvdXQsXG4gIElkZW50aWZ5OiBJZGVudGlmeSxcbiAgSWRlbnRpdHk6IGRlcHJlY2F0ZShcbiAgICBJZGVudGl0eSxcbiAgICAnSWRlbnRpdHkoKSBpcyBkZXByZWNhdGVkLCB1c2UgQ3VycmVudElkZW50aXR5KCkgaW5zdGVhZCdcbiAgKSxcbiAgQ3VycmVudElkZW50aXR5OiBDdXJyZW50SWRlbnRpdHksXG4gIEhhc0lkZW50aXR5OiBkZXByZWNhdGUoXG4gICAgSGFzSWRlbnRpdHksXG4gICAgJ0hhc0lkZW50aXR5KCkgaXMgZGVwcmVjYXRlZCwgdXNlIEhhc0N1cnJlbnRJZGVudGl0eSgpIGluc3RlYWQnXG4gICksXG4gIEhhc0N1cnJlbnRJZGVudGl0eTogSGFzQ3VycmVudElkZW50aXR5LFxuICBDdXJyZW50VG9rZW46IEN1cnJlbnRUb2tlbixcbiAgSGFzQ3VycmVudFRva2VuOiBIYXNDdXJyZW50VG9rZW4sXG4gIENvbmNhdDogQ29uY2F0LFxuICBDYXNlZm9sZDogQ2FzZWZvbGQsXG4gIENvbnRhaW5zU3RyOiBDb250YWluc1N0cixcbiAgQ29udGFpbnNTdHJSZWdleDogQ29udGFpbnNTdHJSZWdleCxcbiAgU3RhcnRzV2l0aDogU3RhcnRzV2l0aCxcbiAgRW5kc1dpdGg6IEVuZHNXaXRoLFxuICBGaW5kU3RyOiBGaW5kU3RyLFxuICBGaW5kU3RyUmVnZXg6IEZpbmRTdHJSZWdleCxcbiAgTGVuZ3RoOiBMZW5ndGgsXG4gIExvd2VyQ2FzZTogTG93ZXJDYXNlLFxuICBMVHJpbTogTFRyaW0sXG4gIE5HcmFtOiBOR3JhbSxcbiAgUmVwZWF0OiBSZXBlYXQsXG4gIFJlcGxhY2VTdHI6IFJlcGxhY2VTdHIsXG4gIFJlcGxhY2VTdHJSZWdleDogUmVwbGFjZVN0clJlZ2V4LFxuICBSZWdleEVzY2FwZTogUmVnZXhFc2NhcGUsXG4gIFJUcmltOiBSVHJpbSxcbiAgU3BhY2U6IFNwYWNlLFxuICBTdWJTdHJpbmc6IFN1YlN0cmluZyxcbiAgVGl0bGVDYXNlOiBUaXRsZUNhc2UsXG4gIFRyaW06IFRyaW0sXG4gIFVwcGVyQ2FzZTogVXBwZXJDYXNlLFxuICBGb3JtYXQ6IEZvcm1hdCxcbiAgVGltZTogVGltZSxcbiAgVGltZUFkZDogVGltZUFkZCxcbiAgVGltZVN1YnRyYWN0OiBUaW1lU3VidHJhY3QsXG4gIFRpbWVEaWZmOiBUaW1lRGlmZixcbiAgRXBvY2g6IEVwb2NoLFxuICBEYXRlOiBEYXRlLFxuICBOb3c6IE5vdyxcbiAgTmV4dElkOiBkZXByZWNhdGUoTmV4dElkLCAnTmV4dElkKCkgaXMgZGVwcmVjYXRlZCwgdXNlIE5ld0lkKCkgaW5zdGVhZCcpLFxuICBOZXdJZDogTmV3SWQsXG4gIERhdGFiYXNlOiBEYXRhYmFzZSxcbiAgSW5kZXg6IEluZGV4LFxuICBDbGFzczogZGVwcmVjYXRlKENsYXNzLCAnQ2xhc3MoKSBpcyBkZXByZWNhdGVkLCB1c2UgQ29sbGVjdGlvbigpIGluc3RlYWQnKSxcbiAgQ29sbGVjdGlvbjogQ29sbGVjdGlvbixcbiAgRnVuY3Rpb246IEZ1bmN0aW9uRm4sXG4gIFJvbGU6IFJvbGUsXG4gIEFjY2Vzc1Byb3ZpZGVyczogQWNjZXNzUHJvdmlkZXJzLFxuICBDbGFzc2VzOiBkZXByZWNhdGUoXG4gICAgQ2xhc3NlcyxcbiAgICAnQ2xhc3NlcygpIGlzIGRlcHJlY2F0ZWQsIHVzZSBDb2xsZWN0aW9ucygpIGluc3RlYWQnXG4gICksXG4gIENvbGxlY3Rpb25zOiBDb2xsZWN0aW9ucyxcbiAgRGF0YWJhc2VzOiBEYXRhYmFzZXMsXG4gIEluZGV4ZXM6IEluZGV4ZXMsXG4gIEZ1bmN0aW9uczogRnVuY3Rpb25zLFxuICBSb2xlczogUm9sZXMsXG4gIEtleXM6IEtleXMsXG4gIFRva2VuczogVG9rZW5zLFxuICBDcmVkZW50aWFsczogQ3JlZGVudGlhbHMsXG4gIEVxdWFsczogRXF1YWxzLFxuICBDb250YWluczogZGVwcmVjYXRlKFxuICAgIENvbnRhaW5zLFxuICAgICdDb250YWlucygpIGlzIGRlcHJlY2F0ZWQsIHVzZSBDb250YWluc1BhdGgoKSBpbnN0ZWFkJ1xuICApLFxuICBDb250YWluc1BhdGg6IENvbnRhaW5zUGF0aCxcbiAgQ29udGFpbnNGaWVsZDogQ29udGFpbnNGaWVsZCxcbiAgQ29udGFpbnNWYWx1ZTogQ29udGFpbnNWYWx1ZSxcbiAgU2VsZWN0OiBTZWxlY3QsXG4gIFNlbGVjdEFsbDogZGVwcmVjYXRlKFNlbGVjdEFsbCwgJ1NlbGVjdEFsbCgpIGlzIGRlcHJlY2F0ZWQuIEF2b2lkIHVzZS4nKSxcbiAgQWJzOiBBYnMsXG4gIEFkZDogQWRkLFxuICBCaXRBbmQ6IEJpdEFuZCxcbiAgQml0Tm90OiBCaXROb3QsXG4gIEJpdE9yOiBCaXRPcixcbiAgQml0WG9yOiBCaXRYb3IsXG4gIENlaWw6IENlaWwsXG4gIERpdmlkZTogRGl2aWRlLFxuICBGbG9vcjogRmxvb3IsXG4gIE1heDogTWF4LFxuICBNaW46IE1pbixcbiAgTW9kdWxvOiBNb2R1bG8sXG4gIE11bHRpcGx5OiBNdWx0aXBseSxcbiAgUm91bmQ6IFJvdW5kLFxuICBTdWJ0cmFjdDogU3VidHJhY3QsXG4gIFNpZ246IFNpZ24sXG4gIFNxcnQ6IFNxcnQsXG4gIFRydW5jOiBUcnVuYyxcbiAgQ291bnQ6IENvdW50LFxuICBTdW06IFN1bSxcbiAgTWVhbjogTWVhbixcbiAgQW55OiBBbnksXG4gIEFsbDogQWxsLFxuICBBY29zOiBBY29zLFxuICBBc2luOiBBc2luLFxuICBBdGFuOiBBdGFuLFxuICBDb3M6IENvcyxcbiAgQ29zaDogQ29zaCxcbiAgRGVncmVlczogRGVncmVlcyxcbiAgRXhwOiBFeHAsXG4gIEh5cG90OiBIeXBvdCxcbiAgTG46IExuLFxuICBMb2c6IExvZyxcbiAgUG93OiBQb3csXG4gIFJhZGlhbnM6IFJhZGlhbnMsXG4gIFNpbjogU2luLFxuICBTaW5oOiBTaW5oLFxuICBUYW46IFRhbixcbiAgVGFuaDogVGFuaCxcbiAgTFQ6IExULFxuICBMVEU6IExURSxcbiAgR1Q6IEdULFxuICBHVEU6IEdURSxcbiAgQW5kOiBBbmQsXG4gIE9yOiBPcixcbiAgTm90OiBOb3QsXG4gIFRvU3RyaW5nOiBUb1N0cmluZyxcbiAgVG9OdW1iZXI6IFRvTnVtYmVyLFxuICBUb09iamVjdDogVG9PYmplY3QsXG4gIFRvQXJyYXk6IFRvQXJyYXksXG4gIFRvRG91YmxlOiBUb0RvdWJsZSxcbiAgVG9JbnRlZ2VyOiBUb0ludGVnZXIsXG4gIFRvVGltZTogVG9UaW1lLFxuICBUb1NlY29uZHM6IFRvU2Vjb25kcyxcbiAgVG9NaWNyb3M6IFRvTWljcm9zLFxuICBUb01pbGxpczogVG9NaWxsaXMsXG4gIERheU9mTW9udGg6IERheU9mTW9udGgsXG4gIERheU9mV2VlazogRGF5T2ZXZWVrLFxuICBEYXlPZlllYXI6IERheU9mWWVhcixcbiAgU2Vjb25kOiBTZWNvbmQsXG4gIE1pbnV0ZTogTWludXRlLFxuICBIb3VyOiBIb3VyLFxuICBNb250aDogTW9udGgsXG4gIFllYXI6IFllYXIsXG4gIFRvRGF0ZTogVG9EYXRlLFxuICBNb3ZlRGF0YWJhc2U6IE1vdmVEYXRhYmFzZSxcbiAgRG9jdW1lbnRzOiBEb2N1bWVudHMsXG4gIFJldmVyc2U6IFJldmVyc2UsXG4gIEFjY2Vzc1Byb3ZpZGVyOiBBY2Nlc3NQcm92aWRlcixcbiAgYXJpdHk6IGFyaXR5LFxuICB3cmFwOiB3cmFwLFxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/query.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/stream.js":
/*!********************************************!*\
  !*** ./node_modules/faunadb/src/stream.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\n/** @module stream */\n\n// NOTE: Although implemented in a separate module, streaming shares internal\n// responsibilities with both Client and HTTP interfaces, such as updating last\n// seen transaction timestamp. Therefore, this implementation\n// sometimes breaks encapsulation and calls internal getters and methods. As a\n// general rule: it's okay to call internal methods. You can interpret this\n// as calling for a package visible method in languages with fine-grained\n// visibility control. However, DO NOT change any internal state from outside of\n// its context as it'd most certainly lead to errors.\n\nvar { AbortController } = __webpack_require__(/*! node-abort-controller */ \"(ssr)/./node_modules/node-abort-controller/index.js\")\nvar RequestResult = __webpack_require__(/*! ./RequestResult */ \"(ssr)/./node_modules/faunadb/src/RequestResult.js\")\nvar errors = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/faunadb/src/errors.js\")\nvar json = __webpack_require__(/*! ./_json */ \"(ssr)/./node_modules/faunadb/src/_json.js\")\nvar http = __webpack_require__(/*! ./_http */ \"(ssr)/./node_modules/faunadb/src/_http/index.js\")\nvar q = __webpack_require__(/*! ./query */ \"(ssr)/./node_modules/faunadb/src/query.js\")\nvar util = __webpack_require__(/*! ./_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\n\nvar DefaultEvents = ['start', 'error', 'version', 'history_rewrite', 'set']\nvar DocumentStreamEvents = DefaultEvents.concat(['snapshot'])\n\n/**\n * The internal stream client interface. This class handles the network side of\n * a stream subscription.\n *\n * @constructor\n * @param {Client} client The FaunaDB client.\n * @param {module:query~ExprArg} expression The FQL expression you are subscribing to.\n * @param {module:stream~Options} options The stream options.\n * @param {function} onEvent The stream event's callback function.\n * @private\n */\nfunction StreamClient(client, expression, options, onEvent) {\n  options = util.applyDefaults(options, {\n    fields: null,\n  })\n\n  this._client = client\n  this._onEvent = onEvent\n  this._query = q.wrap(expression)\n  this._urlParams = options.fields ? { fields: options.fields.join(',') } : null\n  this._abort = new AbortController()\n  this._state = 'idle'\n}\n\n/**\n * Takes a snapshot of the current query. Assumes the subscribed query returns a\n * reference.\n */\nStreamClient.prototype.snapshot = function() {\n  var self = this\n  self._client\n    .query(q.Get(self._query))\n    .then(function(doc) {\n      self._onEvent({\n        type: 'snapshot',\n        event: doc,\n      })\n    })\n    .catch(function(error) {\n      self._onEvent({\n        type: 'error',\n        event: error,\n      })\n    })\n}\n\n/** Initiates the stream subscription.  */\nStreamClient.prototype.subscribe = function() {\n  var self = this\n\n  if (self._state === 'idle') {\n    self._state = 'open'\n  } else {\n    throw new Error(\n      'Subscription#start should not be called several times, ' +\n        'consider instantiating a new stream instead.'\n    )\n  }\n\n  var body = JSON.stringify(self._query)\n  var startTime = Date.now()\n  var buffer = ''\n\n  function onResponse(response) {\n    var endTime = Date.now()\n    var parsed\n\n    try {\n      parsed = json.parseJSON(response.body)\n    } catch (_) {\n      parsed = response.body\n    }\n\n    var result = new RequestResult(\n      'POST',\n      'stream',\n      self._urlParams,\n      body,\n      self._query,\n      response.body,\n      parsed,\n      response.status,\n      response.headers,\n      startTime,\n      endTime\n    )\n\n    self._client._handleRequestResult(response, result)\n  }\n\n  function onData(data) {\n    var result = json.parseJSONStreaming(buffer + data)\n\n    buffer = result.buffer\n\n    result.values.forEach(function(event) {\n      if (event.txn !== undefined) {\n        self._client.syncLastTxnTime(event.txn)\n      }\n\n      if (event.event === 'error') {\n        onError(new errors.StreamErrorEvent(event))\n      } else {\n        self._onEvent(event)\n      }\n    })\n  }\n\n  function onError(error) {\n    // AbortError is triggered as result of calling\n    // close() on a Subscription. There's no need to relay this event back up.\n    if (error instanceof http.AbortError) {\n      return\n    }\n\n    self._onEvent({\n      type: 'error',\n      event: error,\n    })\n  }\n\n  self._client._http\n    .execute({\n      method: 'POST',\n      path: 'stream',\n      body: body,\n      query: self._urlParams,\n      signal: this._abort.signal,\n      streamConsumer: {\n        onError: onError,\n        onData: onData,\n      },\n    })\n    .then(onResponse)\n    .catch(onError)\n}\n\n/** Closes the stream subscription by aborting its underlying http request. */\nStreamClient.prototype.close = function() {\n  if (this._state !== 'closed') {\n    this._state = 'closed'\n    this._abort.abort()\n  }\n}\n\n/**\n * Event dispatch interface for stream subscription.\n *\n * @constructor\n * @param {string[]} allowedEvents List of allowed events.\n * @private\n */\nfunction EventDispatcher(allowedEvents) {\n  this._allowedEvents = allowedEvents\n  this._listeners = {}\n}\n\n/** Subscribe to an event\n *\n * @param {string} type The event type.\n * @param {module:stream~Subscription~eventCalllback} callback\n *   The event's callback.\n */\nEventDispatcher.prototype.on = function(type, callback) {\n  if (this._allowedEvents.indexOf(type) === -1) {\n    throw new Error('Unknown event type: ' + type)\n  }\n  if (this._listeners[type] === undefined) {\n    this._listeners[type] = []\n  }\n  this._listeners[type].push(callback)\n}\n\n/**\n * Dispatch the given event to the appropriate listeners.\n *\n * @param {Object} event The event.\n */\nEventDispatcher.prototype.dispatch = function(event) {\n  var listeners = this._listeners[event.type]\n  if (!listeners) {\n    return\n  }\n\n  for (var i = 0; i < listeners.length; i++) {\n    listeners[i].call(null, event.event, event)\n  }\n}\n\n/**\n * Stream's start event. A stream subscription always begins with a start event.\n * Upcoming events are guaranteed to have transaction timestamps equal to or greater than\n * the stream's start timestamp.\n *\n * @event module:stream~Subscription#start\n * @type {object}\n * @property {string} type='start'\n *   The event type.\n * @property {number} txn\n *   The event's transaction timestamp.\n * @property {module:number} event\n *   The stream start timestamp.\n */\n\n/**\n * A version event occurs upon any modifications to the current state of the\n * subscribed document.\n *\n * @event module:stream~Subscription#version\n * @type {object}\n * @property {string} type='version'\n *   The event type.\n * @property {number} txn\n *   The event's transaction timestamp.\n * @property {object} event\n *   The event's data.\n */\n\n/**\n * A history rewrite event occurs upon any modifications to the history of the\n * subscribed document.\n *\n * @event module:stream~Subscription#history_rewrite\n * @type {object}\n * @property {string} type='history_rewrite'\n *   The event type.\n * @property {number} txn\n *   The event's transaction timestamp.\n * @property {object} event\n *   The event's data.\n */\n\n/**\n * A snapshot event. A snapshot event is fired once the `document` stream helper\n * finishes loading the subscribed document's snapshot data. See {@link\n * Client#stream} for more details on the `document` stream helper.\n *\n * @event module:stream~Subscription#snapshot\n * @type {object}\n * @property {string} type='snapshot'\n *   The event type.\n * @property {number} txn\n *   The event's transaction timestamp.\n * @property {object} event\n *   The event's data.\n */\n\n/**\n * An error event is fired both for client and server errors that may occur as\n * a result of a subscription.\n *\n * @event module:stream~Subscription#error\n * @type {object}\n * @property {string} type='error'\n *   The event type.\n * @property {?number} txn\n *   The event's transaction timestamp.\n * @property {Error} event\n *   The underlying error.\n */\n\n/**\n * @typedef {Object} Options\n * @property {string[]} [fields=['action', 'document', 'diff', 'prev', 'index']]\n *   The fields event fields to opt-in during stream subscription. Possible\n *   options:\n *   * 'action': The action type\n *   * 'document': The document's data\n *   * 'diff': The difference between 'document' and 'prev'\n *   * 'prev': The event's previous data\n *   * 'index': The event's source index, if a set event\n */\n\n/**\n * The callback to be executed when an new event occurs.\n *\n * @callback module:stream~Subscription~eventCalllback\n * @param {any} data The event's data field.\n * @param {object} event The event's entire object.\n */\n\n/**\n * A stream subscription which dispatches events received to the registered\n * listener functions. This class must be constructed via {@link Client#stream}\n * method.\n *\n * @constructor\n * @param {StreamClient} client\n *   Internal stream client interface.\n * @param {EventDispatcher} dispatcher\n *   Internal event dispatcher interface.\n */\nfunction Subscription(client, dispatcher) {\n  this._client = client\n  this._dispatcher = dispatcher\n}\n\n/**\n * Subscribes to an event type.\n *\n * @param {string} event\n *   The event's type.\n * @param {module:stream~Subscription~eventCalllback} callback\n *   A callback function.\n *\n * @returns {module:stream~Subscription} This instance.\n */\nSubscription.prototype.on = function(type, callback) {\n  this._dispatcher.on(type, callback)\n  return this\n}\n\n/**\n * Initiates the underlying subscription network calls.\n * @returns {module:stream~Subscription} This instance.\n */\nSubscription.prototype.start = function() {\n  this._client.subscribe()\n  return this\n}\n\n/**\n * Stops the current subscription and closes the underlying network connection.\n */\nSubscription.prototype.close = function() {\n  this._client.close()\n}\n\n/**\n * Stream API factory function. See {@link Client#stream} for details on how to\n * use stream's public interface.\n * @private\n */\nfunction StreamAPI(client) {\n  var api = function(expression, options) {\n    var dispatcher = new EventDispatcher(DefaultEvents)\n    var streamClient = new StreamClient(client, expression, options, function(\n      event\n    ) {\n      dispatcher.dispatch(event)\n    })\n    return new Subscription(streamClient, dispatcher)\n  }\n\n  api.document = function(expression, options) {\n    var buffer = []\n    var buffering = true\n    var dispatcher = new EventDispatcher(DocumentStreamEvents)\n    var streamClient = new StreamClient(client, expression, options, onEvent)\n\n    function onEvent(event) {\n      switch (event.type) {\n        case 'start':\n          dispatcher.dispatch(event)\n          streamClient.snapshot()\n          break\n        case 'snapshot':\n          resume(event)\n          break\n        case 'error':\n          dispatcher.dispatch(event)\n          break\n        default:\n          if (buffering) {\n            buffer.push(event)\n          } else {\n            dispatcher.dispatch(event)\n          }\n      }\n    }\n\n    function resume(snapshotEvent) {\n      dispatcher.dispatch(snapshotEvent)\n      for (var i = 0; i < buffer.length; i++) {\n        var bufferedEvent = buffer[i]\n        if (bufferedEvent.txn > snapshotEvent.event.ts) {\n          dispatcher.dispatch(bufferedEvent)\n        }\n      }\n      buffering = false\n      buffer = null\n    }\n\n    return new Subscription(streamClient, dispatcher)\n  }\n\n  return api\n}\n\nmodule.exports = {\n  StreamAPI: StreamAPI,\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTSxrQkFBa0IsRUFBRSxtQkFBTyxDQUFDLGtGQUF1QjtBQUN6RCxvQkFBb0IsbUJBQU8sQ0FBQywwRUFBaUI7QUFDN0MsYUFBYSxtQkFBTyxDQUFDLDREQUFVO0FBQy9CLFdBQVcsbUJBQU8sQ0FBQywwREFBUztBQUM1QixXQUFXLG1CQUFPLENBQUMsZ0VBQVM7QUFDNUIsUUFBUSxtQkFBTyxDQUFDLDBEQUFTO0FBQ3pCLFdBQVcsbUJBQU8sQ0FBQywwREFBUzs7QUFFNUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsc0JBQXNCO0FBQ2pDLFdBQVcsdUJBQXVCO0FBQ2xDLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsbUNBQW1DO0FBQzFFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsMkNBQTJDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0Isc0JBQXNCO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsY0FBYyxRQUFRO0FBQ3RCO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCO0FBQ0EsY0FBYyxlQUFlO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixjQUFjLFFBQVE7QUFDdEI7QUFDQSxjQUFjLFFBQVE7QUFDdEI7QUFDQSxjQUFjLFFBQVE7QUFDdEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLGNBQWMsUUFBUTtBQUN0QjtBQUNBLGNBQWMsUUFBUTtBQUN0QjtBQUNBLGNBQWMsUUFBUTtBQUN0QjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrRUFBa0U7QUFDbEUsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsY0FBYyxRQUFRO0FBQ3RCO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixjQUFjLFFBQVE7QUFDdEI7QUFDQSxjQUFjLFNBQVM7QUFDdkI7QUFDQSxjQUFjLE9BQU87QUFDckI7QUFDQTs7QUFFQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixjQUFjLFVBQVU7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsS0FBSztBQUNoQixXQUFXLFFBQVE7QUFDbkI7O0FBRUE7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekI7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVywyQ0FBMkM7QUFDdEQ7QUFDQTtBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUNBQXFDLHFCQUFxQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQkFBc0IsbUJBQW1CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29rYm9va3Nob3BuZy8uL25vZGVfbW9kdWxlcy9mYXVuYWRiL3NyYy9zdHJlYW0uanM/ZGQwNCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuLyoqIEBtb2R1bGUgc3RyZWFtICovXG5cbi8vIE5PVEU6IEFsdGhvdWdoIGltcGxlbWVudGVkIGluIGEgc2VwYXJhdGUgbW9kdWxlLCBzdHJlYW1pbmcgc2hhcmVzIGludGVybmFsXG4vLyByZXNwb25zaWJpbGl0aWVzIHdpdGggYm90aCBDbGllbnQgYW5kIEhUVFAgaW50ZXJmYWNlcywgc3VjaCBhcyB1cGRhdGluZyBsYXN0XG4vLyBzZWVuIHRyYW5zYWN0aW9uIHRpbWVzdGFtcC4gVGhlcmVmb3JlLCB0aGlzIGltcGxlbWVudGF0aW9uXG4vLyBzb21ldGltZXMgYnJlYWtzIGVuY2Fwc3VsYXRpb24gYW5kIGNhbGxzIGludGVybmFsIGdldHRlcnMgYW5kIG1ldGhvZHMuIEFzIGFcbi8vIGdlbmVyYWwgcnVsZTogaXQncyBva2F5IHRvIGNhbGwgaW50ZXJuYWwgbWV0aG9kcy4gWW91IGNhbiBpbnRlcnByZXQgdGhpc1xuLy8gYXMgY2FsbGluZyBmb3IgYSBwYWNrYWdlIHZpc2libGUgbWV0aG9kIGluIGxhbmd1YWdlcyB3aXRoIGZpbmUtZ3JhaW5lZFxuLy8gdmlzaWJpbGl0eSBjb250cm9sLiBIb3dldmVyLCBETyBOT1QgY2hhbmdlIGFueSBpbnRlcm5hbCBzdGF0ZSBmcm9tIG91dHNpZGUgb2Zcbi8vIGl0cyBjb250ZXh0IGFzIGl0J2QgbW9zdCBjZXJ0YWlubHkgbGVhZCB0byBlcnJvcnMuXG5cbnZhciB7IEFib3J0Q29udHJvbGxlciB9ID0gcmVxdWlyZSgnbm9kZS1hYm9ydC1jb250cm9sbGVyJylcbnZhciBSZXF1ZXN0UmVzdWx0ID0gcmVxdWlyZSgnLi9SZXF1ZXN0UmVzdWx0JylcbnZhciBlcnJvcnMgPSByZXF1aXJlKCcuL2Vycm9ycycpXG52YXIganNvbiA9IHJlcXVpcmUoJy4vX2pzb24nKVxudmFyIGh0dHAgPSByZXF1aXJlKCcuL19odHRwJylcbnZhciBxID0gcmVxdWlyZSgnLi9xdWVyeScpXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vX3V0aWwnKVxuXG52YXIgRGVmYXVsdEV2ZW50cyA9IFsnc3RhcnQnLCAnZXJyb3InLCAndmVyc2lvbicsICdoaXN0b3J5X3Jld3JpdGUnLCAnc2V0J11cbnZhciBEb2N1bWVudFN0cmVhbUV2ZW50cyA9IERlZmF1bHRFdmVudHMuY29uY2F0KFsnc25hcHNob3QnXSlcblxuLyoqXG4gKiBUaGUgaW50ZXJuYWwgc3RyZWFtIGNsaWVudCBpbnRlcmZhY2UuIFRoaXMgY2xhc3MgaGFuZGxlcyB0aGUgbmV0d29yayBzaWRlIG9mXG4gKiBhIHN0cmVhbSBzdWJzY3JpcHRpb24uXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0NsaWVudH0gY2xpZW50IFRoZSBGYXVuYURCIGNsaWVudC5cbiAqIEBwYXJhbSB7bW9kdWxlOnF1ZXJ5fkV4cHJBcmd9IGV4cHJlc3Npb24gVGhlIEZRTCBleHByZXNzaW9uIHlvdSBhcmUgc3Vic2NyaWJpbmcgdG8uXG4gKiBAcGFyYW0ge21vZHVsZTpzdHJlYW1+T3B0aW9uc30gb3B0aW9ucyBUaGUgc3RyZWFtIG9wdGlvbnMuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbkV2ZW50IFRoZSBzdHJlYW0gZXZlbnQncyBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIFN0cmVhbUNsaWVudChjbGllbnQsIGV4cHJlc3Npb24sIG9wdGlvbnMsIG9uRXZlbnQpIHtcbiAgb3B0aW9ucyA9IHV0aWwuYXBwbHlEZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgZmllbGRzOiBudWxsLFxuICB9KVxuXG4gIHRoaXMuX2NsaWVudCA9IGNsaWVudFxuICB0aGlzLl9vbkV2ZW50ID0gb25FdmVudFxuICB0aGlzLl9xdWVyeSA9IHEud3JhcChleHByZXNzaW9uKVxuICB0aGlzLl91cmxQYXJhbXMgPSBvcHRpb25zLmZpZWxkcyA/IHsgZmllbGRzOiBvcHRpb25zLmZpZWxkcy5qb2luKCcsJykgfSA6IG51bGxcbiAgdGhpcy5fYWJvcnQgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcbiAgdGhpcy5fc3RhdGUgPSAnaWRsZSdcbn1cblxuLyoqXG4gKiBUYWtlcyBhIHNuYXBzaG90IG9mIHRoZSBjdXJyZW50IHF1ZXJ5LiBBc3N1bWVzIHRoZSBzdWJzY3JpYmVkIHF1ZXJ5IHJldHVybnMgYVxuICogcmVmZXJlbmNlLlxuICovXG5TdHJlYW1DbGllbnQucHJvdG90eXBlLnNuYXBzaG90ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBzZWxmLl9jbGllbnRcbiAgICAucXVlcnkocS5HZXQoc2VsZi5fcXVlcnkpKVxuICAgIC50aGVuKGZ1bmN0aW9uKGRvYykge1xuICAgICAgc2VsZi5fb25FdmVudCh7XG4gICAgICAgIHR5cGU6ICdzbmFwc2hvdCcsXG4gICAgICAgIGV2ZW50OiBkb2MsXG4gICAgICB9KVxuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICBzZWxmLl9vbkV2ZW50KHtcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgZXZlbnQ6IGVycm9yLFxuICAgICAgfSlcbiAgICB9KVxufVxuXG4vKiogSW5pdGlhdGVzIHRoZSBzdHJlYW0gc3Vic2NyaXB0aW9uLiAgKi9cblN0cmVhbUNsaWVudC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIGlmIChzZWxmLl9zdGF0ZSA9PT0gJ2lkbGUnKSB7XG4gICAgc2VsZi5fc3RhdGUgPSAnb3BlbidcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnU3Vic2NyaXB0aW9uI3N0YXJ0IHNob3VsZCBub3QgYmUgY2FsbGVkIHNldmVyYWwgdGltZXMsICcgK1xuICAgICAgICAnY29uc2lkZXIgaW5zdGFudGlhdGluZyBhIG5ldyBzdHJlYW0gaW5zdGVhZC4nXG4gICAgKVxuICB9XG5cbiAgdmFyIGJvZHkgPSBKU09OLnN0cmluZ2lmeShzZWxmLl9xdWVyeSlcbiAgdmFyIHN0YXJ0VGltZSA9IERhdGUubm93KClcbiAgdmFyIGJ1ZmZlciA9ICcnXG5cbiAgZnVuY3Rpb24gb25SZXNwb25zZShyZXNwb25zZSkge1xuICAgIHZhciBlbmRUaW1lID0gRGF0ZS5ub3coKVxuICAgIHZhciBwYXJzZWRcblxuICAgIHRyeSB7XG4gICAgICBwYXJzZWQgPSBqc29uLnBhcnNlSlNPTihyZXNwb25zZS5ib2R5KVxuICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgIHBhcnNlZCA9IHJlc3BvbnNlLmJvZHlcbiAgICB9XG5cbiAgICB2YXIgcmVzdWx0ID0gbmV3IFJlcXVlc3RSZXN1bHQoXG4gICAgICAnUE9TVCcsXG4gICAgICAnc3RyZWFtJyxcbiAgICAgIHNlbGYuX3VybFBhcmFtcyxcbiAgICAgIGJvZHksXG4gICAgICBzZWxmLl9xdWVyeSxcbiAgICAgIHJlc3BvbnNlLmJvZHksXG4gICAgICBwYXJzZWQsXG4gICAgICByZXNwb25zZS5zdGF0dXMsXG4gICAgICByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgc3RhcnRUaW1lLFxuICAgICAgZW5kVGltZVxuICAgIClcblxuICAgIHNlbGYuX2NsaWVudC5faGFuZGxlUmVxdWVzdFJlc3VsdChyZXNwb25zZSwgcmVzdWx0KVxuICB9XG5cbiAgZnVuY3Rpb24gb25EYXRhKGRhdGEpIHtcbiAgICB2YXIgcmVzdWx0ID0ganNvbi5wYXJzZUpTT05TdHJlYW1pbmcoYnVmZmVyICsgZGF0YSlcblxuICAgIGJ1ZmZlciA9IHJlc3VsdC5idWZmZXJcblxuICAgIHJlc3VsdC52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKGV2ZW50LnR4biAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlbGYuX2NsaWVudC5zeW5jTGFzdFR4blRpbWUoZXZlbnQudHhuKVxuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQuZXZlbnQgPT09ICdlcnJvcicpIHtcbiAgICAgICAgb25FcnJvcihuZXcgZXJyb3JzLlN0cmVhbUVycm9yRXZlbnQoZXZlbnQpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5fb25FdmVudChldmVudClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gb25FcnJvcihlcnJvcikge1xuICAgIC8vIEFib3J0RXJyb3IgaXMgdHJpZ2dlcmVkIGFzIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgLy8gY2xvc2UoKSBvbiBhIFN1YnNjcmlwdGlvbi4gVGhlcmUncyBubyBuZWVkIHRvIHJlbGF5IHRoaXMgZXZlbnQgYmFjayB1cC5cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBodHRwLkFib3J0RXJyb3IpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNlbGYuX29uRXZlbnQoe1xuICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgIGV2ZW50OiBlcnJvcixcbiAgICB9KVxuICB9XG5cbiAgc2VsZi5fY2xpZW50Ll9odHRwXG4gICAgLmV4ZWN1dGUoe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBwYXRoOiAnc3RyZWFtJyxcbiAgICAgIGJvZHk6IGJvZHksXG4gICAgICBxdWVyeTogc2VsZi5fdXJsUGFyYW1zLFxuICAgICAgc2lnbmFsOiB0aGlzLl9hYm9ydC5zaWduYWwsXG4gICAgICBzdHJlYW1Db25zdW1lcjoge1xuICAgICAgICBvbkVycm9yOiBvbkVycm9yLFxuICAgICAgICBvbkRhdGE6IG9uRGF0YSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAudGhlbihvblJlc3BvbnNlKVxuICAgIC5jYXRjaChvbkVycm9yKVxufVxuXG4vKiogQ2xvc2VzIHRoZSBzdHJlYW0gc3Vic2NyaXB0aW9uIGJ5IGFib3J0aW5nIGl0cyB1bmRlcmx5aW5nIGh0dHAgcmVxdWVzdC4gKi9cblN0cmVhbUNsaWVudC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuX3N0YXRlICE9PSAnY2xvc2VkJykge1xuICAgIHRoaXMuX3N0YXRlID0gJ2Nsb3NlZCdcbiAgICB0aGlzLl9hYm9ydC5hYm9ydCgpXG4gIH1cbn1cblxuLyoqXG4gKiBFdmVudCBkaXNwYXRjaCBpbnRlcmZhY2UgZm9yIHN0cmVhbSBzdWJzY3JpcHRpb24uXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBhbGxvd2VkRXZlbnRzIExpc3Qgb2YgYWxsb3dlZCBldmVudHMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFdmVudERpc3BhdGNoZXIoYWxsb3dlZEV2ZW50cykge1xuICB0aGlzLl9hbGxvd2VkRXZlbnRzID0gYWxsb3dlZEV2ZW50c1xuICB0aGlzLl9saXN0ZW5lcnMgPSB7fVxufVxuXG4vKiogU3Vic2NyaWJlIHRvIGFuIGV2ZW50XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge21vZHVsZTpzdHJlYW1+U3Vic2NyaXB0aW9ufmV2ZW50Q2FsbGxiYWNrfSBjYWxsYmFja1xuICogICBUaGUgZXZlbnQncyBjYWxsYmFjay5cbiAqL1xuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gIGlmICh0aGlzLl9hbGxvd2VkRXZlbnRzLmluZGV4T2YodHlwZSkgPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGV2ZW50IHR5cGU6ICcgKyB0eXBlKVxuICB9XG4gIGlmICh0aGlzLl9saXN0ZW5lcnNbdHlwZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2xpc3RlbmVyc1t0eXBlXSA9IFtdXG4gIH1cbiAgdGhpcy5fbGlzdGVuZXJzW3R5cGVdLnB1c2goY2FsbGJhY2spXG59XG5cbi8qKlxuICogRGlzcGF0Y2ggdGhlIGdpdmVuIGV2ZW50IHRvIHRoZSBhcHByb3ByaWF0ZSBsaXN0ZW5lcnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IFRoZSBldmVudC5cbiAqL1xuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbZXZlbnQudHlwZV1cbiAgaWYgKCFsaXN0ZW5lcnMpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGlzdGVuZXJzW2ldLmNhbGwobnVsbCwgZXZlbnQuZXZlbnQsIGV2ZW50KVxuICB9XG59XG5cbi8qKlxuICogU3RyZWFtJ3Mgc3RhcnQgZXZlbnQuIEEgc3RyZWFtIHN1YnNjcmlwdGlvbiBhbHdheXMgYmVnaW5zIHdpdGggYSBzdGFydCBldmVudC5cbiAqIFVwY29taW5nIGV2ZW50cyBhcmUgZ3VhcmFudGVlZCB0byBoYXZlIHRyYW5zYWN0aW9uIHRpbWVzdGFtcHMgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuXG4gKiB0aGUgc3RyZWFtJ3Mgc3RhcnQgdGltZXN0YW1wLlxuICpcbiAqIEBldmVudCBtb2R1bGU6c3RyZWFtflN1YnNjcmlwdGlvbiNzdGFydFxuICogQHR5cGUge29iamVjdH1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlPSdzdGFydCdcbiAqICAgVGhlIGV2ZW50IHR5cGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gdHhuXG4gKiAgIFRoZSBldmVudCdzIHRyYW5zYWN0aW9uIHRpbWVzdGFtcC5cbiAqIEBwcm9wZXJ0eSB7bW9kdWxlOm51bWJlcn0gZXZlbnRcbiAqICAgVGhlIHN0cmVhbSBzdGFydCB0aW1lc3RhbXAuXG4gKi9cblxuLyoqXG4gKiBBIHZlcnNpb24gZXZlbnQgb2NjdXJzIHVwb24gYW55IG1vZGlmaWNhdGlvbnMgdG8gdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlXG4gKiBzdWJzY3JpYmVkIGRvY3VtZW50LlxuICpcbiAqIEBldmVudCBtb2R1bGU6c3RyZWFtflN1YnNjcmlwdGlvbiN2ZXJzaW9uXG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGU9J3ZlcnNpb24nXG4gKiAgIFRoZSBldmVudCB0eXBlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHR4blxuICogICBUaGUgZXZlbnQncyB0cmFuc2FjdGlvbiB0aW1lc3RhbXAuXG4gKiBAcHJvcGVydHkge29iamVjdH0gZXZlbnRcbiAqICAgVGhlIGV2ZW50J3MgZGF0YS5cbiAqL1xuXG4vKipcbiAqIEEgaGlzdG9yeSByZXdyaXRlIGV2ZW50IG9jY3VycyB1cG9uIGFueSBtb2RpZmljYXRpb25zIHRvIHRoZSBoaXN0b3J5IG9mIHRoZVxuICogc3Vic2NyaWJlZCBkb2N1bWVudC5cbiAqXG4gKiBAZXZlbnQgbW9kdWxlOnN0cmVhbX5TdWJzY3JpcHRpb24jaGlzdG9yeV9yZXdyaXRlXG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGU9J2hpc3RvcnlfcmV3cml0ZSdcbiAqICAgVGhlIGV2ZW50IHR5cGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gdHhuXG4gKiAgIFRoZSBldmVudCdzIHRyYW5zYWN0aW9uIHRpbWVzdGFtcC5cbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBldmVudFxuICogICBUaGUgZXZlbnQncyBkYXRhLlxuICovXG5cbi8qKlxuICogQSBzbmFwc2hvdCBldmVudC4gQSBzbmFwc2hvdCBldmVudCBpcyBmaXJlZCBvbmNlIHRoZSBgZG9jdW1lbnRgIHN0cmVhbSBoZWxwZXJcbiAqIGZpbmlzaGVzIGxvYWRpbmcgdGhlIHN1YnNjcmliZWQgZG9jdW1lbnQncyBzbmFwc2hvdCBkYXRhLiBTZWUge0BsaW5rXG4gKiBDbGllbnQjc3RyZWFtfSBmb3IgbW9yZSBkZXRhaWxzIG9uIHRoZSBgZG9jdW1lbnRgIHN0cmVhbSBoZWxwZXIuXG4gKlxuICogQGV2ZW50IG1vZHVsZTpzdHJlYW1+U3Vic2NyaXB0aW9uI3NuYXBzaG90XG4gKiBAdHlwZSB7b2JqZWN0fVxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGU9J3NuYXBzaG90J1xuICogICBUaGUgZXZlbnQgdHlwZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0eG5cbiAqICAgVGhlIGV2ZW50J3MgdHJhbnNhY3Rpb24gdGltZXN0YW1wLlxuICogQHByb3BlcnR5IHtvYmplY3R9IGV2ZW50XG4gKiAgIFRoZSBldmVudCdzIGRhdGEuXG4gKi9cblxuLyoqXG4gKiBBbiBlcnJvciBldmVudCBpcyBmaXJlZCBib3RoIGZvciBjbGllbnQgYW5kIHNlcnZlciBlcnJvcnMgdGhhdCBtYXkgb2NjdXIgYXNcbiAqIGEgcmVzdWx0IG9mIGEgc3Vic2NyaXB0aW9uLlxuICpcbiAqIEBldmVudCBtb2R1bGU6c3RyZWFtflN1YnNjcmlwdGlvbiNlcnJvclxuICogQHR5cGUge29iamVjdH1cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlPSdlcnJvcidcbiAqICAgVGhlIGV2ZW50IHR5cGUuXG4gKiBAcHJvcGVydHkgez9udW1iZXJ9IHR4blxuICogICBUaGUgZXZlbnQncyB0cmFuc2FjdGlvbiB0aW1lc3RhbXAuXG4gKiBAcHJvcGVydHkge0Vycm9yfSBldmVudFxuICogICBUaGUgdW5kZXJseWluZyBlcnJvci5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IFtmaWVsZHM9WydhY3Rpb24nLCAnZG9jdW1lbnQnLCAnZGlmZicsICdwcmV2JywgJ2luZGV4J11dXG4gKiAgIFRoZSBmaWVsZHMgZXZlbnQgZmllbGRzIHRvIG9wdC1pbiBkdXJpbmcgc3RyZWFtIHN1YnNjcmlwdGlvbi4gUG9zc2libGVcbiAqICAgb3B0aW9uczpcbiAqICAgKiAnYWN0aW9uJzogVGhlIGFjdGlvbiB0eXBlXG4gKiAgICogJ2RvY3VtZW50JzogVGhlIGRvY3VtZW50J3MgZGF0YVxuICogICAqICdkaWZmJzogVGhlIGRpZmZlcmVuY2UgYmV0d2VlbiAnZG9jdW1lbnQnIGFuZCAncHJldidcbiAqICAgKiAncHJldic6IFRoZSBldmVudCdzIHByZXZpb3VzIGRhdGFcbiAqICAgKiAnaW5kZXgnOiBUaGUgZXZlbnQncyBzb3VyY2UgaW5kZXgsIGlmIGEgc2V0IGV2ZW50XG4gKi9cblxuLyoqXG4gKiBUaGUgY2FsbGJhY2sgdG8gYmUgZXhlY3V0ZWQgd2hlbiBhbiBuZXcgZXZlbnQgb2NjdXJzLlxuICpcbiAqIEBjYWxsYmFjayBtb2R1bGU6c3RyZWFtflN1YnNjcmlwdGlvbn5ldmVudENhbGxsYmFja1xuICogQHBhcmFtIHthbnl9IGRhdGEgVGhlIGV2ZW50J3MgZGF0YSBmaWVsZC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBUaGUgZXZlbnQncyBlbnRpcmUgb2JqZWN0LlxuICovXG5cbi8qKlxuICogQSBzdHJlYW0gc3Vic2NyaXB0aW9uIHdoaWNoIGRpc3BhdGNoZXMgZXZlbnRzIHJlY2VpdmVkIHRvIHRoZSByZWdpc3RlcmVkXG4gKiBsaXN0ZW5lciBmdW5jdGlvbnMuIFRoaXMgY2xhc3MgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEge0BsaW5rIENsaWVudCNzdHJlYW19XG4gKiBtZXRob2QuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1N0cmVhbUNsaWVudH0gY2xpZW50XG4gKiAgIEludGVybmFsIHN0cmVhbSBjbGllbnQgaW50ZXJmYWNlLlxuICogQHBhcmFtIHtFdmVudERpc3BhdGNoZXJ9IGRpc3BhdGNoZXJcbiAqICAgSW50ZXJuYWwgZXZlbnQgZGlzcGF0Y2hlciBpbnRlcmZhY2UuXG4gKi9cbmZ1bmN0aW9uIFN1YnNjcmlwdGlvbihjbGllbnQsIGRpc3BhdGNoZXIpIHtcbiAgdGhpcy5fY2xpZW50ID0gY2xpZW50XG4gIHRoaXMuX2Rpc3BhdGNoZXIgPSBkaXNwYXRjaGVyXG59XG5cbi8qKlxuICogU3Vic2NyaWJlcyB0byBhbiBldmVudCB0eXBlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICogICBUaGUgZXZlbnQncyB0eXBlLlxuICogQHBhcmFtIHttb2R1bGU6c3RyZWFtflN1YnNjcmlwdGlvbn5ldmVudENhbGxsYmFja30gY2FsbGJhY2tcbiAqICAgQSBjYWxsYmFjayBmdW5jdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7bW9kdWxlOnN0cmVhbX5TdWJzY3JpcHRpb259IFRoaXMgaW5zdGFuY2UuXG4gKi9cblN1YnNjcmlwdGlvbi5wcm90b3R5cGUub24gPSBmdW5jdGlvbih0eXBlLCBjYWxsYmFjaykge1xuICB0aGlzLl9kaXNwYXRjaGVyLm9uKHR5cGUsIGNhbGxiYWNrKVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgdW5kZXJseWluZyBzdWJzY3JpcHRpb24gbmV0d29yayBjYWxscy5cbiAqIEByZXR1cm5zIHttb2R1bGU6c3RyZWFtflN1YnNjcmlwdGlvbn0gVGhpcyBpbnN0YW5jZS5cbiAqL1xuU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGllbnQuc3Vic2NyaWJlKClcbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBTdG9wcyB0aGUgY3VycmVudCBzdWJzY3JpcHRpb24gYW5kIGNsb3NlcyB0aGUgdW5kZXJseWluZyBuZXR3b3JrIGNvbm5lY3Rpb24uXG4gKi9cblN1YnNjcmlwdGlvbi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xpZW50LmNsb3NlKClcbn1cblxuLyoqXG4gKiBTdHJlYW0gQVBJIGZhY3RvcnkgZnVuY3Rpb24uIFNlZSB7QGxpbmsgQ2xpZW50I3N0cmVhbX0gZm9yIGRldGFpbHMgb24gaG93IHRvXG4gKiB1c2Ugc3RyZWFtJ3MgcHVibGljIGludGVyZmFjZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIFN0cmVhbUFQSShjbGllbnQpIHtcbiAgdmFyIGFwaSA9IGZ1bmN0aW9uKGV4cHJlc3Npb24sIG9wdGlvbnMpIHtcbiAgICB2YXIgZGlzcGF0Y2hlciA9IG5ldyBFdmVudERpc3BhdGNoZXIoRGVmYXVsdEV2ZW50cylcbiAgICB2YXIgc3RyZWFtQ2xpZW50ID0gbmV3IFN0cmVhbUNsaWVudChjbGllbnQsIGV4cHJlc3Npb24sIG9wdGlvbnMsIGZ1bmN0aW9uKFxuICAgICAgZXZlbnRcbiAgICApIHtcbiAgICAgIGRpc3BhdGNoZXIuZGlzcGF0Y2goZXZlbnQpXG4gICAgfSlcbiAgICByZXR1cm4gbmV3IFN1YnNjcmlwdGlvbihzdHJlYW1DbGllbnQsIGRpc3BhdGNoZXIpXG4gIH1cblxuICBhcGkuZG9jdW1lbnQgPSBmdW5jdGlvbihleHByZXNzaW9uLCBvcHRpb25zKSB7XG4gICAgdmFyIGJ1ZmZlciA9IFtdXG4gICAgdmFyIGJ1ZmZlcmluZyA9IHRydWVcbiAgICB2YXIgZGlzcGF0Y2hlciA9IG5ldyBFdmVudERpc3BhdGNoZXIoRG9jdW1lbnRTdHJlYW1FdmVudHMpXG4gICAgdmFyIHN0cmVhbUNsaWVudCA9IG5ldyBTdHJlYW1DbGllbnQoY2xpZW50LCBleHByZXNzaW9uLCBvcHRpb25zLCBvbkV2ZW50KVxuXG4gICAgZnVuY3Rpb24gb25FdmVudChldmVudCkge1xuICAgICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgICBkaXNwYXRjaGVyLmRpc3BhdGNoKGV2ZW50KVxuICAgICAgICAgIHN0cmVhbUNsaWVudC5zbmFwc2hvdCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc25hcHNob3QnOlxuICAgICAgICAgIHJlc3VtZShldmVudClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgICAgZGlzcGF0Y2hlci5kaXNwYXRjaChldmVudClcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmIChidWZmZXJpbmcpIHtcbiAgICAgICAgICAgIGJ1ZmZlci5wdXNoKGV2ZW50KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXNwYXRjaGVyLmRpc3BhdGNoKGV2ZW50KVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXN1bWUoc25hcHNob3RFdmVudCkge1xuICAgICAgZGlzcGF0Y2hlci5kaXNwYXRjaChzbmFwc2hvdEV2ZW50KVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGJ1ZmZlcmVkRXZlbnQgPSBidWZmZXJbaV1cbiAgICAgICAgaWYgKGJ1ZmZlcmVkRXZlbnQudHhuID4gc25hcHNob3RFdmVudC5ldmVudC50cykge1xuICAgICAgICAgIGRpc3BhdGNoZXIuZGlzcGF0Y2goYnVmZmVyZWRFdmVudClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnVmZmVyaW5nID0gZmFsc2VcbiAgICAgIGJ1ZmZlciA9IG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFN1YnNjcmlwdGlvbihzdHJlYW1DbGllbnQsIGRpc3BhdGNoZXIpXG4gIH1cblxuICByZXR1cm4gYXBpXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBTdHJlYW1BUEk6IFN0cmVhbUFQSSxcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/stream.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/src/values.js":
/*!********************************************!*\
  !*** ./node_modules/faunadb/src/values.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\nvar base64 = __webpack_require__(/*! base64-js */ \"(ssr)/./node_modules/base64-js/index.js\")\nvar deprecate = __webpack_require__(/*! util-deprecate */ \"(ssr)/./node_modules/util-deprecate/node.js\")\nvar errors = __webpack_require__(/*! ./errors */ \"(ssr)/./node_modules/faunadb/src/errors.js\")\nvar Expr = __webpack_require__(/*! ./Expr */ \"(ssr)/./node_modules/faunadb/src/Expr.js\")\nvar util = __webpack_require__(/*! ./_util */ \"(ssr)/./node_modules/faunadb/src/_util.js\")\nvar nodeUtil = util.isNodeEnv() ? __webpack_require__(/*! util */ \"util\") : null\n\nvar customInspect = nodeUtil && nodeUtil.inspect.custom\nvar stringify = nodeUtil ? nodeUtil.inspect : JSON.stringify\n\n/**\n * FaunaDB value types. Generally, these collections do not need to be instantiated\n * directly; they can be constructed through helper methods in {@link module:query}.\n *\n * Instances of these collections will be returned in responses if the response object\n * contains these values. For example, a FaunaDB response containing\n *`{ \"@ref\": { \"id\": \"123\", \"collection\": { \"@ref\": { \"id\": \"frogs\", \"collection\": { \"@ref\": { \"id\": \"collectiones\" } } } } } }`\n * will be returned as `new values.Ref(\"123\", new values.Ref(\"frogs\", values.Native.COLLECTIONS))`.\n *\n * See the [FaunaDB Query API Documentation](https://app.fauna.com/documentation/reference/queryapi#simple-type)\n * for more information.\n *\n * @module values\n */\n\n/**\n * Base type for FaunaDB value objects.\n *\n * @extends Expr\n * @abstract\n * @constructor\n */\nfunction Value() {}\n\nutil.inherits(Value, Expr)\n\nValue.prototype._isFaunaValue = true\n\n/**\n * FaunaDB ref.\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {string} id\n *   The id portion of the ref.\n * @param {Ref} [collection]\n *   The collection portion of the ref.\n * @param {Ref} [database]\n *   The database portion of the ref.\n *\n * @extends module:values~Value\n * @constructor\n */\nfunction Ref(id, collection, database) {\n  if (!id) throw new errors.InvalidValue('id cannot be null or undefined')\n\n  this.value = { id: id }\n  if (collection) this.value['collection'] = collection\n  if (database) this.value['database'] = database\n}\n\nutil.inherits(Ref, Value)\n\nRef.prototype._isFaunaRef = true\n\n/**\n * Gets the collection part out of the Ref.\n *\n * @member {string}\n * @name module:values~Ref#collection\n */\nObject.defineProperty(Ref.prototype, 'collection', {\n  get: function() {\n    return this.value['collection']\n  },\n})\n\n/**\n * DEPRECATED. Gets the class part out of the Ref.\n *\n * @member {string}\n * @name module:values~Ref#class\n */\nObject.defineProperty(Ref.prototype, 'class', {\n  get: deprecate(function() {\n    return this.value['collection']\n  }, 'class is deprecated, use collection instead'),\n})\n\n/**\n * Gets the database part out of the Ref.\n *\n * @member {Ref}\n * @name module:values~Ref#database\n */\nObject.defineProperty(Ref.prototype, 'database', {\n  get: function() {\n    return this.value['database']\n  },\n})\n\n/**\n * Gets the id part out of the Ref.\n *\n * @member {Ref}\n * @name module:values~Ref#id\n */\nObject.defineProperty(Ref.prototype, 'id', {\n  get: function() {\n    return this.value['id']\n  },\n})\n\n/** @ignore */\nRef.prototype.toJSON = function() {\n  return { '@ref': this.value }\n}\n\nwrapToString(Ref, function() {\n  var constructors = {\n    collections: 'Collection',\n    databases: 'Database',\n    indexes: 'Index',\n    functions: 'Function',\n    roles: 'Role',\n    access_providers: 'AccessProvider',\n  }\n\n  var isNative = function(ref) {\n    return ref.collection === undefined\n  }\n\n  var toString = function(ref) {\n    if (isNative(ref)) {\n      var db = ref.database !== undefined ? ref.database.toString() : ''\n\n      if (ref.id === 'access_providers') return 'AccessProviders(' + db + ')'\n\n      return ref.id.charAt(0).toUpperCase() + ref.id.slice(1) + '(' + db + ')'\n    }\n\n    if (isNative(ref.collection)) {\n      var constructor = constructors[ref.collection.id]\n      if (constructor !== undefined) {\n        var db =\n          ref.database !== undefined ? ', ' + ref.database.toString() : ''\n        return constructor + '(\"' + ref.id + '\"' + db + ')'\n      }\n    }\n\n    return 'Ref(' + toString(ref.collection) + ', \"' + ref.id + '\")'\n  }\n\n  return toString(this)\n})\n\n/** @ignore */\nRef.prototype.valueOf = function() {\n  return this.value\n}\n\n/**\n * Whether these are both Refs and have the same value.\n * @param {any} other\n * @returns {boolean}\n */\nRef.prototype.equals = function(other) {\n  return (\n    (other instanceof Ref ||\n      util.checkInstanceHasProperty(other, '_isFaunaRef')) &&\n    this.id === other.id &&\n    ((this.collection === undefined && other.collection === undefined) ||\n      this.collection.equals(other.collection)) &&\n    ((this.database === undefined && other.database === undefined) ||\n      this.database.equals(other.database))\n  )\n}\n\nvar Native = {\n  COLLECTIONS: new Ref('collections'),\n  INDEXES: new Ref('indexes'),\n  DATABASES: new Ref('databases'),\n  FUNCTIONS: new Ref('functions'),\n  ROLES: new Ref('roles'),\n  KEYS: new Ref('keys'),\n  ACCESS_PROVIDERS: new Ref('access_providers'),\n}\n\nNative.fromName = function(name) {\n  switch (name) {\n    case 'collections':\n      return Native.COLLECTIONS\n    case 'indexes':\n      return Native.INDEXES\n    case 'databases':\n      return Native.DATABASES\n    case 'functions':\n      return Native.FUNCTIONS\n    case 'roles':\n      return Native.ROLES\n    case 'keys':\n      return Native.KEYS\n    case 'access_providers':\n      return Native.ACCESS_PROVIDERS\n  }\n  return new Ref(name)\n}\n\n/**\n * FaunaDB Set.\n * This represents a set returned as part of a response.\n * This looks like `{\"@set\": set_query}`.\n * For query sets see {@link match}, {@link union},\n * {@link intersection}, {@link difference}, and {@link join}.\n *\n * @extends module:values~Value\n * @constructor\n */\nfunction SetRef(value) {\n  /** Raw query object. */\n  this.value = value\n}\n\nutil.inherits(SetRef, Value)\n\nwrapToString(SetRef, function() {\n  return Expr.toString(this.value)\n})\n\n/** @ignore */\nSetRef.prototype.toJSON = function() {\n  return { '@set': this.value }\n}\n\n/** FaunaDB time. See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {string|Date} value If a Date, this is converted to a string.\n * @extends module:values~Value\n * @constructor\n */\nfunction FaunaTime(value) {\n  if (value instanceof Date) {\n    value = value.toISOString()\n  } else if (!(value.charAt(value.length - 1) === 'Z')) {\n    throw new errors.InvalidValue(\"Only allowed timezone is 'Z', got: \" + value)\n  }\n\n  this.value = value\n}\n\nutil.inherits(FaunaTime, Value)\n\n/**\n * Returns the date wrapped by this object.\n * This is lossy as Dates have millisecond rather than nanosecond precision.\n *\n * @member {Date}\n * @name module:values~FaunaTime#date\n */\nObject.defineProperty(FaunaTime.prototype, 'date', {\n  get: function() {\n    return new Date(this.value)\n  },\n})\n\nwrapToString(FaunaTime, function() {\n  return 'Time(\"' + this.value + '\")'\n})\n\n/** @ignore */\nFaunaTime.prototype.toJSON = function() {\n  return { '@ts': this.value }\n}\n\n/** FaunaDB date. See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {string|Date} value\n *   If a Date, this is converted to a string, with time-of-day discarded.\n * @extends module:values~Value\n * @constructor\n */\nfunction FaunaDate(value) {\n  if (value instanceof Date) {\n    // The first 10 characters 'YYYY-MM-DD' are the date portion.\n    value = value.toISOString().slice(0, 10)\n  }\n\n  /**\n   * ISO8601 date.\n   * @type {string}\n   */\n  this.value = value\n}\n\nutil.inherits(FaunaDate, Value)\n\n/**\n * @member {Date}\n * @name module:values~FaunaDate#date\n */\nObject.defineProperty(FaunaDate.prototype, 'date', {\n  get: function() {\n    return new Date(this.value)\n  },\n})\n\nwrapToString(FaunaDate, function() {\n  return 'Date(\"' + this.value + '\")'\n})\n\n/** @ignore */\nFaunaDate.prototype.toJSON = function() {\n  return { '@date': this.value }\n}\n\n/** FaunaDB bytes. See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {Uint8Array|ArrayBuffer|string} value\n *    If ArrayBuffer it's converted to Uint8Array\n *    If string it must be base64 encoded and it's converted to Uint8Array\n * @extends module:values~Value\n * @constructor\n */\nfunction Bytes(value) {\n  if (value instanceof ArrayBuffer) {\n    this.value = new Uint8Array(value)\n  } else if (typeof value === 'string') {\n    this.value = base64.toByteArray(value)\n  } else if (value instanceof Uint8Array) {\n    this.value = value\n  } else {\n    throw new errors.InvalidValue(\n      'Bytes type expect argument to be either Uint8Array|ArrayBuffer|string, got: ' +\n        stringify(value)\n    )\n  }\n}\n\nutil.inherits(Bytes, Value)\n\nwrapToString(Bytes, function() {\n  return 'Bytes(\"' + base64.fromByteArray(this.value) + '\")'\n})\n\n/** @ignore */\nBytes.prototype.toJSON = function() {\n  return { '@bytes': base64.fromByteArray(this.value) }\n}\n\n/** FaunaDB query. See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {any} value\n * @extends module:values~Value\n * @constructor\n */\nfunction Query(value) {\n  this.value = value\n}\n\nutil.inherits(Query, Value)\n\nwrapToString(Query, function() {\n  return 'Query(' + Expr.toString(this.value) + ')'\n})\n\n/** @ignore */\nQuery.prototype.toJSON = function() {\n  return { '@query': this.value }\n}\n\n/** @ignore */\nfunction wrapToString(type, fn) {\n  type.prototype.toString = fn\n  type.prototype.inspect = fn\n\n  if (customInspect) {\n    type.prototype[customInspect] = fn\n  }\n}\n\nmodule.exports = {\n  Value: Value,\n  Ref: Ref,\n  Native: Native,\n  SetRef: SetRef,\n  FaunaTime: FaunaTime,\n  FaunaDate: FaunaDate,\n  Bytes: Bytes,\n  Query: Query,\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZmF1bmFkYi9zcmMvdmFsdWVzLmpzIiwibWFwcGluZ3MiOiJBQUFZOztBQUVaLGFBQWEsbUJBQU8sQ0FBQywwREFBVztBQUNoQyxnQkFBZ0IsbUJBQU8sQ0FBQyxtRUFBZ0I7QUFDeEMsYUFBYSxtQkFBTyxDQUFDLDREQUFVO0FBQy9CLFdBQVcsbUJBQU8sQ0FBQyx3REFBUTtBQUMzQixXQUFXLG1CQUFPLENBQUMsMERBQVM7QUFDNUIsa0NBQWtDLG1CQUFPLENBQUMsa0JBQU07O0FBRWhEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsbURBQW1ELG1CQUFtQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQSxLQUFLLFVBQVUsNkJBQTZCLFVBQVUsK0JBQStCLFVBQVUsZ0NBQWdDO0FBQy9IO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQSxXQUFXLEtBQUs7QUFDaEI7QUFDQSxXQUFXLEtBQUs7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLEtBQUs7QUFDaEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtCQUFrQjtBQUN2Qyx1QkFBdUIsWUFBWSxHQUFHLFlBQVk7QUFDbEQsSUFBSSxtQkFBbUIsR0FBRyxpQkFBaUIsT0FBTyxXQUFXO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBLFdBQVcsYUFBYTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBLFdBQVcsK0JBQStCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBLFdBQVcsS0FBSztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29rYm9va3Nob3BuZy8uL25vZGVfbW9kdWxlcy9mYXVuYWRiL3NyYy92YWx1ZXMuanM/YTMxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgZGVwcmVjYXRlID0gcmVxdWlyZSgndXRpbC1kZXByZWNhdGUnKVxudmFyIGVycm9ycyA9IHJlcXVpcmUoJy4vZXJyb3JzJylcbnZhciBFeHByID0gcmVxdWlyZSgnLi9FeHByJylcbnZhciB1dGlsID0gcmVxdWlyZSgnLi9fdXRpbCcpXG52YXIgbm9kZVV0aWwgPSB1dGlsLmlzTm9kZUVudigpID8gcmVxdWlyZSgndXRpbCcpIDogbnVsbFxuXG52YXIgY3VzdG9tSW5zcGVjdCA9IG5vZGVVdGlsICYmIG5vZGVVdGlsLmluc3BlY3QuY3VzdG9tXG52YXIgc3RyaW5naWZ5ID0gbm9kZVV0aWwgPyBub2RlVXRpbC5pbnNwZWN0IDogSlNPTi5zdHJpbmdpZnlcblxuLyoqXG4gKiBGYXVuYURCIHZhbHVlIHR5cGVzLiBHZW5lcmFsbHksIHRoZXNlIGNvbGxlY3Rpb25zIGRvIG5vdCBuZWVkIHRvIGJlIGluc3RhbnRpYXRlZFxuICogZGlyZWN0bHk7IHRoZXkgY2FuIGJlIGNvbnN0cnVjdGVkIHRocm91Z2ggaGVscGVyIG1ldGhvZHMgaW4ge0BsaW5rIG1vZHVsZTpxdWVyeX0uXG4gKlxuICogSW5zdGFuY2VzIG9mIHRoZXNlIGNvbGxlY3Rpb25zIHdpbGwgYmUgcmV0dXJuZWQgaW4gcmVzcG9uc2VzIGlmIHRoZSByZXNwb25zZSBvYmplY3RcbiAqIGNvbnRhaW5zIHRoZXNlIHZhbHVlcy4gRm9yIGV4YW1wbGUsIGEgRmF1bmFEQiByZXNwb25zZSBjb250YWluaW5nXG4gKmB7IFwiQHJlZlwiOiB7IFwiaWRcIjogXCIxMjNcIiwgXCJjb2xsZWN0aW9uXCI6IHsgXCJAcmVmXCI6IHsgXCJpZFwiOiBcImZyb2dzXCIsIFwiY29sbGVjdGlvblwiOiB7IFwiQHJlZlwiOiB7IFwiaWRcIjogXCJjb2xsZWN0aW9uZXNcIiB9IH0gfSB9IH0gfWBcbiAqIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG5ldyB2YWx1ZXMuUmVmKFwiMTIzXCIsIG5ldyB2YWx1ZXMuUmVmKFwiZnJvZ3NcIiwgdmFsdWVzLk5hdGl2ZS5DT0xMRUNUSU9OUykpYC5cbiAqXG4gKiBTZWUgdGhlIFtGYXVuYURCIFF1ZXJ5IEFQSSBEb2N1bWVudGF0aW9uXShodHRwczovL2FwcC5mYXVuYS5jb20vZG9jdW1lbnRhdGlvbi9yZWZlcmVuY2UvcXVlcnlhcGkjc2ltcGxlLXR5cGUpXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBAbW9kdWxlIHZhbHVlc1xuICovXG5cbi8qKlxuICogQmFzZSB0eXBlIGZvciBGYXVuYURCIHZhbHVlIG9iamVjdHMuXG4gKlxuICogQGV4dGVuZHMgRXhwclxuICogQGFic3RyYWN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gVmFsdWUoKSB7fVxuXG51dGlsLmluaGVyaXRzKFZhbHVlLCBFeHByKVxuXG5WYWx1ZS5wcm90b3R5cGUuX2lzRmF1bmFWYWx1ZSA9IHRydWVcblxuLyoqXG4gKiBGYXVuYURCIHJlZi5cbiAqIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzcGVjaWFsLXR5cGUpLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogICBUaGUgaWQgcG9ydGlvbiBvZiB0aGUgcmVmLlxuICogQHBhcmFtIHtSZWZ9IFtjb2xsZWN0aW9uXVxuICogICBUaGUgY29sbGVjdGlvbiBwb3J0aW9uIG9mIHRoZSByZWYuXG4gKiBAcGFyYW0ge1JlZn0gW2RhdGFiYXNlXVxuICogICBUaGUgZGF0YWJhc2UgcG9ydGlvbiBvZiB0aGUgcmVmLlxuICpcbiAqIEBleHRlbmRzIG1vZHVsZTp2YWx1ZXN+VmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBSZWYoaWQsIGNvbGxlY3Rpb24sIGRhdGFiYXNlKSB7XG4gIGlmICghaWQpIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZFZhbHVlKCdpZCBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWQnKVxuXG4gIHRoaXMudmFsdWUgPSB7IGlkOiBpZCB9XG4gIGlmIChjb2xsZWN0aW9uKSB0aGlzLnZhbHVlWydjb2xsZWN0aW9uJ10gPSBjb2xsZWN0aW9uXG4gIGlmIChkYXRhYmFzZSkgdGhpcy52YWx1ZVsnZGF0YWJhc2UnXSA9IGRhdGFiYXNlXG59XG5cbnV0aWwuaW5oZXJpdHMoUmVmLCBWYWx1ZSlcblxuUmVmLnByb3RvdHlwZS5faXNGYXVuYVJlZiA9IHRydWVcblxuLyoqXG4gKiBHZXRzIHRoZSBjb2xsZWN0aW9uIHBhcnQgb3V0IG9mIHRoZSBSZWYuXG4gKlxuICogQG1lbWJlciB7c3RyaW5nfVxuICogQG5hbWUgbW9kdWxlOnZhbHVlc35SZWYjY29sbGVjdGlvblxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVmLnByb3RvdHlwZSwgJ2NvbGxlY3Rpb24nLCB7XG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVbJ2NvbGxlY3Rpb24nXVxuICB9LFxufSlcblxuLyoqXG4gKiBERVBSRUNBVEVELiBHZXRzIHRoZSBjbGFzcyBwYXJ0IG91dCBvZiB0aGUgUmVmLlxuICpcbiAqIEBtZW1iZXIge3N0cmluZ31cbiAqIEBuYW1lIG1vZHVsZTp2YWx1ZXN+UmVmI2NsYXNzXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWYucHJvdG90eXBlLCAnY2xhc3MnLCB7XG4gIGdldDogZGVwcmVjYXRlKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlWydjb2xsZWN0aW9uJ11cbiAgfSwgJ2NsYXNzIGlzIGRlcHJlY2F0ZWQsIHVzZSBjb2xsZWN0aW9uIGluc3RlYWQnKSxcbn0pXG5cbi8qKlxuICogR2V0cyB0aGUgZGF0YWJhc2UgcGFydCBvdXQgb2YgdGhlIFJlZi5cbiAqXG4gKiBAbWVtYmVyIHtSZWZ9XG4gKiBAbmFtZSBtb2R1bGU6dmFsdWVzflJlZiNkYXRhYmFzZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVmLnByb3RvdHlwZSwgJ2RhdGFiYXNlJywge1xuICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlWydkYXRhYmFzZSddXG4gIH0sXG59KVxuXG4vKipcbiAqIEdldHMgdGhlIGlkIHBhcnQgb3V0IG9mIHRoZSBSZWYuXG4gKlxuICogQG1lbWJlciB7UmVmfVxuICogQG5hbWUgbW9kdWxlOnZhbHVlc35SZWYjaWRcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlZi5wcm90b3R5cGUsICdpZCcsIHtcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZVsnaWQnXVxuICB9LFxufSlcblxuLyoqIEBpZ25vcmUgKi9cblJlZi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7ICdAcmVmJzogdGhpcy52YWx1ZSB9XG59XG5cbndyYXBUb1N0cmluZyhSZWYsIGZ1bmN0aW9uKCkge1xuICB2YXIgY29uc3RydWN0b3JzID0ge1xuICAgIGNvbGxlY3Rpb25zOiAnQ29sbGVjdGlvbicsXG4gICAgZGF0YWJhc2VzOiAnRGF0YWJhc2UnLFxuICAgIGluZGV4ZXM6ICdJbmRleCcsXG4gICAgZnVuY3Rpb25zOiAnRnVuY3Rpb24nLFxuICAgIHJvbGVzOiAnUm9sZScsXG4gICAgYWNjZXNzX3Byb3ZpZGVyczogJ0FjY2Vzc1Byb3ZpZGVyJyxcbiAgfVxuXG4gIHZhciBpc05hdGl2ZSA9IGZ1bmN0aW9uKHJlZikge1xuICAgIHJldHVybiByZWYuY29sbGVjdGlvbiA9PT0gdW5kZWZpbmVkXG4gIH1cblxuICB2YXIgdG9TdHJpbmcgPSBmdW5jdGlvbihyZWYpIHtcbiAgICBpZiAoaXNOYXRpdmUocmVmKSkge1xuICAgICAgdmFyIGRiID0gcmVmLmRhdGFiYXNlICE9PSB1bmRlZmluZWQgPyByZWYuZGF0YWJhc2UudG9TdHJpbmcoKSA6ICcnXG5cbiAgICAgIGlmIChyZWYuaWQgPT09ICdhY2Nlc3NfcHJvdmlkZXJzJykgcmV0dXJuICdBY2Nlc3NQcm92aWRlcnMoJyArIGRiICsgJyknXG5cbiAgICAgIHJldHVybiByZWYuaWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyByZWYuaWQuc2xpY2UoMSkgKyAnKCcgKyBkYiArICcpJ1xuICAgIH1cblxuICAgIGlmIChpc05hdGl2ZShyZWYuY29sbGVjdGlvbikpIHtcbiAgICAgIHZhciBjb25zdHJ1Y3RvciA9IGNvbnN0cnVjdG9yc1tyZWYuY29sbGVjdGlvbi5pZF1cbiAgICAgIGlmIChjb25zdHJ1Y3RvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBkYiA9XG4gICAgICAgICAgcmVmLmRhdGFiYXNlICE9PSB1bmRlZmluZWQgPyAnLCAnICsgcmVmLmRhdGFiYXNlLnRvU3RyaW5nKCkgOiAnJ1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3IgKyAnKFwiJyArIHJlZi5pZCArICdcIicgKyBkYiArICcpJ1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAnUmVmKCcgKyB0b1N0cmluZyhyZWYuY29sbGVjdGlvbikgKyAnLCBcIicgKyByZWYuaWQgKyAnXCIpJ1xuICB9XG5cbiAgcmV0dXJuIHRvU3RyaW5nKHRoaXMpXG59KVxuXG4vKiogQGlnbm9yZSAqL1xuUmVmLnByb3RvdHlwZS52YWx1ZU9mID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLnZhbHVlXG59XG5cbi8qKlxuICogV2hldGhlciB0aGVzZSBhcmUgYm90aCBSZWZzIGFuZCBoYXZlIHRoZSBzYW1lIHZhbHVlLlxuICogQHBhcmFtIHthbnl9IG90aGVyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUmVmLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbihvdGhlcikge1xuICByZXR1cm4gKFxuICAgIChvdGhlciBpbnN0YW5jZW9mIFJlZiB8fFxuICAgICAgdXRpbC5jaGVja0luc3RhbmNlSGFzUHJvcGVydHkob3RoZXIsICdfaXNGYXVuYVJlZicpKSAmJlxuICAgIHRoaXMuaWQgPT09IG90aGVyLmlkICYmXG4gICAgKCh0aGlzLmNvbGxlY3Rpb24gPT09IHVuZGVmaW5lZCAmJiBvdGhlci5jb2xsZWN0aW9uID09PSB1bmRlZmluZWQpIHx8XG4gICAgICB0aGlzLmNvbGxlY3Rpb24uZXF1YWxzKG90aGVyLmNvbGxlY3Rpb24pKSAmJlxuICAgICgodGhpcy5kYXRhYmFzZSA9PT0gdW5kZWZpbmVkICYmIG90aGVyLmRhdGFiYXNlID09PSB1bmRlZmluZWQpIHx8XG4gICAgICB0aGlzLmRhdGFiYXNlLmVxdWFscyhvdGhlci5kYXRhYmFzZSkpXG4gIClcbn1cblxudmFyIE5hdGl2ZSA9IHtcbiAgQ09MTEVDVElPTlM6IG5ldyBSZWYoJ2NvbGxlY3Rpb25zJyksXG4gIElOREVYRVM6IG5ldyBSZWYoJ2luZGV4ZXMnKSxcbiAgREFUQUJBU0VTOiBuZXcgUmVmKCdkYXRhYmFzZXMnKSxcbiAgRlVOQ1RJT05TOiBuZXcgUmVmKCdmdW5jdGlvbnMnKSxcbiAgUk9MRVM6IG5ldyBSZWYoJ3JvbGVzJyksXG4gIEtFWVM6IG5ldyBSZWYoJ2tleXMnKSxcbiAgQUNDRVNTX1BST1ZJREVSUzogbmV3IFJlZignYWNjZXNzX3Byb3ZpZGVycycpLFxufVxuXG5OYXRpdmUuZnJvbU5hbWUgPSBmdW5jdGlvbihuYW1lKSB7XG4gIHN3aXRjaCAobmFtZSkge1xuICAgIGNhc2UgJ2NvbGxlY3Rpb25zJzpcbiAgICAgIHJldHVybiBOYXRpdmUuQ09MTEVDVElPTlNcbiAgICBjYXNlICdpbmRleGVzJzpcbiAgICAgIHJldHVybiBOYXRpdmUuSU5ERVhFU1xuICAgIGNhc2UgJ2RhdGFiYXNlcyc6XG4gICAgICByZXR1cm4gTmF0aXZlLkRBVEFCQVNFU1xuICAgIGNhc2UgJ2Z1bmN0aW9ucyc6XG4gICAgICByZXR1cm4gTmF0aXZlLkZVTkNUSU9OU1xuICAgIGNhc2UgJ3JvbGVzJzpcbiAgICAgIHJldHVybiBOYXRpdmUuUk9MRVNcbiAgICBjYXNlICdrZXlzJzpcbiAgICAgIHJldHVybiBOYXRpdmUuS0VZU1xuICAgIGNhc2UgJ2FjY2Vzc19wcm92aWRlcnMnOlxuICAgICAgcmV0dXJuIE5hdGl2ZS5BQ0NFU1NfUFJPVklERVJTXG4gIH1cbiAgcmV0dXJuIG5ldyBSZWYobmFtZSlcbn1cblxuLyoqXG4gKiBGYXVuYURCIFNldC5cbiAqIFRoaXMgcmVwcmVzZW50cyBhIHNldCByZXR1cm5lZCBhcyBwYXJ0IG9mIGEgcmVzcG9uc2UuXG4gKiBUaGlzIGxvb2tzIGxpa2UgYHtcIkBzZXRcIjogc2V0X3F1ZXJ5fWAuXG4gKiBGb3IgcXVlcnkgc2V0cyBzZWUge0BsaW5rIG1hdGNofSwge0BsaW5rIHVuaW9ufSxcbiAqIHtAbGluayBpbnRlcnNlY3Rpb259LCB7QGxpbmsgZGlmZmVyZW5jZX0sIGFuZCB7QGxpbmsgam9pbn0uXG4gKlxuICogQGV4dGVuZHMgbW9kdWxlOnZhbHVlc35WYWx1ZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFNldFJlZih2YWx1ZSkge1xuICAvKiogUmF3IHF1ZXJ5IG9iamVjdC4gKi9cbiAgdGhpcy52YWx1ZSA9IHZhbHVlXG59XG5cbnV0aWwuaW5oZXJpdHMoU2V0UmVmLCBWYWx1ZSlcblxud3JhcFRvU3RyaW5nKFNldFJlZiwgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBFeHByLnRvU3RyaW5nKHRoaXMudmFsdWUpXG59KVxuXG4vKiogQGlnbm9yZSAqL1xuU2V0UmVmLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHsgJ0BzZXQnOiB0aGlzLnZhbHVlIH1cbn1cblxuLyoqIEZhdW5hREIgdGltZS4gU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3NwZWNpYWwtdHlwZSkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8RGF0ZX0gdmFsdWUgSWYgYSBEYXRlLCB0aGlzIGlzIGNvbnZlcnRlZCB0byBhIHN0cmluZy5cbiAqIEBleHRlbmRzIG1vZHVsZTp2YWx1ZXN+VmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBGYXVuYVRpbWUodmFsdWUpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgIHZhbHVlID0gdmFsdWUudG9JU09TdHJpbmcoKVxuICB9IGVsc2UgaWYgKCEodmFsdWUuY2hhckF0KHZhbHVlLmxlbmd0aCAtIDEpID09PSAnWicpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkVmFsdWUoXCJPbmx5IGFsbG93ZWQgdGltZXpvbmUgaXMgJ1onLCBnb3Q6IFwiICsgdmFsdWUpXG4gIH1cblxuICB0aGlzLnZhbHVlID0gdmFsdWVcbn1cblxudXRpbC5pbmhlcml0cyhGYXVuYVRpbWUsIFZhbHVlKVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGRhdGUgd3JhcHBlZCBieSB0aGlzIG9iamVjdC5cbiAqIFRoaXMgaXMgbG9zc3kgYXMgRGF0ZXMgaGF2ZSBtaWxsaXNlY29uZCByYXRoZXIgdGhhbiBuYW5vc2Vjb25kIHByZWNpc2lvbi5cbiAqXG4gKiBAbWVtYmVyIHtEYXRlfVxuICogQG5hbWUgbW9kdWxlOnZhbHVlc35GYXVuYVRpbWUjZGF0ZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRmF1bmFUaW1lLnByb3RvdHlwZSwgJ2RhdGUnLCB7XG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudmFsdWUpXG4gIH0sXG59KVxuXG53cmFwVG9TdHJpbmcoRmF1bmFUaW1lLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICdUaW1lKFwiJyArIHRoaXMudmFsdWUgKyAnXCIpJ1xufSlcblxuLyoqIEBpZ25vcmUgKi9cbkZhdW5hVGltZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7ICdAdHMnOiB0aGlzLnZhbHVlIH1cbn1cblxuLyoqIEZhdW5hREIgZGF0ZS4gU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3NwZWNpYWwtdHlwZSkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8RGF0ZX0gdmFsdWVcbiAqICAgSWYgYSBEYXRlLCB0aGlzIGlzIGNvbnZlcnRlZCB0byBhIHN0cmluZywgd2l0aCB0aW1lLW9mLWRheSBkaXNjYXJkZWQuXG4gKiBAZXh0ZW5kcyBtb2R1bGU6dmFsdWVzflZhbHVlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRmF1bmFEYXRlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAvLyBUaGUgZmlyc3QgMTAgY2hhcmFjdGVycyAnWVlZWS1NTS1ERCcgYXJlIHRoZSBkYXRlIHBvcnRpb24uXG4gICAgdmFsdWUgPSB2YWx1ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKVxuICB9XG5cbiAgLyoqXG4gICAqIElTTzg2MDEgZGF0ZS5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIHRoaXMudmFsdWUgPSB2YWx1ZVxufVxuXG51dGlsLmluaGVyaXRzKEZhdW5hRGF0ZSwgVmFsdWUpXG5cbi8qKlxuICogQG1lbWJlciB7RGF0ZX1cbiAqIEBuYW1lIG1vZHVsZTp2YWx1ZXN+RmF1bmFEYXRlI2RhdGVcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEZhdW5hRGF0ZS5wcm90b3R5cGUsICdkYXRlJywge1xuICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnZhbHVlKVxuICB9LFxufSlcblxud3JhcFRvU3RyaW5nKEZhdW5hRGF0ZSwgZnVuY3Rpb24oKSB7XG4gIHJldHVybiAnRGF0ZShcIicgKyB0aGlzLnZhbHVlICsgJ1wiKSdcbn0pXG5cbi8qKiBAaWdub3JlICovXG5GYXVuYURhdGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4geyAnQGRhdGUnOiB0aGlzLnZhbHVlIH1cbn1cblxuLyoqIEZhdW5hREIgYnl0ZXMuIFNlZSB0aGUgW2RvY3NdKGh0dHBzOi8vYXBwLmZhdW5hLmNvbS9kb2N1bWVudGF0aW9uL3JlZmVyZW5jZS9xdWVyeWFwaSNzcGVjaWFsLXR5cGUpLlxuICpcbiAqIEBwYXJhbSB7VWludDhBcnJheXxBcnJheUJ1ZmZlcnxzdHJpbmd9IHZhbHVlXG4gKiAgICBJZiBBcnJheUJ1ZmZlciBpdCdzIGNvbnZlcnRlZCB0byBVaW50OEFycmF5XG4gKiAgICBJZiBzdHJpbmcgaXQgbXVzdCBiZSBiYXNlNjQgZW5jb2RlZCBhbmQgaXQncyBjb252ZXJ0ZWQgdG8gVWludDhBcnJheVxuICogQGV4dGVuZHMgbW9kdWxlOnZhbHVlc35WYWx1ZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEJ5dGVzKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgdGhpcy52YWx1ZSA9IG5ldyBVaW50OEFycmF5KHZhbHVlKVxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICB0aGlzLnZhbHVlID0gYmFzZTY0LnRvQnl0ZUFycmF5KHZhbHVlKVxuICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZFZhbHVlKFxuICAgICAgJ0J5dGVzIHR5cGUgZXhwZWN0IGFyZ3VtZW50IHRvIGJlIGVpdGhlciBVaW50OEFycmF5fEFycmF5QnVmZmVyfHN0cmluZywgZ290OiAnICtcbiAgICAgICAgc3RyaW5naWZ5KHZhbHVlKVxuICAgIClcbiAgfVxufVxuXG51dGlsLmluaGVyaXRzKEJ5dGVzLCBWYWx1ZSlcblxud3JhcFRvU3RyaW5nKEJ5dGVzLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICdCeXRlcyhcIicgKyBiYXNlNjQuZnJvbUJ5dGVBcnJheSh0aGlzLnZhbHVlKSArICdcIiknXG59KVxuXG4vKiogQGlnbm9yZSAqL1xuQnl0ZXMucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4geyAnQGJ5dGVzJzogYmFzZTY0LmZyb21CeXRlQXJyYXkodGhpcy52YWx1ZSkgfVxufVxuXG4vKiogRmF1bmFEQiBxdWVyeS4gU2VlIHRoZSBbZG9jc10oaHR0cHM6Ly9hcHAuZmF1bmEuY29tL2RvY3VtZW50YXRpb24vcmVmZXJlbmNlL3F1ZXJ5YXBpI3NwZWNpYWwtdHlwZSkuXG4gKlxuICogQHBhcmFtIHthbnl9IHZhbHVlXG4gKiBAZXh0ZW5kcyBtb2R1bGU6dmFsdWVzflZhbHVlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gUXVlcnkodmFsdWUpIHtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlXG59XG5cbnV0aWwuaW5oZXJpdHMoUXVlcnksIFZhbHVlKVxuXG53cmFwVG9TdHJpbmcoUXVlcnksIGZ1bmN0aW9uKCkge1xuICByZXR1cm4gJ1F1ZXJ5KCcgKyBFeHByLnRvU3RyaW5nKHRoaXMudmFsdWUpICsgJyknXG59KVxuXG4vKiogQGlnbm9yZSAqL1xuUXVlcnkucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4geyAnQHF1ZXJ5JzogdGhpcy52YWx1ZSB9XG59XG5cbi8qKiBAaWdub3JlICovXG5mdW5jdGlvbiB3cmFwVG9TdHJpbmcodHlwZSwgZm4pIHtcbiAgdHlwZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmblxuICB0eXBlLnByb3RvdHlwZS5pbnNwZWN0ID0gZm5cblxuICBpZiAoY3VzdG9tSW5zcGVjdCkge1xuICAgIHR5cGUucHJvdG90eXBlW2N1c3RvbUluc3BlY3RdID0gZm5cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgVmFsdWU6IFZhbHVlLFxuICBSZWY6IFJlZixcbiAgTmF0aXZlOiBOYXRpdmUsXG4gIFNldFJlZjogU2V0UmVmLFxuICBGYXVuYVRpbWU6IEZhdW5hVGltZSxcbiAgRmF1bmFEYXRlOiBGYXVuYURhdGUsXG4gIEJ5dGVzOiBCeXRlcyxcbiAgUXVlcnk6IFF1ZXJ5LFxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/faunadb/src/values.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/faunadb/package.json":
/*!*******************************************!*\
  !*** ./node_modules/faunadb/package.json ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = JSON.parse('{"name":"faunadb","version":"4.8.0","apiVersion":"4","description":"FaunaDB Javascript driver for Node.JS and Browsers","homepage":"https://fauna.com","repository":"fauna/faunadb-js","license":"MPL-2.0","keywords":["database","fauna","official","driver"],"bugs":{"url":"https://github.com/fauna/faunadb-js/issues"},"files":["index.d.ts","src/","dist/","tools/printReleaseNotes.js"],"main":"index.js","scripts":{"doc":"jsdoc -c ./jsdoc.json","browserify":"browserify index.js --standalone faunadb -o dist/faunadb.js","browserify-min":"browserify index.js --standalone faunadb | terser -c -m --keep-fnames --keep-classnames -o dist/faunadb-min.js","prettify":"prettier --write \\"{src,test}/**/*.{js,ts}\\"","test":"jest --env=node --verbose=true --forceExit --runInBand ./test","posttest":"node ./test/afterComplete","semantic-release":"semantic-release","wp":"webpack","postinstall":"node ./tools/printReleaseNotes","postupdate":"node ./tools/printReleaseNotes","load-test":"node ./tools/loadTest"},"types":"index.d.ts","dependencies":{"base64-js":"^1.2.0","boxen":"^5.0.1","btoa-lite":"^1.0.0","chalk":"^4.1.1","cross-fetch":"^3.1.5","dotenv":"^8.2.0","fn-annotate":"^1.1.3","node-abort-controller":"^3.0.1","object-assign":"^4.1.0","util-deprecate":"^1.0.2"},"devDependencies":{"ansi-regex":">=5.0.1","browserify":"^16.2.2","eslint":"^5.3.0","eslint-config-prettier":"^6.5.0","eslint-plugin-prettier":"^3.1.1","husky":"^7.0.4","jest":"^27.4.7","jsdoc":"^3.6.10","json-schema":">=0.4.0","lint-staged":">=8","marked":">=4.0.10","prettier":"1.18.2","semantic-release":"^19.0.3","terser":"^4.3.9","webpack":"^5.23.0","webpack-cli":"^4.5.0","yargs":"^16.2.0"},"lint-staged":{"*.{js,css,json,md}":["prettier --write","git add"],"*.js":["eslint --fix","git add"]},"release":{"branches":["main"]},"browser":{"http2":false,"http":false,"https":false,"os":false,"util":false,"boxen":false,"chalk":false}}');

/***/ })

};
;